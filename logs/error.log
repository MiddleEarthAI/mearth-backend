{"level":"error","message":"Agent purrlockpawsai has no password or username set","service":"middle-earth-agents","timestamp":"2025-01-23T22:02:24.541Z"}
{"level":"error","message":"Agent purrlockpawsai PURRLOCKPAWSAI_PASSWORD PURRLOCKPAWSAI_USERNAME PURRLOCKPAWSAI_EMAIL password or username is not set","service":"middle-earth-agents","timestamp":"2025-01-23T22:04:29.189Z"}
{"clientVersion":"6.2.1","level":"error","message":"Failed to start server: \nInvalid `prisma2.agent.findMany()` invocation in\n/Users/ChukwukaUba/Desktop/middle-earth-agents/express-ts/dist/index.js:2529:38\n\n  2526   return new Agent(agentConfig, agentId);\n  2527 }\n  2528 var startAgents = async () => {\n→ 2529   const agents = await prisma2.agent.findMany(\nCan't reach database server at `ep-summer-credit-a8phz689.eastus2.azure.neon.tech:5432`\n\nPlease make sure your database server is running at `ep-summer-credit-a8phz689.eastus2.azure.neon.tech:5432`.","name":"PrismaClientInitializationError","service":"middle-earth-agents","stack":"PrismaClientInitializationError: \nInvalid `prisma2.agent.findMany()` invocation in\n/Users/ChukwukaUba/Desktop/middle-earth-agents/express-ts/dist/index.js:2529:38\n\n  2526   return new Agent(agentConfig, agentId);\n  2527 }\n  2528 var startAgents = async () => {\n→ 2529   const agents = await prisma2.agent.findMany(\nCan't reach database server at `ep-summer-credit-a8phz689.eastus2.azure.neon.tech:5432`\n\nPlease make sure your database server is running at `ep-summer-credit-a8phz689.eastus2.azure.neon.tech:5432`.\n    at Vn.handleRequestError (/Users/ChukwukaUba/Desktop/middle-earth-agents/express-ts/node_modules/.pnpm/@prisma+client@6.2.1_prisma@6.2.1/node_modules/@prisma/client/runtime/library.js:121:7640)\n    at Vn.handleAndLogRequestError (/Users/ChukwukaUba/Desktop/middle-earth-agents/express-ts/node_modules/.pnpm/@prisma+client@6.2.1_prisma@6.2.1/node_modules/@prisma/client/runtime/library.js:121:6663)\n    at Vn.request (/Users/ChukwukaUba/Desktop/middle-earth-agents/express-ts/node_modules/.pnpm/@prisma+client@6.2.1_prisma@6.2.1/node_modules/@prisma/client/runtime/library.js:121:6370)\n    at async l (/Users/ChukwukaUba/Desktop/middle-earth-agents/express-ts/node_modules/.pnpm/@prisma+client@6.2.1_prisma@6.2.1/node_modules/@prisma/client/runtime/library.js:130:9617)\n    at async startAgents (/Users/ChukwukaUba/Desktop/middle-earth-agents/express-ts/dist/index.js:2529:18)\n    at async startServer (/Users/ChukwukaUba/Desktop/middle-earth-agents/express-ts/dist/index.js:2577:27)","timestamp":"2025-01-23T23:22:32.799Z"}
{"level":"error","message":"Failed to generate keypair for agent f23305f5-c2d2-4ae0-bf7e-4cce3d4dd752: Keypair encryption key is not set","service":"middle-earth-agents","stack":"Error: Keypair encryption key is not set\n    at KeyManager.encryptPrivateKey (/Users/ChukwukaUba/Desktop/middle-earth-agents/express-ts/dist/index.js:1581:13)\n    at KeyManager.generateKeypair (/Users/ChukwukaUba/Desktop/middle-earth-agents/express-ts/dist/index.js:1523:59)\n    at KeyManager.getKeypair (/Users/ChukwukaUba/Desktop/middle-earth-agents/express-ts/dist/index.js:1509:38)\n    at async Solana.processMovement (/Users/ChukwukaUba/Desktop/middle-earth-agents/express-ts/dist/index.js:1798:21)","timestamp":"2025-01-24T05:24:36.993Z"}
{"code":"ERR_CRYPTO_INVALID_KEYLEN","level":"error","message":"Failed to generate keypair for agent f23305f5-c2d2-4ae0-bf7e-4cce3d4dd752: Invalid key length","service":"middle-earth-agents","stack":"RangeError: Invalid key length\n    at Cipheriv.createCipherBase (node:internal/crypto/cipher:121:19)\n    at Cipheriv.createCipherWithIV (node:internal/crypto/cipher:133:3)\n    at new Cipheriv (node:internal/crypto/cipher:234:3)\n    at createCipheriv (node:crypto:143:10)\n    at KeyManager.encryptPrivateKey (/Users/ChukwukaUba/Desktop/middle-earth-agents/express-ts/dist/index.js:1584:53)\n    at KeyManager.generateKeypair (/Users/ChukwukaUba/Desktop/middle-earth-agents/express-ts/dist/index.js:1523:59)\n    at KeyManager.getKeypair (/Users/ChukwukaUba/Desktop/middle-earth-agents/express-ts/dist/index.js:1509:38)\n    at async Solana.processMovement (/Users/ChukwukaUba/Desktop/middle-earth-agents/express-ts/dist/index.js:1798:21)","timestamp":"2025-01-24T05:29:12.717Z"}
{"code":"ERR_CRYPTO_INVALID_KEYLEN","level":"error","message":"Failed to generate keypair for agent f23305f5-c2d2-4ae0-bf7e-4cce3d4dd752: Invalid key length","service":"middle-earth-agents","stack":"RangeError: Invalid key length\n    at Cipheriv.createCipherBase (node:internal/crypto/cipher:121:19)\n    at Cipheriv.createCipherWithIV (node:internal/crypto/cipher:133:3)\n    at new Cipheriv (node:internal/crypto/cipher:234:3)\n    at createCipheriv (node:crypto:143:10)\n    at KeyManager.encryptPrivateKey (/Users/ChukwukaUba/Desktop/middle-earth-agents/express-ts/dist/index.js:1592:53)\n    at KeyManager.generateKeypair (/Users/ChukwukaUba/Desktop/middle-earth-agents/express-ts/dist/index.js:1528:59)\n    at KeyManager.getKeypair (/Users/ChukwukaUba/Desktop/middle-earth-agents/express-ts/dist/index.js:1513:38)\n    at async Solana.processMovement (/Users/ChukwukaUba/Desktop/middle-earth-agents/express-ts/dist/index.js:1806:21)","timestamp":"2025-01-24T05:49:15.313Z"}
{"level":"error","message":"Keypair generation failed for agent test-agent-id __vite_ssr_import_3__.prisma.$transaction is not a function","service":"middle-earth-agents","stack":"TypeError: __vite_ssr_import_3__.prisma.$transaction is not a function\n    at KeyManager.generateKeypair (/Users/ChukwukaUba/Desktop/middle-earth-agents/express-ts/src/deps/keyManager.ts:173:20)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at KeyManager.getKeypair (/Users/ChukwukaUba/Desktop/middle-earth-agents/express-ts/src/deps/keyManager.ts:127:27)\n    at /Users/ChukwukaUba/Desktop/middle-earth-agents/express-ts/src/deps/__tests__/keyManager.test.ts:72:22\n    at file:///Users/ChukwukaUba/Desktop/middle-earth-agents/express-ts/node_modules/.pnpm/@vitest+runner@2.1.8/node_modules/@vitest/runner/dist/index.js:533:5\n    at runTest (file:///Users/ChukwukaUba/Desktop/middle-earth-agents/express-ts/node_modules/.pnpm/@vitest+runner@2.1.8/node_modules/@vitest/runner/dist/index.js:1056:11)\n    at runSuite (file:///Users/ChukwukaUba/Desktop/middle-earth-agents/express-ts/node_modules/.pnpm/@vitest+runner@2.1.8/node_modules/@vitest/runner/dist/index.js:1205:15)\n    at runSuite (file:///Users/ChukwukaUba/Desktop/middle-earth-agents/express-ts/node_modules/.pnpm/@vitest+runner@2.1.8/node_modules/@vitest/runner/dist/index.js:1205:15)\n    at runSuite (file:///Users/ChukwukaUba/Desktop/middle-earth-agents/express-ts/node_modules/.pnpm/@vitest+runner@2.1.8/node_modules/@vitest/runner/dist/index.js:1205:15)\n    at runFiles (file:///Users/ChukwukaUba/Desktop/middle-earth-agents/express-ts/node_modules/.pnpm/@vitest+runner@2.1.8/node_modules/@vitest/runner/dist/index.js:1262:5)","timestamp":"2025-01-24T06:01:57.366Z"}
{"level":"error","message":"Critical error retrieving keypair for agent test-agent-id Failed to generate keypair: TypeError: __vite_ssr_import_3__.prisma.$transaction is not a function","name":"KeyManagementError","service":"middle-earth-agents","stack":"KeyManagementError: Failed to generate keypair: TypeError: __vite_ssr_import_3__.prisma.$transaction is not a function\n    at KeyManager.generateKeypair (/Users/ChukwukaUba/Desktop/middle-earth-agents/express-ts/src/deps/keyManager.ts:204:13)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at KeyManager.getKeypair (/Users/ChukwukaUba/Desktop/middle-earth-agents/express-ts/src/deps/keyManager.ts:127:27)\n    at /Users/ChukwukaUba/Desktop/middle-earth-agents/express-ts/src/deps/__tests__/keyManager.test.ts:72:22\n    at file:///Users/ChukwukaUba/Desktop/middle-earth-agents/express-ts/node_modules/.pnpm/@vitest+runner@2.1.8/node_modules/@vitest/runner/dist/index.js:533:5\n    at runTest (file:///Users/ChukwukaUba/Desktop/middle-earth-agents/express-ts/node_modules/.pnpm/@vitest+runner@2.1.8/node_modules/@vitest/runner/dist/index.js:1056:11)\n    at runSuite (file:///Users/ChukwukaUba/Desktop/middle-earth-agents/express-ts/node_modules/.pnpm/@vitest+runner@2.1.8/node_modules/@vitest/runner/dist/index.js:1205:15)\n    at runSuite (file:///Users/ChukwukaUba/Desktop/middle-earth-agents/express-ts/node_modules/.pnpm/@vitest+runner@2.1.8/node_modules/@vitest/runner/dist/index.js:1205:15)\n    at runSuite (file:///Users/ChukwukaUba/Desktop/middle-earth-agents/express-ts/node_modules/.pnpm/@vitest+runner@2.1.8/node_modules/@vitest/runner/dist/index.js:1205:15)\n    at runFiles (file:///Users/ChukwukaUba/Desktop/middle-earth-agents/express-ts/node_modules/.pnpm/@vitest+runner@2.1.8/node_modules/@vitest/runner/dist/index.js:1262:5)","timestamp":"2025-01-24T06:01:57.367Z"}
{"level":"error","message":"Critical error retrieving keypair for agent test-agent-id Unsupported state or unable to authenticate data","service":"middle-earth-agents","stack":"Error: Unsupported state or unable to authenticate data\n    at Decipheriv.final (node:internal/crypto/cipher:184:29)\n    at KeyManager.decryptPrivateKey (/Users/ChukwukaUba/Desktop/middle-earth-agents/express-ts/src/deps/keyManager.ts:298:64)\n    at KeyManager.getKeypair (/Users/ChukwukaUba/Desktop/middle-earth-agents/express-ts/src/deps/keyManager.ts:114:38)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at /Users/ChukwukaUba/Desktop/middle-earth-agents/express-ts/src/deps/__tests__/keyManager.test.ts:87:22\n    at file:///Users/ChukwukaUba/Desktop/middle-earth-agents/express-ts/node_modules/.pnpm/@vitest+runner@2.1.8/node_modules/@vitest/runner/dist/index.js:533:5\n    at runTest (file:///Users/ChukwukaUba/Desktop/middle-earth-agents/express-ts/node_modules/.pnpm/@vitest+runner@2.1.8/node_modules/@vitest/runner/dist/index.js:1056:11)\n    at runSuite (file:///Users/ChukwukaUba/Desktop/middle-earth-agents/express-ts/node_modules/.pnpm/@vitest+runner@2.1.8/node_modules/@vitest/runner/dist/index.js:1205:15)\n    at runSuite (file:///Users/ChukwukaUba/Desktop/middle-earth-agents/express-ts/node_modules/.pnpm/@vitest+runner@2.1.8/node_modules/@vitest/runner/dist/index.js:1205:15)\n    at runSuite (file:///Users/ChukwukaUba/Desktop/middle-earth-agents/express-ts/node_modules/.pnpm/@vitest+runner@2.1.8/node_modules/@vitest/runner/dist/index.js:1205:15)","timestamp":"2025-01-24T06:01:57.429Z"}
{"level":"error","message":"Critical error retrieving keypair for agent test-agent-id Database error","service":"middle-earth-agents","stack":"Error: Database error\n    at /Users/ChukwukaUba/Desktop/middle-earth-agents/express-ts/src/deps/__tests__/keyManager.test.ts:97:9\n    at file:///Users/ChukwukaUba/Desktop/middle-earth-agents/express-ts/node_modules/.pnpm/@vitest+runner@2.1.8/node_modules/@vitest/runner/dist/index.js:146:14\n    at file:///Users/ChukwukaUba/Desktop/middle-earth-agents/express-ts/node_modules/.pnpm/@vitest+runner@2.1.8/node_modules/@vitest/runner/dist/index.js:533:11\n    at runWithTimeout (file:///Users/ChukwukaUba/Desktop/middle-earth-agents/express-ts/node_modules/.pnpm/@vitest+runner@2.1.8/node_modules/@vitest/runner/dist/index.js:39:7)\n    at runTest (file:///Users/ChukwukaUba/Desktop/middle-earth-agents/express-ts/node_modules/.pnpm/@vitest+runner@2.1.8/node_modules/@vitest/runner/dist/index.js:1056:17)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at runSuite (file:///Users/ChukwukaUba/Desktop/middle-earth-agents/express-ts/node_modules/.pnpm/@vitest+runner@2.1.8/node_modules/@vitest/runner/dist/index.js:1205:15)\n    at runSuite (file:///Users/ChukwukaUba/Desktop/middle-earth-agents/express-ts/node_modules/.pnpm/@vitest+runner@2.1.8/node_modules/@vitest/runner/dist/index.js:1205:15)\n    at runSuite (file:///Users/ChukwukaUba/Desktop/middle-earth-agents/express-ts/node_modules/.pnpm/@vitest+runner@2.1.8/node_modules/@vitest/runner/dist/index.js:1205:15)\n    at runFiles (file:///Users/ChukwukaUba/Desktop/middle-earth-agents/express-ts/node_modules/.pnpm/@vitest+runner@2.1.8/node_modules/@vitest/runner/dist/index.js:1262:5)","timestamp":"2025-01-24T06:01:57.431Z"}
{"level":"error","message":"Keypair generation failed for agent test-agent-id __vite_ssr_import_3__.prisma.$transaction is not a function","service":"middle-earth-agents","stack":"TypeError: __vite_ssr_import_3__.prisma.$transaction is not a function\n    at KeyManager.generateKeypair (/Users/ChukwukaUba/Desktop/middle-earth-agents/express-ts/src/deps/keyManager.ts:173:20)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at KeyManager.rotateKeypair (/Users/ChukwukaUba/Desktop/middle-earth-agents/express-ts/src/deps/keyManager.ts:214:27)\n    at /Users/ChukwukaUba/Desktop/middle-earth-agents/express-ts/src/deps/__tests__/keyManager.test.ts:113:7\n    at file:///Users/ChukwukaUba/Desktop/middle-earth-agents/express-ts/node_modules/.pnpm/@vitest+runner@2.1.8/node_modules/@vitest/runner/dist/index.js:533:5\n    at runTest (file:///Users/ChukwukaUba/Desktop/middle-earth-agents/express-ts/node_modules/.pnpm/@vitest+runner@2.1.8/node_modules/@vitest/runner/dist/index.js:1056:11)\n    at runSuite (file:///Users/ChukwukaUba/Desktop/middle-earth-agents/express-ts/node_modules/.pnpm/@vitest+runner@2.1.8/node_modules/@vitest/runner/dist/index.js:1205:15)\n    at runSuite (file:///Users/ChukwukaUba/Desktop/middle-earth-agents/express-ts/node_modules/.pnpm/@vitest+runner@2.1.8/node_modules/@vitest/runner/dist/index.js:1205:15)\n    at runSuite (file:///Users/ChukwukaUba/Desktop/middle-earth-agents/express-ts/node_modules/.pnpm/@vitest+runner@2.1.8/node_modules/@vitest/runner/dist/index.js:1205:15)\n    at runFiles (file:///Users/ChukwukaUba/Desktop/middle-earth-agents/express-ts/node_modules/.pnpm/@vitest+runner@2.1.8/node_modules/@vitest/runner/dist/index.js:1262:5)","timestamp":"2025-01-24T06:01:57.493Z"}
{"level":"error","message":"Keypair rotation failed for agent test-agent-id Failed to generate keypair: TypeError: __vite_ssr_import_3__.prisma.$transaction is not a function","name":"KeyManagementError","service":"middle-earth-agents","stack":"KeyManagementError: Failed to generate keypair: TypeError: __vite_ssr_import_3__.prisma.$transaction is not a function\n    at KeyManager.generateKeypair (/Users/ChukwukaUba/Desktop/middle-earth-agents/express-ts/src/deps/keyManager.ts:204:13)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at KeyManager.rotateKeypair (/Users/ChukwukaUba/Desktop/middle-earth-agents/express-ts/src/deps/keyManager.ts:214:27)\n    at /Users/ChukwukaUba/Desktop/middle-earth-agents/express-ts/src/deps/__tests__/keyManager.test.ts:113:7\n    at file:///Users/ChukwukaUba/Desktop/middle-earth-agents/express-ts/node_modules/.pnpm/@vitest+runner@2.1.8/node_modules/@vitest/runner/dist/index.js:533:5\n    at runTest (file:///Users/ChukwukaUba/Desktop/middle-earth-agents/express-ts/node_modules/.pnpm/@vitest+runner@2.1.8/node_modules/@vitest/runner/dist/index.js:1056:11)\n    at runSuite (file:///Users/ChukwukaUba/Desktop/middle-earth-agents/express-ts/node_modules/.pnpm/@vitest+runner@2.1.8/node_modules/@vitest/runner/dist/index.js:1205:15)\n    at runSuite (file:///Users/ChukwukaUba/Desktop/middle-earth-agents/express-ts/node_modules/.pnpm/@vitest+runner@2.1.8/node_modules/@vitest/runner/dist/index.js:1205:15)\n    at runSuite (file:///Users/ChukwukaUba/Desktop/middle-earth-agents/express-ts/node_modules/.pnpm/@vitest+runner@2.1.8/node_modules/@vitest/runner/dist/index.js:1205:15)\n    at runFiles (file:///Users/ChukwukaUba/Desktop/middle-earth-agents/express-ts/node_modules/.pnpm/@vitest+runner@2.1.8/node_modules/@vitest/runner/dist/index.js:1262:5)","timestamp":"2025-01-24T06:01:57.493Z"}
{"level":"error","message":"Keypair rotation failed for agent test-agent-id Keypair rotation cooldown not elapsed","name":"KeyManagementError","service":"middle-earth-agents","stack":"KeyManagementError: Keypair rotation cooldown not elapsed\n    at KeyManager.enforceRotationCooldown (/Users/ChukwukaUba/Desktop/middle-earth-agents/express-ts/src/deps/keyManager.ts:235:15)\n    at KeyManager.rotateKeypair (/Users/ChukwukaUba/Desktop/middle-earth-agents/express-ts/src/deps/keyManager.ts:212:12)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at /Users/ChukwukaUba/Desktop/middle-earth-agents/express-ts/src/deps/__tests__/keyManager.test.ts:124:7\n    at file:///Users/ChukwukaUba/Desktop/middle-earth-agents/express-ts/node_modules/.pnpm/@vitest+runner@2.1.8/node_modules/@vitest/runner/dist/index.js:533:5\n    at runTest (file:///Users/ChukwukaUba/Desktop/middle-earth-agents/express-ts/node_modules/.pnpm/@vitest+runner@2.1.8/node_modules/@vitest/runner/dist/index.js:1056:11)\n    at runSuite (file:///Users/ChukwukaUba/Desktop/middle-earth-agents/express-ts/node_modules/.pnpm/@vitest+runner@2.1.8/node_modules/@vitest/runner/dist/index.js:1205:15)\n    at runSuite (file:///Users/ChukwukaUba/Desktop/middle-earth-agents/express-ts/node_modules/.pnpm/@vitest+runner@2.1.8/node_modules/@vitest/runner/dist/index.js:1205:15)\n    at runSuite (file:///Users/ChukwukaUba/Desktop/middle-earth-agents/express-ts/node_modules/.pnpm/@vitest+runner@2.1.8/node_modules/@vitest/runner/dist/index.js:1205:15)\n    at runFiles (file:///Users/ChukwukaUba/Desktop/middle-earth-agents/express-ts/node_modules/.pnpm/@vitest+runner@2.1.8/node_modules/@vitest/runner/dist/index.js:1262:5)","timestamp":"2025-01-24T06:01:57.496Z"}
{"level":"error","message":"Failed to retrieve public key for test-agent-id No keypair found for agent test-agent-id","name":"KeyManagementError","service":"middle-earth-agents","stack":"KeyManagementError: No keypair found for agent test-agent-id\n    at KeyManager.getPublicKey (/Users/ChukwukaUba/Desktop/middle-earth-agents/express-ts/src/deps/keyManager.ts:325:15)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)","timestamp":"2025-01-24T06:01:57.497Z"}
{"level":"error","message":"Encrypted private key retrieval failed for test-agent-id No keypair found for agent test-agent-id","name":"KeyManagementError","service":"middle-earth-agents","stack":"KeyManagementError: No keypair found for agent test-agent-id\n    at KeyManager.getEncryptedPrivateKey (/Users/ChukwukaUba/Desktop/middle-earth-agents/express-ts/src/deps/keyManager.ts:344:15)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)","timestamp":"2025-01-24T06:01:57.499Z"}
