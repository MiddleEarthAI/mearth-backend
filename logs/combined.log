{"level":"error","message":"Agent purrlockpawsai has no password or username set","service":"middle-earth-agents","timestamp":"2025-01-23T22:02:24.541Z"}
{"level":"error","message":"Agent purrlockpawsai PURRLOCKPAWSAI_PASSWORD PURRLOCKPAWSAI_USERNAME PURRLOCKPAWSAI_EMAIL password or username is not set","service":"middle-earth-agents","timestamp":"2025-01-23T22:04:29.189Z"}
{"level":"info","message":"Twitter service initialized","service":"middle-earth-agents","timestamp":"2025-01-23T22:10:11.169Z"}
{"level":"info","message":"KeyManager service initialized","service":"middle-earth-agents","timestamp":"2025-01-23T22:10:11.173Z"}
{"level":"info","message":"âš¡ï¸[server]: Server is running at http://localhost:3000","service":"middle-earth-agents","timestamp":"2025-01-23T22:10:11.233Z"}
{"level":"info","message":"Shutting down gracefully...","service":"middle-earth-agents","timestamp":"2025-01-23T22:10:15.828Z"}
{"level":"info","message":"Twitter service initialized","service":"middle-earth-agents","timestamp":"2025-01-23T22:14:01.370Z"}
{"level":"info","message":"KeyManager service initialized","service":"middle-earth-agents","timestamp":"2025-01-23T22:14:01.374Z"}
{"level":"info","message":"âš¡ï¸[server]: Server is running at http://localhost:3000","service":"middle-earth-agents","timestamp":"2025-01-23T22:14:01.427Z"}
{"level":"info","message":"Shutting down gracefully...","service":"middle-earth-agents","timestamp":"2025-01-23T22:20:09.104Z"}
{"level":"info","message":"Shutting down gracefully...","service":"middle-earth-agents","timestamp":"2025-01-23T22:21:57.936Z"}
{"level":"info","message":"KeyManager service initialized","service":"middle-earth-agents","timestamp":"2025-01-23T22:22:07.669Z"}
{"level":"info","message":"âš¡ï¸[server]: Server is running at http://localhost:3000","service":"middle-earth-agents","timestamp":"2025-01-23T22:22:07.674Z"}
{"level":"info","message":"Shutting down gracefully...","service":"middle-earth-agents","timestamp":"2025-01-23T22:23:02.421Z"}
{"level":"info","message":"KeyManager service initialized","service":"middle-earth-agents","timestamp":"2025-01-23T22:24:36.158Z"}
{"level":"info","message":"âš¡ï¸[server]: Server is running at http://localhost:3000","service":"middle-earth-agents","timestamp":"2025-01-23T22:24:36.166Z"}
{"level":"info","message":"just finished steps","service":"middle-earth-agents","timestamp":"2025-01-23T22:24:38.808Z"}
{"level":"info","message":"just finished steps","service":"middle-earth-agents","timestamp":"2025-01-23T22:24:41.071Z"}
{"level":"info","message":"just finished steps","service":"middle-earth-agents","timestamp":"2025-01-23T22:24:42.704Z"}
{"level":"info","message":"just finished steps","service":"middle-earth-agents","timestamp":"2025-01-23T22:24:43.864Z"}
{"level":"info","message":"just finished steps","service":"middle-earth-agents","timestamp":"2025-01-23T22:24:45.878Z"}
{"level":"info","message":"Shutting down gracefully...","service":"middle-earth-agents","timestamp":"2025-01-23T22:24:46.229Z"}
{"level":"info","message":"KeyManager service initialized","service":"middle-earth-agents","timestamp":"2025-01-23T22:29:15.876Z"}
{"level":"info","message":"âš¡ï¸[server]: Server is running at http://localhost:3000","service":"middle-earth-agents","timestamp":"2025-01-23T22:29:15.884Z"}
{"level":"info","message":"just finished scanning terrain","service":"middle-earth-agents","timestamp":"2025-01-23T22:29:18.893Z"}
{"level":"info","message":"just finished steps","service":"middle-earth-agents","timestamp":"2025-01-23T22:29:18.894Z"}
{"level":"info","message":"just finished predicting encounters","service":"middle-earth-agents","timestamp":"2025-01-23T22:29:20.435Z"}
{"level":"info","message":"just finished steps","service":"middle-earth-agents","timestamp":"2025-01-23T22:29:20.435Z"}
{"level":"info","message":"Shutting down gracefully...","service":"middle-earth-agents","timestamp":"2025-01-23T22:29:21.963Z"}
{"level":"info","message":"KeyManager service initialized","service":"middle-earth-agents","timestamp":"2025-01-23T23:09:12.120Z"}
{"level":"info","message":"âš¡ï¸[server]: Server is running at http://localhost:3000","service":"middle-earth-agents","timestamp":"2025-01-23T23:09:12.128Z"}
{"level":"info","message":"KeyManager service initialized","service":"middle-earth-agents","timestamp":"2025-01-23T23:09:29.165Z"}
{"level":"info","message":"âš¡ï¸[server]: Server is running at http://localhost:3000","service":"middle-earth-agents","timestamp":"2025-01-23T23:09:29.171Z"}
{"level":"info","message":"KeyManager service initialized","service":"middle-earth-agents","timestamp":"2025-01-23T23:12:57.217Z"}
{"level":"info","message":"âš¡ï¸[server]: Server is running at http://localhost:3000","service":"middle-earth-agents","timestamp":"2025-01-23T23:12:57.228Z"}
{"level":"info","message":"KeyManager service initialized","service":"middle-earth-agents","timestamp":"2025-01-23T23:14:32.313Z"}
{"level":"info","message":"âš¡ï¸[server]: Server is running at http://localhost:3000","service":"middle-earth-agents","timestamp":"2025-01-23T23:14:32.324Z"}
{"level":"info","message":"just finished scanning terrain","service":"middle-earth-agents","timestamp":"2025-01-23T23:14:37.292Z"}
{"level":"info","message":"just finished steps","service":"middle-earth-agents","timestamp":"2025-01-23T23:14:37.293Z"}
{"level":"info","message":"just finished predicting encounters","service":"middle-earth-agents","timestamp":"2025-01-23T23:14:39.038Z"}
{"level":"info","message":"just finished steps","service":"middle-earth-agents","timestamp":"2025-01-23T23:14:39.039Z"}
{"level":"info","message":"just finished analyzing tokenomics","service":"middle-earth-agents","timestamp":"2025-01-23T23:14:41.221Z"}
{"level":"info","message":"just finished steps","service":"middle-earth-agents","timestamp":"2025-01-23T23:14:41.221Z"}
{"level":"info","message":"just finished moving","service":"middle-earth-agents","timestamp":"2025-01-23T23:14:42.827Z"}
{"level":"info","message":"just finished steps","service":"middle-earth-agents","timestamp":"2025-01-23T23:14:42.828Z"}
{"level":"info","message":"just finished reporting","service":"middle-earth-agents","timestamp":"2025-01-23T23:14:44.036Z"}
{"level":"info","message":"just finished steps","service":"middle-earth-agents","timestamp":"2025-01-23T23:14:44.036Z"}
{"level":"info","message":"just finished scanning terrain","service":"middle-earth-agents","timestamp":"2025-01-23T23:14:47.471Z"}
{"level":"info","message":"just finished steps","service":"middle-earth-agents","timestamp":"2025-01-23T23:14:47.471Z"}
{"level":"info","message":"just finished predicting encounters","service":"middle-earth-agents","timestamp":"2025-01-23T23:14:49.195Z"}
{"level":"info","message":"just finished steps","service":"middle-earth-agents","timestamp":"2025-01-23T23:14:49.195Z"}
{"level":"info","message":"just finished analyzing tokenomics","service":"middle-earth-agents","timestamp":"2025-01-23T23:14:50.816Z"}
{"level":"info","message":"just finished steps","service":"middle-earth-agents","timestamp":"2025-01-23T23:14:50.816Z"}
{"level":"info","message":"just finished moving","service":"middle-earth-agents","timestamp":"2025-01-23T23:14:52.437Z"}
{"level":"info","message":"just finished steps","service":"middle-earth-agents","timestamp":"2025-01-23T23:14:52.437Z"}
{"level":"info","message":"just finished reporting","service":"middle-earth-agents","timestamp":"2025-01-23T23:14:53.666Z"}
{"level":"info","message":"just finished steps","service":"middle-earth-agents","timestamp":"2025-01-23T23:14:53.666Z"}
{"level":"info","message":"just finished scanning terrain","service":"middle-earth-agents","timestamp":"2025-01-23T23:14:57.899Z"}
{"level":"info","message":"just finished steps","service":"middle-earth-agents","timestamp":"2025-01-23T23:14:57.899Z"}
{"level":"info","message":"just finished predicting encounters","service":"middle-earth-agents","timestamp":"2025-01-23T23:14:59.751Z"}
{"level":"info","message":"just finished steps","service":"middle-earth-agents","timestamp":"2025-01-23T23:14:59.751Z"}
{"level":"info","message":"just finished analyzing tokenomics","service":"middle-earth-agents","timestamp":"2025-01-23T23:15:01.401Z"}
{"level":"info","message":"just finished steps","service":"middle-earth-agents","timestamp":"2025-01-23T23:15:01.401Z"}
{"level":"info","message":"Shutting down gracefully...","service":"middle-earth-agents","timestamp":"2025-01-23T23:15:02.481Z"}
{"level":"info","message":"KeyManager service initialized","service":"middle-earth-agents","timestamp":"2025-01-23T23:16:23.036Z"}
{"level":"info","message":"âš¡ï¸[server]: Server is running at http://localhost:3000","service":"middle-earth-agents","timestamp":"2025-01-23T23:16:23.061Z"}
{"level":"info","message":"just finished scanning terrain","service":"middle-earth-agents","timestamp":"2025-01-23T23:16:28.589Z"}
{"level":"info","message":"just finished steps","service":"middle-earth-agents","timestamp":"2025-01-23T23:16:28.590Z"}
{"level":"info","message":"Shutting down gracefully...","service":"middle-earth-agents","timestamp":"2025-01-23T23:16:30.081Z"}
{"clientVersion":"6.2.1","level":"error","message":"Failed to start server: \nInvalid `prisma2.agent.findMany()` invocation in\n/Users/ChukwukaUba/Desktop/middle-earth-agents/express-ts/dist/index.js:2529:38\n\n  2526   return new Agent(agentConfig, agentId);\n  2527 }\n  2528 var startAgents = async () => {\nâ†’ 2529   const agents = await prisma2.agent.findMany(\nCan't reach database server at `ep-summer-credit-a8phz689.eastus2.azure.neon.tech:5432`\n\nPlease make sure your database server is running at `ep-summer-credit-a8phz689.eastus2.azure.neon.tech:5432`.","name":"PrismaClientInitializationError","service":"middle-earth-agents","stack":"PrismaClientInitializationError: \nInvalid `prisma2.agent.findMany()` invocation in\n/Users/ChukwukaUba/Desktop/middle-earth-agents/express-ts/dist/index.js:2529:38\n\n  2526   return new Agent(agentConfig, agentId);\n  2527 }\n  2528 var startAgents = async () => {\nâ†’ 2529   const agents = await prisma2.agent.findMany(\nCan't reach database server at `ep-summer-credit-a8phz689.eastus2.azure.neon.tech:5432`\n\nPlease make sure your database server is running at `ep-summer-credit-a8phz689.eastus2.azure.neon.tech:5432`.\n    at Vn.handleRequestError (/Users/ChukwukaUba/Desktop/middle-earth-agents/express-ts/node_modules/.pnpm/@prisma+client@6.2.1_prisma@6.2.1/node_modules/@prisma/client/runtime/library.js:121:7640)\n    at Vn.handleAndLogRequestError (/Users/ChukwukaUba/Desktop/middle-earth-agents/express-ts/node_modules/.pnpm/@prisma+client@6.2.1_prisma@6.2.1/node_modules/@prisma/client/runtime/library.js:121:6663)\n    at Vn.request (/Users/ChukwukaUba/Desktop/middle-earth-agents/express-ts/node_modules/.pnpm/@prisma+client@6.2.1_prisma@6.2.1/node_modules/@prisma/client/runtime/library.js:121:6370)\n    at async l (/Users/ChukwukaUba/Desktop/middle-earth-agents/express-ts/node_modules/.pnpm/@prisma+client@6.2.1_prisma@6.2.1/node_modules/@prisma/client/runtime/library.js:130:9617)\n    at async startAgents (/Users/ChukwukaUba/Desktop/middle-earth-agents/express-ts/dist/index.js:2529:18)\n    at async startServer (/Users/ChukwukaUba/Desktop/middle-earth-agents/express-ts/dist/index.js:2577:27)","timestamp":"2025-01-23T23:22:32.799Z"}
{"level":"info","message":"KeyManager service initialized","service":"middle-earth-agents","timestamp":"2025-01-23T23:23:34.740Z"}
{"level":"info","message":"âš¡ï¸[server]: Server is running at http://localhost:3000","service":"middle-earth-agents","timestamp":"2025-01-23T23:23:34.748Z"}
{"level":"info","message":"just finished scanning terrain","service":"middle-earth-agents","timestamp":"2025-01-23T23:23:38.870Z"}
{"level":"info","message":"just finished steps","service":"middle-earth-agents","timestamp":"2025-01-23T23:23:38.871Z"}
{"level":"info","message":"just finished predicting encounters","service":"middle-earth-agents","timestamp":"2025-01-23T23:23:40.734Z"}
{"level":"info","message":"just finished steps","service":"middle-earth-agents","timestamp":"2025-01-23T23:23:40.734Z"}
{"level":"info","message":"just finished analyzing tokenomics","service":"middle-earth-agents","timestamp":"2025-01-23T23:23:42.833Z"}
{"level":"info","message":"just finished steps","service":"middle-earth-agents","timestamp":"2025-01-23T23:23:42.834Z"}
{"level":"info","message":"just finished moving","service":"middle-earth-agents","timestamp":"2025-01-23T23:23:44.650Z"}
{"level":"info","message":"just finished steps","service":"middle-earth-agents","timestamp":"2025-01-23T23:23:44.651Z"}
{"level":"info","message":"just finished tweetingğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥:","service":"middle-earth-agents","timestamp":"2025-01-23T23:23:47.882Z"}
{"level":"info","message":"just finished steps","service":"middle-earth-agents","timestamp":"2025-01-23T23:23:47.882Z"}
{"level":"info","message":"just finished scanning terrain","service":"middle-earth-agents","timestamp":"2025-01-23T23:23:51.366Z"}
{"level":"info","message":"just finished steps","service":"middle-earth-agents","timestamp":"2025-01-23T23:23:51.366Z"}
{"level":"info","message":"Shutting down gracefully...","service":"middle-earth-agents","timestamp":"2025-01-23T23:23:52.824Z"}
{"level":"info","message":"KeyManager service initialized","service":"middle-earth-agents","timestamp":"2025-01-23T23:24:56.765Z"}
{"level":"info","message":"âš¡ï¸[server]: Server is running at http://localhost:3000","service":"middle-earth-agents","timestamp":"2025-01-23T23:24:56.784Z"}
{"level":"info","message":"just finished scanning terrain","service":"middle-earth-agents","timestamp":"2025-01-23T23:25:00.946Z"}
{"level":"info","message":"just finished steps","service":"middle-earth-agents","timestamp":"2025-01-23T23:25:00.947Z"}
{"level":"info","message":"just finished predicting encounters","service":"middle-earth-agents","timestamp":"2025-01-23T23:25:02.659Z"}
{"level":"info","message":"just finished steps","service":"middle-earth-agents","timestamp":"2025-01-23T23:25:02.660Z"}
{"level":"info","message":"just finished analyzing tokenomics","service":"middle-earth-agents","timestamp":"2025-01-23T23:25:04.675Z"}
{"level":"info","message":"just finished steps","service":"middle-earth-agents","timestamp":"2025-01-23T23:25:04.675Z"}
{"level":"info","message":"just finished moving","service":"middle-earth-agents","timestamp":"2025-01-23T23:25:06.583Z"}
{"level":"info","message":"just finished steps","service":"middle-earth-agents","timestamp":"2025-01-23T23:25:06.583Z"}
{"level":"info","message":"just finished tweetingğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥:","service":"middle-earth-agents","timestamp":"2025-01-23T23:25:09.733Z"}
{"level":"info","message":"just finished steps","service":"middle-earth-agents","timestamp":"2025-01-23T23:25:09.733Z"}
{"level":"info","message":"Shutting down gracefully...","service":"middle-earth-agents","timestamp":"2025-01-23T23:25:12.412Z"}
{"level":"info","message":"KeyManager service initialized","service":"middle-earth-agents","timestamp":"2025-01-23T23:26:11.523Z"}
{"level":"info","message":"âš¡ï¸[server]: Server is running at http://localhost:3000","service":"middle-earth-agents","timestamp":"2025-01-23T23:26:11.571Z"}
{"level":"info","message":"just finished scanning terrain","service":"middle-earth-agents","timestamp":"2025-01-23T23:26:16.096Z"}
{"level":"info","message":"just finished steps","service":"middle-earth-agents","timestamp":"2025-01-23T23:26:16.099Z"}
{"level":"info","message":"Shutting down gracefully...","service":"middle-earth-agents","timestamp":"2025-01-23T23:26:16.455Z"}
{"level":"info","message":"KeyManager service initialized","service":"middle-earth-agents","timestamp":"2025-01-23T23:27:26.606Z"}
{"level":"info","message":"âš¡ï¸[server]: Server is running at http://localhost:3000","service":"middle-earth-agents","timestamp":"2025-01-23T23:27:26.619Z"}
{"level":"info","message":"just finished scanning terrain","service":"middle-earth-agents","timestamp":"2025-01-23T23:27:30.745Z"}
{"level":"info","message":"just finished steps","service":"middle-earth-agents","timestamp":"2025-01-23T23:27:30.746Z"}
{"level":"info","message":"just finished predicting encounters","service":"middle-earth-agents","timestamp":"2025-01-23T23:27:32.734Z"}
{"level":"info","message":"just finished steps","service":"middle-earth-agents","timestamp":"2025-01-23T23:27:32.737Z"}
{"level":"info","message":"just finished analyzing tokenomics","service":"middle-earth-agents","timestamp":"2025-01-23T23:27:34.551Z"}
{"level":"info","message":"just finished steps","service":"middle-earth-agents","timestamp":"2025-01-23T23:27:34.552Z"}
{"level":"info","message":"just finished moving","service":"middle-earth-agents","timestamp":"2025-01-23T23:27:36.174Z"}
{"level":"info","message":"just finished steps","service":"middle-earth-agents","timestamp":"2025-01-23T23:27:36.174Z"}
{"level":"info","message":"just finished tweetingğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥:","service":"middle-earth-agents","timestamp":"2025-01-23T23:27:39.549Z"}
{"level":"info","message":"just finished steps","service":"middle-earth-agents","timestamp":"2025-01-23T23:27:39.550Z"}
{"level":"info","message":"just finished scanning terrain","service":"middle-earth-agents","timestamp":"2025-01-23T23:27:42.664Z"}
{"level":"info","message":"just finished steps","service":"middle-earth-agents","timestamp":"2025-01-23T23:27:42.664Z"}
{"level":"info","message":"just finished predicting encounters","service":"middle-earth-agents","timestamp":"2025-01-23T23:27:44.410Z"}
{"level":"info","message":"just finished steps","service":"middle-earth-agents","timestamp":"2025-01-23T23:27:44.411Z"}
{"level":"info","message":"just finished analyzing tokenomics","service":"middle-earth-agents","timestamp":"2025-01-23T23:27:46.064Z"}
{"level":"info","message":"just finished steps","service":"middle-earth-agents","timestamp":"2025-01-23T23:27:46.064Z"}
{"level":"info","message":"just finished moving","service":"middle-earth-agents","timestamp":"2025-01-23T23:27:47.688Z"}
{"level":"info","message":"just finished steps","service":"middle-earth-agents","timestamp":"2025-01-23T23:27:47.688Z"}
{"level":"info","message":"just finished tweetingğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥:","service":"middle-earth-agents","timestamp":"2025-01-23T23:27:50.864Z"}
{"level":"info","message":"just finished steps","service":"middle-earth-agents","timestamp":"2025-01-23T23:27:50.864Z"}
{"level":"info","message":"just finished scanning terrain","service":"middle-earth-agents","timestamp":"2025-01-23T23:27:54.458Z"}
{"level":"info","message":"just finished steps","service":"middle-earth-agents","timestamp":"2025-01-23T23:27:54.459Z"}
{"level":"info","message":"just finished predicting encounters","service":"middle-earth-agents","timestamp":"2025-01-23T23:27:56.888Z"}
{"level":"info","message":"just finished steps","service":"middle-earth-agents","timestamp":"2025-01-23T23:27:56.888Z"}
{"level":"info","message":"just finished analyzing tokenomics","service":"middle-earth-agents","timestamp":"2025-01-23T23:27:58.552Z"}
{"level":"info","message":"just finished steps","service":"middle-earth-agents","timestamp":"2025-01-23T23:27:58.552Z"}
{"level":"info","message":"just finished moving","service":"middle-earth-agents","timestamp":"2025-01-23T23:28:00.363Z"}
{"level":"info","message":"just finished steps","service":"middle-earth-agents","timestamp":"2025-01-23T23:28:00.364Z"}
{"level":"info","message":"just finished tweetingğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥:","service":"middle-earth-agents","timestamp":"2025-01-23T23:28:03.365Z"}
{"level":"info","message":"just finished steps","service":"middle-earth-agents","timestamp":"2025-01-23T23:28:03.366Z"}
{"level":"info","message":"just finished scanning terrain","service":"middle-earth-agents","timestamp":"2025-01-23T23:28:06.275Z"}
{"level":"info","message":"just finished steps","service":"middle-earth-agents","timestamp":"2025-01-23T23:28:06.275Z"}
{"level":"info","message":"just finished predicting encounters","service":"middle-earth-agents","timestamp":"2025-01-23T23:28:07.928Z"}
{"level":"info","message":"just finished steps","service":"middle-earth-agents","timestamp":"2025-01-23T23:28:07.928Z"}
{"level":"info","message":"just finished analyzing tokenomics","service":"middle-earth-agents","timestamp":"2025-01-23T23:28:09.946Z"}
{"level":"info","message":"just finished steps","service":"middle-earth-agents","timestamp":"2025-01-23T23:28:09.946Z"}
{"level":"info","message":"just finished moving","service":"middle-earth-agents","timestamp":"2025-01-23T23:28:12.253Z"}
{"level":"info","message":"just finished steps","service":"middle-earth-agents","timestamp":"2025-01-23T23:28:12.253Z"}
{"level":"info","message":"just finished tweetingğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥:","service":"middle-earth-agents","timestamp":"2025-01-23T23:28:15.549Z"}
{"level":"info","message":"just finished steps","service":"middle-earth-agents","timestamp":"2025-01-23T23:28:15.549Z"}
{"level":"info","message":"just finished scanning terrain","service":"middle-earth-agents","timestamp":"2025-01-23T23:28:18.912Z"}
{"level":"info","message":"just finished steps","service":"middle-earth-agents","timestamp":"2025-01-23T23:28:18.913Z"}
{"level":"info","message":"just finished predicting encounters","service":"middle-earth-agents","timestamp":"2025-01-23T23:28:20.790Z"}
{"level":"info","message":"just finished steps","service":"middle-earth-agents","timestamp":"2025-01-23T23:28:20.790Z"}
{"level":"info","message":"just finished analyzing tokenomics","service":"middle-earth-agents","timestamp":"2025-01-23T23:28:22.346Z"}
{"level":"info","message":"just finished steps","service":"middle-earth-agents","timestamp":"2025-01-23T23:28:22.346Z"}
{"level":"info","message":"just finished moving","service":"middle-earth-agents","timestamp":"2025-01-23T23:28:24.132Z"}
{"level":"info","message":"just finished steps","service":"middle-earth-agents","timestamp":"2025-01-23T23:28:24.132Z"}
{"level":"info","message":"just finished tweetingğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥:","service":"middle-earth-agents","timestamp":"2025-01-23T23:28:26.998Z"}
{"level":"info","message":"just finished steps","service":"middle-earth-agents","timestamp":"2025-01-23T23:28:26.998Z"}
{"level":"info","message":"just finished scanning terrain","service":"middle-earth-agents","timestamp":"2025-01-23T23:28:30.022Z"}
{"level":"info","message":"just finished steps","service":"middle-earth-agents","timestamp":"2025-01-23T23:28:30.023Z"}
{"level":"info","message":"just finished predicting encounters","service":"middle-earth-agents","timestamp":"2025-01-23T23:28:31.757Z"}
{"level":"info","message":"just finished steps","service":"middle-earth-agents","timestamp":"2025-01-23T23:28:31.757Z"}
{"level":"info","message":"just finished analyzing tokenomics","service":"middle-earth-agents","timestamp":"2025-01-23T23:28:33.293Z"}
{"level":"info","message":"just finished steps","service":"middle-earth-agents","timestamp":"2025-01-23T23:28:33.293Z"}
{"level":"info","message":"just finished moving","service":"middle-earth-agents","timestamp":"2025-01-23T23:28:34.894Z"}
{"level":"info","message":"just finished steps","service":"middle-earth-agents","timestamp":"2025-01-23T23:28:34.894Z"}
{"level":"info","message":"just finished tweetingğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥:","service":"middle-earth-agents","timestamp":"2025-01-23T23:28:37.896Z"}
{"level":"info","message":"just finished steps","service":"middle-earth-agents","timestamp":"2025-01-23T23:28:37.897Z"}
{"level":"info","message":"just finished scanning terrain","service":"middle-earth-agents","timestamp":"2025-01-23T23:28:41.833Z"}
{"level":"info","message":"just finished steps","service":"middle-earth-agents","timestamp":"2025-01-23T23:28:41.855Z"}
{"level":"info","message":"just finished predicting encounters","service":"middle-earth-agents","timestamp":"2025-01-23T23:28:43.493Z"}
{"level":"info","message":"just finished steps","service":"middle-earth-agents","timestamp":"2025-01-23T23:28:43.493Z"}
{"level":"info","message":"just finished analyzing tokenomics","service":"middle-earth-agents","timestamp":"2025-01-23T23:28:45.434Z"}
{"level":"info","message":"just finished steps","service":"middle-earth-agents","timestamp":"2025-01-23T23:28:45.434Z"}
{"level":"info","message":"just finished moving","service":"middle-earth-agents","timestamp":"2025-01-23T23:28:47.864Z"}
{"level":"info","message":"just finished steps","service":"middle-earth-agents","timestamp":"2025-01-23T23:28:47.865Z"}
{"level":"info","message":"just finished tweetingğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥:","service":"middle-earth-agents","timestamp":"2025-01-23T23:28:51.169Z"}
{"level":"info","message":"just finished steps","service":"middle-earth-agents","timestamp":"2025-01-23T23:28:51.170Z"}
{"level":"info","message":"just finished scanning terrain","service":"middle-earth-agents","timestamp":"2025-01-23T23:28:54.974Z"}
{"level":"info","message":"just finished steps","service":"middle-earth-agents","timestamp":"2025-01-23T23:28:54.974Z"}
{"level":"info","message":"just finished predicting encounters","service":"middle-earth-agents","timestamp":"2025-01-23T23:28:58.145Z"}
{"level":"info","message":"just finished steps","service":"middle-earth-agents","timestamp":"2025-01-23T23:28:58.204Z"}
{"level":"info","message":"just finished analyzing tokenomics","service":"middle-earth-agents","timestamp":"2025-01-23T23:28:59.942Z"}
{"level":"info","message":"just finished steps","service":"middle-earth-agents","timestamp":"2025-01-23T23:28:59.942Z"}
{"level":"info","message":"just finished moving","service":"middle-earth-agents","timestamp":"2025-01-23T23:29:01.787Z"}
{"level":"info","message":"just finished steps","service":"middle-earth-agents","timestamp":"2025-01-23T23:29:01.788Z"}
{"level":"info","message":"just finished tweetingğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥:","service":"middle-earth-agents","timestamp":"2025-01-23T23:29:04.769Z"}
{"level":"info","message":"just finished steps","service":"middle-earth-agents","timestamp":"2025-01-23T23:29:04.770Z"}
{"level":"info","message":"just finished scanning terrain","service":"middle-earth-agents","timestamp":"2025-01-23T23:29:08.323Z"}
{"level":"info","message":"just finished steps","service":"middle-earth-agents","timestamp":"2025-01-23T23:29:08.324Z"}
{"level":"info","message":"just finished predicting encounters","service":"middle-earth-agents","timestamp":"2025-01-23T23:29:10.181Z"}
{"level":"info","message":"just finished steps","service":"middle-earth-agents","timestamp":"2025-01-23T23:29:10.181Z"}
{"level":"info","message":"just finished analyzing tokenomics","service":"middle-earth-agents","timestamp":"2025-01-23T23:29:11.722Z"}
{"level":"info","message":"just finished steps","service":"middle-earth-agents","timestamp":"2025-01-23T23:29:11.723Z"}
{"level":"info","message":"Shutting down gracefully...","service":"middle-earth-agents","timestamp":"2025-01-23T23:29:13.185Z"}
{"level":"info","message":"KeyManager service initialized","service":"middle-earth-agents","timestamp":"2025-01-24T05:10:41.368Z"}
{"level":"info","message":"âš¡ï¸[server]: Server is running at http://localhost:3000","service":"middle-earth-agents","timestamp":"2025-01-24T05:10:41.378Z"}
{"level":"info","message":"just finished steps","service":"middle-earth-agents","timestamp":"2025-01-24T05:10:45.108Z"}
{"level":"info","message":"Shutting down gracefully...","service":"middle-earth-agents","timestamp":"2025-01-24T05:10:49.113Z"}
{"level":"info","message":"KeyManager service initialized","service":"middle-earth-agents","timestamp":"2025-01-24T05:24:32.683Z"}
{"level":"info","message":"âš¡ï¸[server]: Server is running at http://localhost:3000","service":"middle-earth-agents","timestamp":"2025-01-24T05:24:32.694Z"}
{"level":"info","message":"just finished steps","service":"middle-earth-agents","timestamp":"2025-01-24T05:24:36.378Z"}
{"level":"error","message":"Failed to generate keypair for agent f23305f5-c2d2-4ae0-bf7e-4cce3d4dd752: Keypair encryption key is not set","service":"middle-earth-agents","stack":"Error: Keypair encryption key is not set\n    at KeyManager.encryptPrivateKey (/Users/ChukwukaUba/Desktop/middle-earth-agents/express-ts/dist/index.js:1581:13)\n    at KeyManager.generateKeypair (/Users/ChukwukaUba/Desktop/middle-earth-agents/express-ts/dist/index.js:1523:59)\n    at KeyManager.getKeypair (/Users/ChukwukaUba/Desktop/middle-earth-agents/express-ts/dist/index.js:1509:38)\n    at async Solana.processMovement (/Users/ChukwukaUba/Desktop/middle-earth-agents/express-ts/dist/index.js:1798:21)","timestamp":"2025-01-24T05:24:36.993Z"}
{"level":"info","message":"KeyManager service initialized","service":"middle-earth-agents","timestamp":"2025-01-24T05:29:08.423Z"}
{"level":"info","message":"âš¡ï¸[server]: Server is running at http://localhost:3000","service":"middle-earth-agents","timestamp":"2025-01-24T05:29:08.439Z"}
{"level":"info","message":"just finished steps","service":"middle-earth-agents","timestamp":"2025-01-24T05:29:12.191Z"}
{"code":"ERR_CRYPTO_INVALID_KEYLEN","level":"error","message":"Failed to generate keypair for agent f23305f5-c2d2-4ae0-bf7e-4cce3d4dd752: Invalid key length","service":"middle-earth-agents","stack":"RangeError: Invalid key length\n    at Cipheriv.createCipherBase (node:internal/crypto/cipher:121:19)\n    at Cipheriv.createCipherWithIV (node:internal/crypto/cipher:133:3)\n    at new Cipheriv (node:internal/crypto/cipher:234:3)\n    at createCipheriv (node:crypto:143:10)\n    at KeyManager.encryptPrivateKey (/Users/ChukwukaUba/Desktop/middle-earth-agents/express-ts/dist/index.js:1584:53)\n    at KeyManager.generateKeypair (/Users/ChukwukaUba/Desktop/middle-earth-agents/express-ts/dist/index.js:1523:59)\n    at KeyManager.getKeypair (/Users/ChukwukaUba/Desktop/middle-earth-agents/express-ts/dist/index.js:1509:38)\n    at async Solana.processMovement (/Users/ChukwukaUba/Desktop/middle-earth-agents/express-ts/dist/index.js:1798:21)","timestamp":"2025-01-24T05:29:12.717Z"}
{"level":"info","message":"KeyManager service initialized","service":"middle-earth-agents","timestamp":"2025-01-24T05:49:11.616Z"}
{"level":"info","message":"âš¡ï¸[server]: Server is running at http://localhost:3000","service":"middle-earth-agents","timestamp":"2025-01-24T05:49:11.623Z"}
{"level":"info","message":"just finished steps","service":"middle-earth-agents","timestamp":"2025-01-24T05:49:14.769Z"}
{"code":"ERR_CRYPTO_INVALID_KEYLEN","level":"error","message":"Failed to generate keypair for agent f23305f5-c2d2-4ae0-bf7e-4cce3d4dd752: Invalid key length","service":"middle-earth-agents","stack":"RangeError: Invalid key length\n    at Cipheriv.createCipherBase (node:internal/crypto/cipher:121:19)\n    at Cipheriv.createCipherWithIV (node:internal/crypto/cipher:133:3)\n    at new Cipheriv (node:internal/crypto/cipher:234:3)\n    at createCipheriv (node:crypto:143:10)\n    at KeyManager.encryptPrivateKey (/Users/ChukwukaUba/Desktop/middle-earth-agents/express-ts/dist/index.js:1592:53)\n    at KeyManager.generateKeypair (/Users/ChukwukaUba/Desktop/middle-earth-agents/express-ts/dist/index.js:1528:59)\n    at KeyManager.getKeypair (/Users/ChukwukaUba/Desktop/middle-earth-agents/express-ts/dist/index.js:1513:38)\n    at async Solana.processMovement (/Users/ChukwukaUba/Desktop/middle-earth-agents/express-ts/dist/index.js:1806:21)","timestamp":"2025-01-24T05:49:15.313Z"}
{"level":"info","message":"KeyManager service initialized with enhanced security","service":"middle-earth-agents","timestamp":"2025-01-24T06:01:57.293Z"}
{"level":"info","message":"KeyManager service initialized with enhanced security","service":"middle-earth-agents","timestamp":"2025-01-24T06:01:57.296Z"}
{"level":"info","message":"KeyManager service initialized with enhanced security","service":"middle-earth-agents","timestamp":"2025-01-24T06:01:57.297Z"}
{"level":"error","message":"Keypair generation failed for agent test-agent-id __vite_ssr_import_3__.prisma.$transaction is not a function","service":"middle-earth-agents","stack":"TypeError: __vite_ssr_import_3__.prisma.$transaction is not a function\n    at KeyManager.generateKeypair (/Users/ChukwukaUba/Desktop/middle-earth-agents/express-ts/src/deps/keyManager.ts:173:20)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at KeyManager.getKeypair (/Users/ChukwukaUba/Desktop/middle-earth-agents/express-ts/src/deps/keyManager.ts:127:27)\n    at /Users/ChukwukaUba/Desktop/middle-earth-agents/express-ts/src/deps/__tests__/keyManager.test.ts:72:22\n    at file:///Users/ChukwukaUba/Desktop/middle-earth-agents/express-ts/node_modules/.pnpm/@vitest+runner@2.1.8/node_modules/@vitest/runner/dist/index.js:533:5\n    at runTest (file:///Users/ChukwukaUba/Desktop/middle-earth-agents/express-ts/node_modules/.pnpm/@vitest+runner@2.1.8/node_modules/@vitest/runner/dist/index.js:1056:11)\n    at runSuite (file:///Users/ChukwukaUba/Desktop/middle-earth-agents/express-ts/node_modules/.pnpm/@vitest+runner@2.1.8/node_modules/@vitest/runner/dist/index.js:1205:15)\n    at runSuite (file:///Users/ChukwukaUba/Desktop/middle-earth-agents/express-ts/node_modules/.pnpm/@vitest+runner@2.1.8/node_modules/@vitest/runner/dist/index.js:1205:15)\n    at runSuite (file:///Users/ChukwukaUba/Desktop/middle-earth-agents/express-ts/node_modules/.pnpm/@vitest+runner@2.1.8/node_modules/@vitest/runner/dist/index.js:1205:15)\n    at runFiles (file:///Users/ChukwukaUba/Desktop/middle-earth-agents/express-ts/node_modules/.pnpm/@vitest+runner@2.1.8/node_modules/@vitest/runner/dist/index.js:1262:5)","timestamp":"2025-01-24T06:01:57.366Z"}
{"level":"error","message":"Critical error retrieving keypair for agent test-agent-id Failed to generate keypair: TypeError: __vite_ssr_import_3__.prisma.$transaction is not a function","name":"KeyManagementError","service":"middle-earth-agents","stack":"KeyManagementError: Failed to generate keypair: TypeError: __vite_ssr_import_3__.prisma.$transaction is not a function\n    at KeyManager.generateKeypair (/Users/ChukwukaUba/Desktop/middle-earth-agents/express-ts/src/deps/keyManager.ts:204:13)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at KeyManager.getKeypair (/Users/ChukwukaUba/Desktop/middle-earth-agents/express-ts/src/deps/keyManager.ts:127:27)\n    at /Users/ChukwukaUba/Desktop/middle-earth-agents/express-ts/src/deps/__tests__/keyManager.test.ts:72:22\n    at file:///Users/ChukwukaUba/Desktop/middle-earth-agents/express-ts/node_modules/.pnpm/@vitest+runner@2.1.8/node_modules/@vitest/runner/dist/index.js:533:5\n    at runTest (file:///Users/ChukwukaUba/Desktop/middle-earth-agents/express-ts/node_modules/.pnpm/@vitest+runner@2.1.8/node_modules/@vitest/runner/dist/index.js:1056:11)\n    at runSuite (file:///Users/ChukwukaUba/Desktop/middle-earth-agents/express-ts/node_modules/.pnpm/@vitest+runner@2.1.8/node_modules/@vitest/runner/dist/index.js:1205:15)\n    at runSuite (file:///Users/ChukwukaUba/Desktop/middle-earth-agents/express-ts/node_modules/.pnpm/@vitest+runner@2.1.8/node_modules/@vitest/runner/dist/index.js:1205:15)\n    at runSuite (file:///Users/ChukwukaUba/Desktop/middle-earth-agents/express-ts/node_modules/.pnpm/@vitest+runner@2.1.8/node_modules/@vitest/runner/dist/index.js:1205:15)\n    at runFiles (file:///Users/ChukwukaUba/Desktop/middle-earth-agents/express-ts/node_modules/.pnpm/@vitest+runner@2.1.8/node_modules/@vitest/runner/dist/index.js:1262:5)","timestamp":"2025-01-24T06:01:57.367Z"}
{"level":"info","message":"KeyManager service initialized with enhanced security","service":"middle-earth-agents","timestamp":"2025-01-24T06:01:57.368Z"}
{"level":"error","message":"Critical error retrieving keypair for agent test-agent-id Unsupported state or unable to authenticate data","service":"middle-earth-agents","stack":"Error: Unsupported state or unable to authenticate data\n    at Decipheriv.final (node:internal/crypto/cipher:184:29)\n    at KeyManager.decryptPrivateKey (/Users/ChukwukaUba/Desktop/middle-earth-agents/express-ts/src/deps/keyManager.ts:298:64)\n    at KeyManager.getKeypair (/Users/ChukwukaUba/Desktop/middle-earth-agents/express-ts/src/deps/keyManager.ts:114:38)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at /Users/ChukwukaUba/Desktop/middle-earth-agents/express-ts/src/deps/__tests__/keyManager.test.ts:87:22\n    at file:///Users/ChukwukaUba/Desktop/middle-earth-agents/express-ts/node_modules/.pnpm/@vitest+runner@2.1.8/node_modules/@vitest/runner/dist/index.js:533:5\n    at runTest (file:///Users/ChukwukaUba/Desktop/middle-earth-agents/express-ts/node_modules/.pnpm/@vitest+runner@2.1.8/node_modules/@vitest/runner/dist/index.js:1056:11)\n    at runSuite (file:///Users/ChukwukaUba/Desktop/middle-earth-agents/express-ts/node_modules/.pnpm/@vitest+runner@2.1.8/node_modules/@vitest/runner/dist/index.js:1205:15)\n    at runSuite (file:///Users/ChukwukaUba/Desktop/middle-earth-agents/express-ts/node_modules/.pnpm/@vitest+runner@2.1.8/node_modules/@vitest/runner/dist/index.js:1205:15)\n    at runSuite (file:///Users/ChukwukaUba/Desktop/middle-earth-agents/express-ts/node_modules/.pnpm/@vitest+runner@2.1.8/node_modules/@vitest/runner/dist/index.js:1205:15)","timestamp":"2025-01-24T06:01:57.429Z"}
{"level":"info","message":"KeyManager service initialized with enhanced security","service":"middle-earth-agents","timestamp":"2025-01-24T06:01:57.430Z"}
{"level":"error","message":"Critical error retrieving keypair for agent test-agent-id Database error","service":"middle-earth-agents","stack":"Error: Database error\n    at /Users/ChukwukaUba/Desktop/middle-earth-agents/express-ts/src/deps/__tests__/keyManager.test.ts:97:9\n    at file:///Users/ChukwukaUba/Desktop/middle-earth-agents/express-ts/node_modules/.pnpm/@vitest+runner@2.1.8/node_modules/@vitest/runner/dist/index.js:146:14\n    at file:///Users/ChukwukaUba/Desktop/middle-earth-agents/express-ts/node_modules/.pnpm/@vitest+runner@2.1.8/node_modules/@vitest/runner/dist/index.js:533:11\n    at runWithTimeout (file:///Users/ChukwukaUba/Desktop/middle-earth-agents/express-ts/node_modules/.pnpm/@vitest+runner@2.1.8/node_modules/@vitest/runner/dist/index.js:39:7)\n    at runTest (file:///Users/ChukwukaUba/Desktop/middle-earth-agents/express-ts/node_modules/.pnpm/@vitest+runner@2.1.8/node_modules/@vitest/runner/dist/index.js:1056:17)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at runSuite (file:///Users/ChukwukaUba/Desktop/middle-earth-agents/express-ts/node_modules/.pnpm/@vitest+runner@2.1.8/node_modules/@vitest/runner/dist/index.js:1205:15)\n    at runSuite (file:///Users/ChukwukaUba/Desktop/middle-earth-agents/express-ts/node_modules/.pnpm/@vitest+runner@2.1.8/node_modules/@vitest/runner/dist/index.js:1205:15)\n    at runSuite (file:///Users/ChukwukaUba/Desktop/middle-earth-agents/express-ts/node_modules/.pnpm/@vitest+runner@2.1.8/node_modules/@vitest/runner/dist/index.js:1205:15)\n    at runFiles (file:///Users/ChukwukaUba/Desktop/middle-earth-agents/express-ts/node_modules/.pnpm/@vitest+runner@2.1.8/node_modules/@vitest/runner/dist/index.js:1262:5)","timestamp":"2025-01-24T06:01:57.431Z"}
{"level":"info","message":"KeyManager service initialized with enhanced security","service":"middle-earth-agents","timestamp":"2025-01-24T06:01:57.432Z"}
{"level":"error","message":"Keypair generation failed for agent test-agent-id __vite_ssr_import_3__.prisma.$transaction is not a function","service":"middle-earth-agents","stack":"TypeError: __vite_ssr_import_3__.prisma.$transaction is not a function\n    at KeyManager.generateKeypair (/Users/ChukwukaUba/Desktop/middle-earth-agents/express-ts/src/deps/keyManager.ts:173:20)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at KeyManager.rotateKeypair (/Users/ChukwukaUba/Desktop/middle-earth-agents/express-ts/src/deps/keyManager.ts:214:27)\n    at /Users/ChukwukaUba/Desktop/middle-earth-agents/express-ts/src/deps/__tests__/keyManager.test.ts:113:7\n    at file:///Users/ChukwukaUba/Desktop/middle-earth-agents/express-ts/node_modules/.pnpm/@vitest+runner@2.1.8/node_modules/@vitest/runner/dist/index.js:533:5\n    at runTest (file:///Users/ChukwukaUba/Desktop/middle-earth-agents/express-ts/node_modules/.pnpm/@vitest+runner@2.1.8/node_modules/@vitest/runner/dist/index.js:1056:11)\n    at runSuite (file:///Users/ChukwukaUba/Desktop/middle-earth-agents/express-ts/node_modules/.pnpm/@vitest+runner@2.1.8/node_modules/@vitest/runner/dist/index.js:1205:15)\n    at runSuite (file:///Users/ChukwukaUba/Desktop/middle-earth-agents/express-ts/node_modules/.pnpm/@vitest+runner@2.1.8/node_modules/@vitest/runner/dist/index.js:1205:15)\n    at runSuite (file:///Users/ChukwukaUba/Desktop/middle-earth-agents/express-ts/node_modules/.pnpm/@vitest+runner@2.1.8/node_modules/@vitest/runner/dist/index.js:1205:15)\n    at runFiles (file:///Users/ChukwukaUba/Desktop/middle-earth-agents/express-ts/node_modules/.pnpm/@vitest+runner@2.1.8/node_modules/@vitest/runner/dist/index.js:1262:5)","timestamp":"2025-01-24T06:01:57.493Z"}
{"level":"error","message":"Keypair rotation failed for agent test-agent-id Failed to generate keypair: TypeError: __vite_ssr_import_3__.prisma.$transaction is not a function","name":"KeyManagementError","service":"middle-earth-agents","stack":"KeyManagementError: Failed to generate keypair: TypeError: __vite_ssr_import_3__.prisma.$transaction is not a function\n    at KeyManager.generateKeypair (/Users/ChukwukaUba/Desktop/middle-earth-agents/express-ts/src/deps/keyManager.ts:204:13)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at KeyManager.rotateKeypair (/Users/ChukwukaUba/Desktop/middle-earth-agents/express-ts/src/deps/keyManager.ts:214:27)\n    at /Users/ChukwukaUba/Desktop/middle-earth-agents/express-ts/src/deps/__tests__/keyManager.test.ts:113:7\n    at file:///Users/ChukwukaUba/Desktop/middle-earth-agents/express-ts/node_modules/.pnpm/@vitest+runner@2.1.8/node_modules/@vitest/runner/dist/index.js:533:5\n    at runTest (file:///Users/ChukwukaUba/Desktop/middle-earth-agents/express-ts/node_modules/.pnpm/@vitest+runner@2.1.8/node_modules/@vitest/runner/dist/index.js:1056:11)\n    at runSuite (file:///Users/ChukwukaUba/Desktop/middle-earth-agents/express-ts/node_modules/.pnpm/@vitest+runner@2.1.8/node_modules/@vitest/runner/dist/index.js:1205:15)\n    at runSuite (file:///Users/ChukwukaUba/Desktop/middle-earth-agents/express-ts/node_modules/.pnpm/@vitest+runner@2.1.8/node_modules/@vitest/runner/dist/index.js:1205:15)\n    at runSuite (file:///Users/ChukwukaUba/Desktop/middle-earth-agents/express-ts/node_modules/.pnpm/@vitest+runner@2.1.8/node_modules/@vitest/runner/dist/index.js:1205:15)\n    at runFiles (file:///Users/ChukwukaUba/Desktop/middle-earth-agents/express-ts/node_modules/.pnpm/@vitest+runner@2.1.8/node_modules/@vitest/runner/dist/index.js:1262:5)","timestamp":"2025-01-24T06:01:57.493Z"}
{"level":"info","message":"KeyManager service initialized with enhanced security","service":"middle-earth-agents","timestamp":"2025-01-24T06:01:57.495Z"}
{"level":"error","message":"Keypair rotation failed for agent test-agent-id Keypair rotation cooldown not elapsed","name":"KeyManagementError","service":"middle-earth-agents","stack":"KeyManagementError: Keypair rotation cooldown not elapsed\n    at KeyManager.enforceRotationCooldown (/Users/ChukwukaUba/Desktop/middle-earth-agents/express-ts/src/deps/keyManager.ts:235:15)\n    at KeyManager.rotateKeypair (/Users/ChukwukaUba/Desktop/middle-earth-agents/express-ts/src/deps/keyManager.ts:212:12)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at /Users/ChukwukaUba/Desktop/middle-earth-agents/express-ts/src/deps/__tests__/keyManager.test.ts:124:7\n    at file:///Users/ChukwukaUba/Desktop/middle-earth-agents/express-ts/node_modules/.pnpm/@vitest+runner@2.1.8/node_modules/@vitest/runner/dist/index.js:533:5\n    at runTest (file:///Users/ChukwukaUba/Desktop/middle-earth-agents/express-ts/node_modules/.pnpm/@vitest+runner@2.1.8/node_modules/@vitest/runner/dist/index.js:1056:11)\n    at runSuite (file:///Users/ChukwukaUba/Desktop/middle-earth-agents/express-ts/node_modules/.pnpm/@vitest+runner@2.1.8/node_modules/@vitest/runner/dist/index.js:1205:15)\n    at runSuite (file:///Users/ChukwukaUba/Desktop/middle-earth-agents/express-ts/node_modules/.pnpm/@vitest+runner@2.1.8/node_modules/@vitest/runner/dist/index.js:1205:15)\n    at runSuite (file:///Users/ChukwukaUba/Desktop/middle-earth-agents/express-ts/node_modules/.pnpm/@vitest+runner@2.1.8/node_modules/@vitest/runner/dist/index.js:1205:15)\n    at runFiles (file:///Users/ChukwukaUba/Desktop/middle-earth-agents/express-ts/node_modules/.pnpm/@vitest+runner@2.1.8/node_modules/@vitest/runner/dist/index.js:1262:5)","timestamp":"2025-01-24T06:01:57.496Z"}
{"level":"info","message":"KeyManager service initialized with enhanced security","service":"middle-earth-agents","timestamp":"2025-01-24T06:01:57.496Z"}
{"level":"info","message":"KeyManager service initialized with enhanced security","service":"middle-earth-agents","timestamp":"2025-01-24T06:01:57.497Z"}
{"level":"error","message":"Failed to retrieve public key for test-agent-id No keypair found for agent test-agent-id","name":"KeyManagementError","service":"middle-earth-agents","stack":"KeyManagementError: No keypair found for agent test-agent-id\n    at KeyManager.getPublicKey (/Users/ChukwukaUba/Desktop/middle-earth-agents/express-ts/src/deps/keyManager.ts:325:15)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)","timestamp":"2025-01-24T06:01:57.497Z"}
{"level":"info","message":"KeyManager service initialized with enhanced security","service":"middle-earth-agents","timestamp":"2025-01-24T06:01:57.497Z"}
{"level":"info","message":"KeyManager service initialized with enhanced security","service":"middle-earth-agents","timestamp":"2025-01-24T06:01:57.498Z"}
{"level":"error","message":"Encrypted private key retrieval failed for test-agent-id No keypair found for agent test-agent-id","name":"KeyManagementError","service":"middle-earth-agents","stack":"KeyManagementError: No keypair found for agent test-agent-id\n    at KeyManager.getEncryptedPrivateKey (/Users/ChukwukaUba/Desktop/middle-earth-agents/express-ts/src/deps/keyManager.ts:344:15)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)","timestamp":"2025-01-24T06:01:57.499Z"}
{"level":"info","message":"KeyManager service initialized with enhanced security","service":"middle-earth-agents","timestamp":"2025-01-24T06:04:18.830Z"}
{"level":"info","message":"KeyManager service initialized with enhanced security","service":"middle-earth-agents","timestamp":"2025-01-24T06:04:18.833Z"}
{"level":"info","message":"KeyManager service initialized with enhanced security","service":"middle-earth-agents","timestamp":"2025-01-24T06:04:18.834Z"}
{"level":"error","message":"Keypair generation failed for agent test-agent-id __vite_ssr_import_3__.prisma.$transaction is not a function","service":"middle-earth-agents","stack":"TypeError: __vite_ssr_import_3__.prisma.$transaction is not a function\n    at KeyManager.generateKeypair (/Users/ChukwukaUba/Desktop/middle-earth-agents/express-ts/src/deps/keyManager.ts:173:20)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at KeyManager.getKeypair (/Users/ChukwukaUba/Desktop/middle-earth-agents/express-ts/src/deps/keyManager.ts:127:27)\n    at /Users/ChukwukaUba/Desktop/middle-earth-agents/express-ts/src/deps/__tests__/keyManager.test.ts:72:22\n    at file:///Users/ChukwukaUba/Desktop/middle-earth-agents/express-ts/node_modules/.pnpm/@vitest+runner@2.1.8/node_modules/@vitest/runner/dist/index.js:533:5\n    at runTest (file:///Users/ChukwukaUba/Desktop/middle-earth-agents/express-ts/node_modules/.pnpm/@vitest+runner@2.1.8/node_modules/@vitest/runner/dist/index.js:1056:11)\n    at runSuite (file:///Users/ChukwukaUba/Desktop/middle-earth-agents/express-ts/node_modules/.pnpm/@vitest+runner@2.1.8/node_modules/@vitest/runner/dist/index.js:1205:15)\n    at runSuite (file:///Users/ChukwukaUba/Desktop/middle-earth-agents/express-ts/node_modules/.pnpm/@vitest+runner@2.1.8/node_modules/@vitest/runner/dist/index.js:1205:15)\n    at runSuite (file:///Users/ChukwukaUba/Desktop/middle-earth-agents/express-ts/node_modules/.pnpm/@vitest+runner@2.1.8/node_modules/@vitest/runner/dist/index.js:1205:15)\n    at runFiles (file:///Users/ChukwukaUba/Desktop/middle-earth-agents/express-ts/node_modules/.pnpm/@vitest+runner@2.1.8/node_modules/@vitest/runner/dist/index.js:1262:5)","timestamp":"2025-01-24T06:04:18.901Z"}
{"level":"error","message":"Critical error retrieving keypair for agent test-agent-id Failed to generate keypair: TypeError: __vite_ssr_import_3__.prisma.$transaction is not a function","name":"KeyManagementError","service":"middle-earth-agents","stack":"KeyManagementError: Failed to generate keypair: TypeError: __vite_ssr_import_3__.prisma.$transaction is not a function\n    at KeyManager.generateKeypair (/Users/ChukwukaUba/Desktop/middle-earth-agents/express-ts/src/deps/keyManager.ts:204:13)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at KeyManager.getKeypair (/Users/ChukwukaUba/Desktop/middle-earth-agents/express-ts/src/deps/keyManager.ts:127:27)\n    at /Users/ChukwukaUba/Desktop/middle-earth-agents/express-ts/src/deps/__tests__/keyManager.test.ts:72:22\n    at file:///Users/ChukwukaUba/Desktop/middle-earth-agents/express-ts/node_modules/.pnpm/@vitest+runner@2.1.8/node_modules/@vitest/runner/dist/index.js:533:5\n    at runTest (file:///Users/ChukwukaUba/Desktop/middle-earth-agents/express-ts/node_modules/.pnpm/@vitest+runner@2.1.8/node_modules/@vitest/runner/dist/index.js:1056:11)\n    at runSuite (file:///Users/ChukwukaUba/Desktop/middle-earth-agents/express-ts/node_modules/.pnpm/@vitest+runner@2.1.8/node_modules/@vitest/runner/dist/index.js:1205:15)\n    at runSuite (file:///Users/ChukwukaUba/Desktop/middle-earth-agents/express-ts/node_modules/.pnpm/@vitest+runner@2.1.8/node_modules/@vitest/runner/dist/index.js:1205:15)\n    at runSuite (file:///Users/ChukwukaUba/Desktop/middle-earth-agents/express-ts/node_modules/.pnpm/@vitest+runner@2.1.8/node_modules/@vitest/runner/dist/index.js:1205:15)\n    at runFiles (file:///Users/ChukwukaUba/Desktop/middle-earth-agents/express-ts/node_modules/.pnpm/@vitest+runner@2.1.8/node_modules/@vitest/runner/dist/index.js:1262:5)","timestamp":"2025-01-24T06:04:18.901Z"}
{"level":"info","message":"KeyManager service initialized with enhanced security","service":"middle-earth-agents","timestamp":"2025-01-24T06:04:18.903Z"}
{"level":"error","message":"Critical error retrieving keypair for agent test-agent-id Unsupported state or unable to authenticate data","service":"middle-earth-agents","stack":"Error: Unsupported state or unable to authenticate data\n    at Decipheriv.final (node:internal/crypto/cipher:184:29)\n    at KeyManager.decryptPrivateKey (/Users/ChukwukaUba/Desktop/middle-earth-agents/express-ts/src/deps/keyManager.ts:298:64)\n    at KeyManager.getKeypair (/Users/ChukwukaUba/Desktop/middle-earth-agents/express-ts/src/deps/keyManager.ts:114:38)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at /Users/ChukwukaUba/Desktop/middle-earth-agents/express-ts/src/deps/__tests__/keyManager.test.ts:87:22\n    at file:///Users/ChukwukaUba/Desktop/middle-earth-agents/express-ts/node_modules/.pnpm/@vitest+runner@2.1.8/node_modules/@vitest/runner/dist/index.js:533:5\n    at runTest (file:///Users/ChukwukaUba/Desktop/middle-earth-agents/express-ts/node_modules/.pnpm/@vitest+runner@2.1.8/node_modules/@vitest/runner/dist/index.js:1056:11)\n    at runSuite (file:///Users/ChukwukaUba/Desktop/middle-earth-agents/express-ts/node_modules/.pnpm/@vitest+runner@2.1.8/node_modules/@vitest/runner/dist/index.js:1205:15)\n    at runSuite (file:///Users/ChukwukaUba/Desktop/middle-earth-agents/express-ts/node_modules/.pnpm/@vitest+runner@2.1.8/node_modules/@vitest/runner/dist/index.js:1205:15)\n    at runSuite (file:///Users/ChukwukaUba/Desktop/middle-earth-agents/express-ts/node_modules/.pnpm/@vitest+runner@2.1.8/node_modules/@vitest/runner/dist/index.js:1205:15)","timestamp":"2025-01-24T06:04:18.966Z"}
{"level":"info","message":"KeyManager service initialized with enhanced security","service":"middle-earth-agents","timestamp":"2025-01-24T06:04:18.967Z"}
{"level":"error","message":"Critical error retrieving keypair for agent test-agent-id Database error","service":"middle-earth-agents","stack":"Error: Database error\n    at /Users/ChukwukaUba/Desktop/middle-earth-agents/express-ts/src/deps/__tests__/keyManager.test.ts:97:9\n    at file:///Users/ChukwukaUba/Desktop/middle-earth-agents/express-ts/node_modules/.pnpm/@vitest+runner@2.1.8/node_modules/@vitest/runner/dist/index.js:146:14\n    at file:///Users/ChukwukaUba/Desktop/middle-earth-agents/express-ts/node_modules/.pnpm/@vitest+runner@2.1.8/node_modules/@vitest/runner/dist/index.js:533:11\n    at runWithTimeout (file:///Users/ChukwukaUba/Desktop/middle-earth-agents/express-ts/node_modules/.pnpm/@vitest+runner@2.1.8/node_modules/@vitest/runner/dist/index.js:39:7)\n    at runTest (file:///Users/ChukwukaUba/Desktop/middle-earth-agents/express-ts/node_modules/.pnpm/@vitest+runner@2.1.8/node_modules/@vitest/runner/dist/index.js:1056:17)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at runSuite (file:///Users/ChukwukaUba/Desktop/middle-earth-agents/express-ts/node_modules/.pnpm/@vitest+runner@2.1.8/node_modules/@vitest/runner/dist/index.js:1205:15)\n    at runSuite (file:///Users/ChukwukaUba/Desktop/middle-earth-agents/express-ts/node_modules/.pnpm/@vitest+runner@2.1.8/node_modules/@vitest/runner/dist/index.js:1205:15)\n    at runSuite (file:///Users/ChukwukaUba/Desktop/middle-earth-agents/express-ts/node_modules/.pnpm/@vitest+runner@2.1.8/node_modules/@vitest/runner/dist/index.js:1205:15)\n    at runFiles (file:///Users/ChukwukaUba/Desktop/middle-earth-agents/express-ts/node_modules/.pnpm/@vitest+runner@2.1.8/node_modules/@vitest/runner/dist/index.js:1262:5)","timestamp":"2025-01-24T06:04:18.968Z"}
{"level":"info","message":"KeyManager service initialized with enhanced security","service":"middle-earth-agents","timestamp":"2025-01-24T06:04:18.969Z"}
{"level":"error","message":"Keypair generation failed for agent test-agent-id __vite_ssr_import_3__.prisma.$transaction is not a function","service":"middle-earth-agents","stack":"TypeError: __vite_ssr_import_3__.prisma.$transaction is not a function\n    at KeyManager.generateKeypair (/Users/ChukwukaUba/Desktop/middle-earth-agents/express-ts/src/deps/keyManager.ts:173:20)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at KeyManager.rotateKeypair (/Users/ChukwukaUba/Desktop/middle-earth-agents/express-ts/src/deps/keyManager.ts:214:27)\n    at /Users/ChukwukaUba/Desktop/middle-earth-agents/express-ts/src/deps/__tests__/keyManager.test.ts:113:7\n    at file:///Users/ChukwukaUba/Desktop/middle-earth-agents/express-ts/node_modules/.pnpm/@vitest+runner@2.1.8/node_modules/@vitest/runner/dist/index.js:533:5\n    at runTest (file:///Users/ChukwukaUba/Desktop/middle-earth-agents/express-ts/node_modules/.pnpm/@vitest+runner@2.1.8/node_modules/@vitest/runner/dist/index.js:1056:11)\n    at runSuite (file:///Users/ChukwukaUba/Desktop/middle-earth-agents/express-ts/node_modules/.pnpm/@vitest+runner@2.1.8/node_modules/@vitest/runner/dist/index.js:1205:15)\n    at runSuite (file:///Users/ChukwukaUba/Desktop/middle-earth-agents/express-ts/node_modules/.pnpm/@vitest+runner@2.1.8/node_modules/@vitest/runner/dist/index.js:1205:15)\n    at runSuite (file:///Users/ChukwukaUba/Desktop/middle-earth-agents/express-ts/node_modules/.pnpm/@vitest+runner@2.1.8/node_modules/@vitest/runner/dist/index.js:1205:15)\n    at runFiles (file:///Users/ChukwukaUba/Desktop/middle-earth-agents/express-ts/node_modules/.pnpm/@vitest+runner@2.1.8/node_modules/@vitest/runner/dist/index.js:1262:5)","timestamp":"2025-01-24T06:04:19.037Z"}
{"level":"error","message":"Keypair rotation failed for agent test-agent-id Failed to generate keypair: TypeError: __vite_ssr_import_3__.prisma.$transaction is not a function","name":"KeyManagementError","service":"middle-earth-agents","stack":"KeyManagementError: Failed to generate keypair: TypeError: __vite_ssr_import_3__.prisma.$transaction is not a function\n    at KeyManager.generateKeypair (/Users/ChukwukaUba/Desktop/middle-earth-agents/express-ts/src/deps/keyManager.ts:204:13)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at KeyManager.rotateKeypair (/Users/ChukwukaUba/Desktop/middle-earth-agents/express-ts/src/deps/keyManager.ts:214:27)\n    at /Users/ChukwukaUba/Desktop/middle-earth-agents/express-ts/src/deps/__tests__/keyManager.test.ts:113:7\n    at file:///Users/ChukwukaUba/Desktop/middle-earth-agents/express-ts/node_modules/.pnpm/@vitest+runner@2.1.8/node_modules/@vitest/runner/dist/index.js:533:5\n    at runTest (file:///Users/ChukwukaUba/Desktop/middle-earth-agents/express-ts/node_modules/.pnpm/@vitest+runner@2.1.8/node_modules/@vitest/runner/dist/index.js:1056:11)\n    at runSuite (file:///Users/ChukwukaUba/Desktop/middle-earth-agents/express-ts/node_modules/.pnpm/@vitest+runner@2.1.8/node_modules/@vitest/runner/dist/index.js:1205:15)\n    at runSuite (file:///Users/ChukwukaUba/Desktop/middle-earth-agents/express-ts/node_modules/.pnpm/@vitest+runner@2.1.8/node_modules/@vitest/runner/dist/index.js:1205:15)\n    at runSuite (file:///Users/ChukwukaUba/Desktop/middle-earth-agents/express-ts/node_modules/.pnpm/@vitest+runner@2.1.8/node_modules/@vitest/runner/dist/index.js:1205:15)\n    at runFiles (file:///Users/ChukwukaUba/Desktop/middle-earth-agents/express-ts/node_modules/.pnpm/@vitest+runner@2.1.8/node_modules/@vitest/runner/dist/index.js:1262:5)","timestamp":"2025-01-24T06:04:19.037Z"}
{"level":"info","message":"KeyManager service initialized with enhanced security","service":"middle-earth-agents","timestamp":"2025-01-24T06:04:19.040Z"}
{"level":"error","message":"Keypair rotation failed for agent test-agent-id Keypair rotation cooldown not elapsed","name":"KeyManagementError","service":"middle-earth-agents","stack":"KeyManagementError: Keypair rotation cooldown not elapsed\n    at KeyManager.enforceRotationCooldown (/Users/ChukwukaUba/Desktop/middle-earth-agents/express-ts/src/deps/keyManager.ts:235:15)\n    at KeyManager.rotateKeypair (/Users/ChukwukaUba/Desktop/middle-earth-agents/express-ts/src/deps/keyManager.ts:212:12)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at /Users/ChukwukaUba/Desktop/middle-earth-agents/express-ts/src/deps/__tests__/keyManager.test.ts:124:7\n    at file:///Users/ChukwukaUba/Desktop/middle-earth-agents/express-ts/node_modules/.pnpm/@vitest+runner@2.1.8/node_modules/@vitest/runner/dist/index.js:533:5\n    at runTest (file:///Users/ChukwukaUba/Desktop/middle-earth-agents/express-ts/node_modules/.pnpm/@vitest+runner@2.1.8/node_modules/@vitest/runner/dist/index.js:1056:11)\n    at runSuite (file:///Users/ChukwukaUba/Desktop/middle-earth-agents/express-ts/node_modules/.pnpm/@vitest+runner@2.1.8/node_modules/@vitest/runner/dist/index.js:1205:15)\n    at runSuite (file:///Users/ChukwukaUba/Desktop/middle-earth-agents/express-ts/node_modules/.pnpm/@vitest+runner@2.1.8/node_modules/@vitest/runner/dist/index.js:1205:15)\n    at runSuite (file:///Users/ChukwukaUba/Desktop/middle-earth-agents/express-ts/node_modules/.pnpm/@vitest+runner@2.1.8/node_modules/@vitest/runner/dist/index.js:1205:15)\n    at runFiles (file:///Users/ChukwukaUba/Desktop/middle-earth-agents/express-ts/node_modules/.pnpm/@vitest+runner@2.1.8/node_modules/@vitest/runner/dist/index.js:1262:5)","timestamp":"2025-01-24T06:04:19.041Z"}
{"level":"info","message":"KeyManager service initialized with enhanced security","service":"middle-earth-agents","timestamp":"2025-01-24T06:04:19.042Z"}
{"level":"info","message":"KeyManager service initialized with enhanced security","service":"middle-earth-agents","timestamp":"2025-01-24T06:04:19.042Z"}
{"level":"error","message":"Failed to retrieve public key for test-agent-id No keypair found for agent test-agent-id","name":"KeyManagementError","service":"middle-earth-agents","stack":"KeyManagementError: No keypair found for agent test-agent-id\n    at KeyManager.getPublicKey (/Users/ChukwukaUba/Desktop/middle-earth-agents/express-ts/src/deps/keyManager.ts:325:15)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)","timestamp":"2025-01-24T06:04:19.043Z"}
{"level":"info","message":"KeyManager service initialized with enhanced security","service":"middle-earth-agents","timestamp":"2025-01-24T06:04:19.043Z"}
{"level":"info","message":"KeyManager service initialized with enhanced security","service":"middle-earth-agents","timestamp":"2025-01-24T06:04:19.045Z"}
{"level":"error","message":"Encrypted private key retrieval failed for test-agent-id No keypair found for agent test-agent-id","name":"KeyManagementError","service":"middle-earth-agents","stack":"KeyManagementError: No keypair found for agent test-agent-id\n    at KeyManager.getEncryptedPrivateKey (/Users/ChukwukaUba/Desktop/middle-earth-agents/express-ts/src/deps/keyManager.ts:344:15)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)","timestamp":"2025-01-24T06:04:19.045Z"}
{"level":"info","message":"KeyManager service initialized with enhanced security","service":"middle-earth-agents","timestamp":"2025-01-24T06:11:44.358Z"}
{"level":"info","message":"KeyManager service initialized with enhanced security","service":"middle-earth-agents","timestamp":"2025-01-24T06:11:44.361Z"}
{"level":"info","message":"KeyManager service initialized with enhanced security","service":"middle-earth-agents","timestamp":"2025-01-24T06:11:44.362Z"}
{"level":"error","message":"Keypair generation failed for agent test-agent-id __vite_ssr_import_3__.prisma.$transaction is not a function","service":"middle-earth-agents","stack":"TypeError: __vite_ssr_import_3__.prisma.$transaction is not a function\n    at KeyManager.generateKeypair (/Users/ChukwukaUba/Desktop/middle-earth-agents/express-ts/src/deps/keyManager.ts:173:20)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at KeyManager.getKeypair (/Users/ChukwukaUba/Desktop/middle-earth-agents/express-ts/src/deps/keyManager.ts:127:27)\n    at /Users/ChukwukaUba/Desktop/middle-earth-agents/express-ts/src/deps/__tests__/keyManager.test.ts:72:22\n    at file:///Users/ChukwukaUba/Desktop/middle-earth-agents/express-ts/node_modules/.pnpm/@vitest+runner@2.1.8/node_modules/@vitest/runner/dist/index.js:533:5\n    at runTest (file:///Users/ChukwukaUba/Desktop/middle-earth-agents/express-ts/node_modules/.pnpm/@vitest+runner@2.1.8/node_modules/@vitest/runner/dist/index.js:1056:11)\n    at runSuite (file:///Users/ChukwukaUba/Desktop/middle-earth-agents/express-ts/node_modules/.pnpm/@vitest+runner@2.1.8/node_modules/@vitest/runner/dist/index.js:1205:15)\n    at runSuite (file:///Users/ChukwukaUba/Desktop/middle-earth-agents/express-ts/node_modules/.pnpm/@vitest+runner@2.1.8/node_modules/@vitest/runner/dist/index.js:1205:15)\n    at runSuite (file:///Users/ChukwukaUba/Desktop/middle-earth-agents/express-ts/node_modules/.pnpm/@vitest+runner@2.1.8/node_modules/@vitest/runner/dist/index.js:1205:15)\n    at runFiles (file:///Users/ChukwukaUba/Desktop/middle-earth-agents/express-ts/node_modules/.pnpm/@vitest+runner@2.1.8/node_modules/@vitest/runner/dist/index.js:1262:5)","timestamp":"2025-01-24T06:11:44.426Z"}
{"level":"error","message":"Critical error retrieving keypair for agent test-agent-id Failed to generate keypair: TypeError: __vite_ssr_import_3__.prisma.$transaction is not a function","name":"KeyManagementError","service":"middle-earth-agents","stack":"KeyManagementError: Failed to generate keypair: TypeError: __vite_ssr_import_3__.prisma.$transaction is not a function\n    at KeyManager.generateKeypair (/Users/ChukwukaUba/Desktop/middle-earth-agents/express-ts/src/deps/keyManager.ts:204:13)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at KeyManager.getKeypair (/Users/ChukwukaUba/Desktop/middle-earth-agents/express-ts/src/deps/keyManager.ts:127:27)\n    at /Users/ChukwukaUba/Desktop/middle-earth-agents/express-ts/src/deps/__tests__/keyManager.test.ts:72:22\n    at file:///Users/ChukwukaUba/Desktop/middle-earth-agents/express-ts/node_modules/.pnpm/@vitest+runner@2.1.8/node_modules/@vitest/runner/dist/index.js:533:5\n    at runTest (file:///Users/ChukwukaUba/Desktop/middle-earth-agents/express-ts/node_modules/.pnpm/@vitest+runner@2.1.8/node_modules/@vitest/runner/dist/index.js:1056:11)\n    at runSuite (file:///Users/ChukwukaUba/Desktop/middle-earth-agents/express-ts/node_modules/.pnpm/@vitest+runner@2.1.8/node_modules/@vitest/runner/dist/index.js:1205:15)\n    at runSuite (file:///Users/ChukwukaUba/Desktop/middle-earth-agents/express-ts/node_modules/.pnpm/@vitest+runner@2.1.8/node_modules/@vitest/runner/dist/index.js:1205:15)\n    at runSuite (file:///Users/ChukwukaUba/Desktop/middle-earth-agents/express-ts/node_modules/.pnpm/@vitest+runner@2.1.8/node_modules/@vitest/runner/dist/index.js:1205:15)\n    at runFiles (file:///Users/ChukwukaUba/Desktop/middle-earth-agents/express-ts/node_modules/.pnpm/@vitest+runner@2.1.8/node_modules/@vitest/runner/dist/index.js:1262:5)","timestamp":"2025-01-24T06:11:44.427Z"}
{"level":"info","message":"KeyManager service initialized with enhanced security","service":"middle-earth-agents","timestamp":"2025-01-24T06:11:44.429Z"}
{"level":"error","message":"Critical error retrieving keypair for agent test-agent-id Unsupported state or unable to authenticate data","service":"middle-earth-agents","stack":"Error: Unsupported state or unable to authenticate data\n    at Decipheriv.final (node:internal/crypto/cipher:184:29)\n    at KeyManager.decryptPrivateKey (/Users/ChukwukaUba/Desktop/middle-earth-agents/express-ts/src/deps/keyManager.ts:298:64)\n    at KeyManager.getKeypair (/Users/ChukwukaUba/Desktop/middle-earth-agents/express-ts/src/deps/keyManager.ts:114:38)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at /Users/ChukwukaUba/Desktop/middle-earth-agents/express-ts/src/deps/__tests__/keyManager.test.ts:87:22\n    at file:///Users/ChukwukaUba/Desktop/middle-earth-agents/express-ts/node_modules/.pnpm/@vitest+runner@2.1.8/node_modules/@vitest/runner/dist/index.js:533:5\n    at runTest (file:///Users/ChukwukaUba/Desktop/middle-earth-agents/express-ts/node_modules/.pnpm/@vitest+runner@2.1.8/node_modules/@vitest/runner/dist/index.js:1056:11)\n    at runSuite (file:///Users/ChukwukaUba/Desktop/middle-earth-agents/express-ts/node_modules/.pnpm/@vitest+runner@2.1.8/node_modules/@vitest/runner/dist/index.js:1205:15)\n    at runSuite (file:///Users/ChukwukaUba/Desktop/middle-earth-agents/express-ts/node_modules/.pnpm/@vitest+runner@2.1.8/node_modules/@vitest/runner/dist/index.js:1205:15)\n    at runSuite (file:///Users/ChukwukaUba/Desktop/middle-earth-agents/express-ts/node_modules/.pnpm/@vitest+runner@2.1.8/node_modules/@vitest/runner/dist/index.js:1205:15)","timestamp":"2025-01-24T06:11:44.489Z"}
{"level":"info","message":"KeyManager service initialized with enhanced security","service":"middle-earth-agents","timestamp":"2025-01-24T06:11:44.489Z"}
{"level":"error","message":"Critical error retrieving keypair for agent test-agent-id Database error","service":"middle-earth-agents","stack":"Error: Database error\n    at /Users/ChukwukaUba/Desktop/middle-earth-agents/express-ts/src/deps/__tests__/keyManager.test.ts:97:9\n    at file:///Users/ChukwukaUba/Desktop/middle-earth-agents/express-ts/node_modules/.pnpm/@vitest+runner@2.1.8/node_modules/@vitest/runner/dist/index.js:146:14\n    at file:///Users/ChukwukaUba/Desktop/middle-earth-agents/express-ts/node_modules/.pnpm/@vitest+runner@2.1.8/node_modules/@vitest/runner/dist/index.js:533:11\n    at runWithTimeout (file:///Users/ChukwukaUba/Desktop/middle-earth-agents/express-ts/node_modules/.pnpm/@vitest+runner@2.1.8/node_modules/@vitest/runner/dist/index.js:39:7)\n    at runTest (file:///Users/ChukwukaUba/Desktop/middle-earth-agents/express-ts/node_modules/.pnpm/@vitest+runner@2.1.8/node_modules/@vitest/runner/dist/index.js:1056:17)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at runSuite (file:///Users/ChukwukaUba/Desktop/middle-earth-agents/express-ts/node_modules/.pnpm/@vitest+runner@2.1.8/node_modules/@vitest/runner/dist/index.js:1205:15)\n    at runSuite (file:///Users/ChukwukaUba/Desktop/middle-earth-agents/express-ts/node_modules/.pnpm/@vitest+runner@2.1.8/node_modules/@vitest/runner/dist/index.js:1205:15)\n    at runSuite (file:///Users/ChukwukaUba/Desktop/middle-earth-agents/express-ts/node_modules/.pnpm/@vitest+runner@2.1.8/node_modules/@vitest/runner/dist/index.js:1205:15)\n    at runFiles (file:///Users/ChukwukaUba/Desktop/middle-earth-agents/express-ts/node_modules/.pnpm/@vitest+runner@2.1.8/node_modules/@vitest/runner/dist/index.js:1262:5)","timestamp":"2025-01-24T06:11:44.490Z"}
{"level":"info","message":"KeyManager service initialized with enhanced security","service":"middle-earth-agents","timestamp":"2025-01-24T06:11:44.491Z"}
{"level":"error","message":"Keypair generation failed for agent test-agent-id __vite_ssr_import_3__.prisma.$transaction is not a function","service":"middle-earth-agents","stack":"TypeError: __vite_ssr_import_3__.prisma.$transaction is not a function\n    at KeyManager.generateKeypair (/Users/ChukwukaUba/Desktop/middle-earth-agents/express-ts/src/deps/keyManager.ts:173:20)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at KeyManager.rotateKeypair (/Users/ChukwukaUba/Desktop/middle-earth-agents/express-ts/src/deps/keyManager.ts:214:27)\n    at /Users/ChukwukaUba/Desktop/middle-earth-agents/express-ts/src/deps/__tests__/keyManager.test.ts:113:7\n    at file:///Users/ChukwukaUba/Desktop/middle-earth-agents/express-ts/node_modules/.pnpm/@vitest+runner@2.1.8/node_modules/@vitest/runner/dist/index.js:533:5\n    at runTest (file:///Users/ChukwukaUba/Desktop/middle-earth-agents/express-ts/node_modules/.pnpm/@vitest+runner@2.1.8/node_modules/@vitest/runner/dist/index.js:1056:11)\n    at runSuite (file:///Users/ChukwukaUba/Desktop/middle-earth-agents/express-ts/node_modules/.pnpm/@vitest+runner@2.1.8/node_modules/@vitest/runner/dist/index.js:1205:15)\n    at runSuite (file:///Users/ChukwukaUba/Desktop/middle-earth-agents/express-ts/node_modules/.pnpm/@vitest+runner@2.1.8/node_modules/@vitest/runner/dist/index.js:1205:15)\n    at runSuite (file:///Users/ChukwukaUba/Desktop/middle-earth-agents/express-ts/node_modules/.pnpm/@vitest+runner@2.1.8/node_modules/@vitest/runner/dist/index.js:1205:15)\n    at runFiles (file:///Users/ChukwukaUba/Desktop/middle-earth-agents/express-ts/node_modules/.pnpm/@vitest+runner@2.1.8/node_modules/@vitest/runner/dist/index.js:1262:5)","timestamp":"2025-01-24T06:11:44.555Z"}
{"level":"error","message":"Keypair rotation failed for agent test-agent-id Failed to generate keypair: TypeError: __vite_ssr_import_3__.prisma.$transaction is not a function","name":"KeyManagementError","service":"middle-earth-agents","stack":"KeyManagementError: Failed to generate keypair: TypeError: __vite_ssr_import_3__.prisma.$transaction is not a function\n    at KeyManager.generateKeypair (/Users/ChukwukaUba/Desktop/middle-earth-agents/express-ts/src/deps/keyManager.ts:204:13)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at KeyManager.rotateKeypair (/Users/ChukwukaUba/Desktop/middle-earth-agents/express-ts/src/deps/keyManager.ts:214:27)\n    at /Users/ChukwukaUba/Desktop/middle-earth-agents/express-ts/src/deps/__tests__/keyManager.test.ts:113:7\n    at file:///Users/ChukwukaUba/Desktop/middle-earth-agents/express-ts/node_modules/.pnpm/@vitest+runner@2.1.8/node_modules/@vitest/runner/dist/index.js:533:5\n    at runTest (file:///Users/ChukwukaUba/Desktop/middle-earth-agents/express-ts/node_modules/.pnpm/@vitest+runner@2.1.8/node_modules/@vitest/runner/dist/index.js:1056:11)\n    at runSuite (file:///Users/ChukwukaUba/Desktop/middle-earth-agents/express-ts/node_modules/.pnpm/@vitest+runner@2.1.8/node_modules/@vitest/runner/dist/index.js:1205:15)\n    at runSuite (file:///Users/ChukwukaUba/Desktop/middle-earth-agents/express-ts/node_modules/.pnpm/@vitest+runner@2.1.8/node_modules/@vitest/runner/dist/index.js:1205:15)\n    at runSuite (file:///Users/ChukwukaUba/Desktop/middle-earth-agents/express-ts/node_modules/.pnpm/@vitest+runner@2.1.8/node_modules/@vitest/runner/dist/index.js:1205:15)\n    at runFiles (file:///Users/ChukwukaUba/Desktop/middle-earth-agents/express-ts/node_modules/.pnpm/@vitest+runner@2.1.8/node_modules/@vitest/runner/dist/index.js:1262:5)","timestamp":"2025-01-24T06:11:44.556Z"}
{"level":"info","message":"KeyManager service initialized with enhanced security","service":"middle-earth-agents","timestamp":"2025-01-24T06:11:44.558Z"}
{"level":"error","message":"Keypair rotation failed for agent test-agent-id Keypair rotation cooldown not elapsed","name":"KeyManagementError","service":"middle-earth-agents","stack":"KeyManagementError: Keypair rotation cooldown not elapsed\n    at KeyManager.enforceRotationCooldown (/Users/ChukwukaUba/Desktop/middle-earth-agents/express-ts/src/deps/keyManager.ts:235:15)\n    at KeyManager.rotateKeypair (/Users/ChukwukaUba/Desktop/middle-earth-agents/express-ts/src/deps/keyManager.ts:212:12)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at /Users/ChukwukaUba/Desktop/middle-earth-agents/express-ts/src/deps/__tests__/keyManager.test.ts:124:7\n    at file:///Users/ChukwukaUba/Desktop/middle-earth-agents/express-ts/node_modules/.pnpm/@vitest+runner@2.1.8/node_modules/@vitest/runner/dist/index.js:533:5\n    at runTest (file:///Users/ChukwukaUba/Desktop/middle-earth-agents/express-ts/node_modules/.pnpm/@vitest+runner@2.1.8/node_modules/@vitest/runner/dist/index.js:1056:11)\n    at runSuite (file:///Users/ChukwukaUba/Desktop/middle-earth-agents/express-ts/node_modules/.pnpm/@vitest+runner@2.1.8/node_modules/@vitest/runner/dist/index.js:1205:15)\n    at runSuite (file:///Users/ChukwukaUba/Desktop/middle-earth-agents/express-ts/node_modules/.pnpm/@vitest+runner@2.1.8/node_modules/@vitest/runner/dist/index.js:1205:15)\n    at runSuite (file:///Users/ChukwukaUba/Desktop/middle-earth-agents/express-ts/node_modules/.pnpm/@vitest+runner@2.1.8/node_modules/@vitest/runner/dist/index.js:1205:15)\n    at runFiles (file:///Users/ChukwukaUba/Desktop/middle-earth-agents/express-ts/node_modules/.pnpm/@vitest+runner@2.1.8/node_modules/@vitest/runner/dist/index.js:1262:5)","timestamp":"2025-01-24T06:11:44.558Z"}
{"level":"info","message":"KeyManager service initialized with enhanced security","service":"middle-earth-agents","timestamp":"2025-01-24T06:11:44.558Z"}
{"level":"info","message":"KeyManager service initialized with enhanced security","service":"middle-earth-agents","timestamp":"2025-01-24T06:11:44.559Z"}
{"level":"error","message":"Failed to retrieve public key for test-agent-id No keypair found for agent test-agent-id","name":"KeyManagementError","service":"middle-earth-agents","stack":"KeyManagementError: No keypair found for agent test-agent-id\n    at KeyManager.getPublicKey (/Users/ChukwukaUba/Desktop/middle-earth-agents/express-ts/src/deps/keyManager.ts:325:15)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)","timestamp":"2025-01-24T06:11:44.559Z"}
{"level":"info","message":"KeyManager service initialized with enhanced security","service":"middle-earth-agents","timestamp":"2025-01-24T06:11:44.560Z"}
{"level":"info","message":"KeyManager service initialized with enhanced security","service":"middle-earth-agents","timestamp":"2025-01-24T06:11:44.562Z"}
{"level":"error","message":"Encrypted private key retrieval failed for test-agent-id No keypair found for agent test-agent-id","name":"KeyManagementError","service":"middle-earth-agents","stack":"KeyManagementError: No keypair found for agent test-agent-id\n    at KeyManager.getEncryptedPrivateKey (/Users/ChukwukaUba/Desktop/middle-earth-agents/express-ts/src/deps/keyManager.ts:344:15)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)","timestamp":"2025-01-24T06:11:44.562Z"}
{"level":"info","message":"KeyManager service initialized with enhanced security","service":"middle-earth-agents","timestamp":"2025-01-24T06:12:11.288Z"}
{"level":"info","message":"KeyManager service initialized with enhanced security","service":"middle-earth-agents","timestamp":"2025-01-24T06:12:11.293Z"}
{"level":"info","message":"KeyManager service initialized with enhanced security","service":"middle-earth-agents","timestamp":"2025-01-24T06:12:11.296Z"}
{"level":"error","message":"Keypair generation failed for agent test-agent-id __vite_ssr_import_3__.prisma.$transaction is not a function","service":"middle-earth-agents","stack":"TypeError: __vite_ssr_import_3__.prisma.$transaction is not a function\n    at KeyManager.generateKeypair (/Users/ChukwukaUba/Desktop/middle-earth-agents/express-ts/src/deps/keyManager.ts:173:20)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at KeyManager.getKeypair (/Users/ChukwukaUba/Desktop/middle-earth-agents/express-ts/src/deps/keyManager.ts:127:27)\n    at /Users/ChukwukaUba/Desktop/middle-earth-agents/express-ts/src/deps/__tests__/keyManager.test.ts:72:22\n    at file:///Users/ChukwukaUba/Desktop/middle-earth-agents/express-ts/node_modules/.pnpm/@vitest+runner@2.1.8/node_modules/@vitest/runner/dist/index.js:533:5\n    at runTest (file:///Users/ChukwukaUba/Desktop/middle-earth-agents/express-ts/node_modules/.pnpm/@vitest+runner@2.1.8/node_modules/@vitest/runner/dist/index.js:1056:11)\n    at runSuite (file:///Users/ChukwukaUba/Desktop/middle-earth-agents/express-ts/node_modules/.pnpm/@vitest+runner@2.1.8/node_modules/@vitest/runner/dist/index.js:1205:15)\n    at runSuite (file:///Users/ChukwukaUba/Desktop/middle-earth-agents/express-ts/node_modules/.pnpm/@vitest+runner@2.1.8/node_modules/@vitest/runner/dist/index.js:1205:15)\n    at runSuite (file:///Users/ChukwukaUba/Desktop/middle-earth-agents/express-ts/node_modules/.pnpm/@vitest+runner@2.1.8/node_modules/@vitest/runner/dist/index.js:1205:15)\n    at runFiles (file:///Users/ChukwukaUba/Desktop/middle-earth-agents/express-ts/node_modules/.pnpm/@vitest+runner@2.1.8/node_modules/@vitest/runner/dist/index.js:1262:5)","timestamp":"2025-01-24T06:12:11.415Z"}
{"level":"error","message":"Critical error retrieving keypair for agent test-agent-id Failed to generate keypair: TypeError: __vite_ssr_import_3__.prisma.$transaction is not a function","name":"KeyManagementError","service":"middle-earth-agents","stack":"KeyManagementError: Failed to generate keypair: TypeError: __vite_ssr_import_3__.prisma.$transaction is not a function\n    at KeyManager.generateKeypair (/Users/ChukwukaUba/Desktop/middle-earth-agents/express-ts/src/deps/keyManager.ts:204:13)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at KeyManager.getKeypair (/Users/ChukwukaUba/Desktop/middle-earth-agents/express-ts/src/deps/keyManager.ts:127:27)\n    at /Users/ChukwukaUba/Desktop/middle-earth-agents/express-ts/src/deps/__tests__/keyManager.test.ts:72:22\n    at file:///Users/ChukwukaUba/Desktop/middle-earth-agents/express-ts/node_modules/.pnpm/@vitest+runner@2.1.8/node_modules/@vitest/runner/dist/index.js:533:5\n    at runTest (file:///Users/ChukwukaUba/Desktop/middle-earth-agents/express-ts/node_modules/.pnpm/@vitest+runner@2.1.8/node_modules/@vitest/runner/dist/index.js:1056:11)\n    at runSuite (file:///Users/ChukwukaUba/Desktop/middle-earth-agents/express-ts/node_modules/.pnpm/@vitest+runner@2.1.8/node_modules/@vitest/runner/dist/index.js:1205:15)\n    at runSuite (file:///Users/ChukwukaUba/Desktop/middle-earth-agents/express-ts/node_modules/.pnpm/@vitest+runner@2.1.8/node_modules/@vitest/runner/dist/index.js:1205:15)\n    at runSuite (file:///Users/ChukwukaUba/Desktop/middle-earth-agents/express-ts/node_modules/.pnpm/@vitest+runner@2.1.8/node_modules/@vitest/runner/dist/index.js:1205:15)\n    at runFiles (file:///Users/ChukwukaUba/Desktop/middle-earth-agents/express-ts/node_modules/.pnpm/@vitest+runner@2.1.8/node_modules/@vitest/runner/dist/index.js:1262:5)","timestamp":"2025-01-24T06:12:11.416Z"}
{"level":"info","message":"KeyManager service initialized with enhanced security","service":"middle-earth-agents","timestamp":"2025-01-24T06:12:11.420Z"}
{"level":"error","message":"Critical error retrieving keypair for agent test-agent-id Unsupported state or unable to authenticate data","service":"middle-earth-agents","stack":"Error: Unsupported state or unable to authenticate data\n    at Decipheriv.final (node:internal/crypto/cipher:184:29)\n    at KeyManager.decryptPrivateKey (/Users/ChukwukaUba/Desktop/middle-earth-agents/express-ts/src/deps/keyManager.ts:298:64)\n    at KeyManager.getKeypair (/Users/ChukwukaUba/Desktop/middle-earth-agents/express-ts/src/deps/keyManager.ts:114:38)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at /Users/ChukwukaUba/Desktop/middle-earth-agents/express-ts/src/deps/__tests__/keyManager.test.ts:87:22\n    at file:///Users/ChukwukaUba/Desktop/middle-earth-agents/express-ts/node_modules/.pnpm/@vitest+runner@2.1.8/node_modules/@vitest/runner/dist/index.js:533:5\n    at runTest (file:///Users/ChukwukaUba/Desktop/middle-earth-agents/express-ts/node_modules/.pnpm/@vitest+runner@2.1.8/node_modules/@vitest/runner/dist/index.js:1056:11)\n    at runSuite (file:///Users/ChukwukaUba/Desktop/middle-earth-agents/express-ts/node_modules/.pnpm/@vitest+runner@2.1.8/node_modules/@vitest/runner/dist/index.js:1205:15)\n    at runSuite (file:///Users/ChukwukaUba/Desktop/middle-earth-agents/express-ts/node_modules/.pnpm/@vitest+runner@2.1.8/node_modules/@vitest/runner/dist/index.js:1205:15)\n    at runSuite (file:///Users/ChukwukaUba/Desktop/middle-earth-agents/express-ts/node_modules/.pnpm/@vitest+runner@2.1.8/node_modules/@vitest/runner/dist/index.js:1205:15)","timestamp":"2025-01-24T06:12:11.566Z"}
{"level":"info","message":"KeyManager service initialized with enhanced security","service":"middle-earth-agents","timestamp":"2025-01-24T06:12:11.569Z"}
{"level":"error","message":"Critical error retrieving keypair for agent test-agent-id Database error","service":"middle-earth-agents","stack":"Error: Database error\n    at /Users/ChukwukaUba/Desktop/middle-earth-agents/express-ts/src/deps/__tests__/keyManager.test.ts:97:9\n    at file:///Users/ChukwukaUba/Desktop/middle-earth-agents/express-ts/node_modules/.pnpm/@vitest+runner@2.1.8/node_modules/@vitest/runner/dist/index.js:146:14\n    at file:///Users/ChukwukaUba/Desktop/middle-earth-agents/express-ts/node_modules/.pnpm/@vitest+runner@2.1.8/node_modules/@vitest/runner/dist/index.js:533:11\n    at runWithTimeout (file:///Users/ChukwukaUba/Desktop/middle-earth-agents/express-ts/node_modules/.pnpm/@vitest+runner@2.1.8/node_modules/@vitest/runner/dist/index.js:39:7)\n    at runTest (file:///Users/ChukwukaUba/Desktop/middle-earth-agents/express-ts/node_modules/.pnpm/@vitest+runner@2.1.8/node_modules/@vitest/runner/dist/index.js:1056:17)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at runSuite (file:///Users/ChukwukaUba/Desktop/middle-earth-agents/express-ts/node_modules/.pnpm/@vitest+runner@2.1.8/node_modules/@vitest/runner/dist/index.js:1205:15)\n    at runSuite (file:///Users/ChukwukaUba/Desktop/middle-earth-agents/express-ts/node_modules/.pnpm/@vitest+runner@2.1.8/node_modules/@vitest/runner/dist/index.js:1205:15)\n    at runSuite (file:///Users/ChukwukaUba/Desktop/middle-earth-agents/express-ts/node_modules/.pnpm/@vitest+runner@2.1.8/node_modules/@vitest/runner/dist/index.js:1205:15)\n    at runFiles (file:///Users/ChukwukaUba/Desktop/middle-earth-agents/express-ts/node_modules/.pnpm/@vitest+runner@2.1.8/node_modules/@vitest/runner/dist/index.js:1262:5)","timestamp":"2025-01-24T06:12:11.572Z"}
{"level":"info","message":"KeyManager service initialized with enhanced security","service":"middle-earth-agents","timestamp":"2025-01-24T06:12:11.576Z"}
{"level":"error","message":"Keypair generation failed for agent test-agent-id __vite_ssr_import_3__.prisma.$transaction is not a function","service":"middle-earth-agents","stack":"TypeError: __vite_ssr_import_3__.prisma.$transaction is not a function\n    at KeyManager.generateKeypair (/Users/ChukwukaUba/Desktop/middle-earth-agents/express-ts/src/deps/keyManager.ts:173:20)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at KeyManager.rotateKeypair (/Users/ChukwukaUba/Desktop/middle-earth-agents/express-ts/src/deps/keyManager.ts:214:27)\n    at /Users/ChukwukaUba/Desktop/middle-earth-agents/express-ts/src/deps/__tests__/keyManager.test.ts:113:7\n    at file:///Users/ChukwukaUba/Desktop/middle-earth-agents/express-ts/node_modules/.pnpm/@vitest+runner@2.1.8/node_modules/@vitest/runner/dist/index.js:533:5\n    at runTest (file:///Users/ChukwukaUba/Desktop/middle-earth-agents/express-ts/node_modules/.pnpm/@vitest+runner@2.1.8/node_modules/@vitest/runner/dist/index.js:1056:11)\n    at runSuite (file:///Users/ChukwukaUba/Desktop/middle-earth-agents/express-ts/node_modules/.pnpm/@vitest+runner@2.1.8/node_modules/@vitest/runner/dist/index.js:1205:15)\n    at runSuite (file:///Users/ChukwukaUba/Desktop/middle-earth-agents/express-ts/node_modules/.pnpm/@vitest+runner@2.1.8/node_modules/@vitest/runner/dist/index.js:1205:15)\n    at runSuite (file:///Users/ChukwukaUba/Desktop/middle-earth-agents/express-ts/node_modules/.pnpm/@vitest+runner@2.1.8/node_modules/@vitest/runner/dist/index.js:1205:15)\n    at runFiles (file:///Users/ChukwukaUba/Desktop/middle-earth-agents/express-ts/node_modules/.pnpm/@vitest+runner@2.1.8/node_modules/@vitest/runner/dist/index.js:1262:5)","timestamp":"2025-01-24T06:12:11.726Z"}
{"level":"error","message":"Keypair rotation failed for agent test-agent-id Failed to generate keypair: TypeError: __vite_ssr_import_3__.prisma.$transaction is not a function","name":"KeyManagementError","service":"middle-earth-agents","stack":"KeyManagementError: Failed to generate keypair: TypeError: __vite_ssr_import_3__.prisma.$transaction is not a function\n    at KeyManager.generateKeypair (/Users/ChukwukaUba/Desktop/middle-earth-agents/express-ts/src/deps/keyManager.ts:204:13)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at KeyManager.rotateKeypair (/Users/ChukwukaUba/Desktop/middle-earth-agents/express-ts/src/deps/keyManager.ts:214:27)\n    at /Users/ChukwukaUba/Desktop/middle-earth-agents/express-ts/src/deps/__tests__/keyManager.test.ts:113:7\n    at file:///Users/ChukwukaUba/Desktop/middle-earth-agents/express-ts/node_modules/.pnpm/@vitest+runner@2.1.8/node_modules/@vitest/runner/dist/index.js:533:5\n    at runTest (file:///Users/ChukwukaUba/Desktop/middle-earth-agents/express-ts/node_modules/.pnpm/@vitest+runner@2.1.8/node_modules/@vitest/runner/dist/index.js:1056:11)\n    at runSuite (file:///Users/ChukwukaUba/Desktop/middle-earth-agents/express-ts/node_modules/.pnpm/@vitest+runner@2.1.8/node_modules/@vitest/runner/dist/index.js:1205:15)\n    at runSuite (file:///Users/ChukwukaUba/Desktop/middle-earth-agents/express-ts/node_modules/.pnpm/@vitest+runner@2.1.8/node_modules/@vitest/runner/dist/index.js:1205:15)\n    at runSuite (file:///Users/ChukwukaUba/Desktop/middle-earth-agents/express-ts/node_modules/.pnpm/@vitest+runner@2.1.8/node_modules/@vitest/runner/dist/index.js:1205:15)\n    at runFiles (file:///Users/ChukwukaUba/Desktop/middle-earth-agents/express-ts/node_modules/.pnpm/@vitest+runner@2.1.8/node_modules/@vitest/runner/dist/index.js:1262:5)","timestamp":"2025-01-24T06:12:11.726Z"}
{"level":"info","message":"KeyManager service initialized with enhanced security","service":"middle-earth-agents","timestamp":"2025-01-24T06:12:11.737Z"}
{"level":"error","message":"Keypair rotation failed for agent test-agent-id Keypair rotation cooldown not elapsed","name":"KeyManagementError","service":"middle-earth-agents","stack":"KeyManagementError: Keypair rotation cooldown not elapsed\n    at KeyManager.enforceRotationCooldown (/Users/ChukwukaUba/Desktop/middle-earth-agents/express-ts/src/deps/keyManager.ts:235:15)\n    at KeyManager.rotateKeypair (/Users/ChukwukaUba/Desktop/middle-earth-agents/express-ts/src/deps/keyManager.ts:212:12)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at /Users/ChukwukaUba/Desktop/middle-earth-agents/express-ts/src/deps/__tests__/keyManager.test.ts:124:7\n    at file:///Users/ChukwukaUba/Desktop/middle-earth-agents/express-ts/node_modules/.pnpm/@vitest+runner@2.1.8/node_modules/@vitest/runner/dist/index.js:533:5\n    at runTest (file:///Users/ChukwukaUba/Desktop/middle-earth-agents/express-ts/node_modules/.pnpm/@vitest+runner@2.1.8/node_modules/@vitest/runner/dist/index.js:1056:11)\n    at runSuite (file:///Users/ChukwukaUba/Desktop/middle-earth-agents/express-ts/node_modules/.pnpm/@vitest+runner@2.1.8/node_modules/@vitest/runner/dist/index.js:1205:15)\n    at runSuite (file:///Users/ChukwukaUba/Desktop/middle-earth-agents/express-ts/node_modules/.pnpm/@vitest+runner@2.1.8/node_modules/@vitest/runner/dist/index.js:1205:15)\n    at runSuite (file:///Users/ChukwukaUba/Desktop/middle-earth-agents/express-ts/node_modules/.pnpm/@vitest+runner@2.1.8/node_modules/@vitest/runner/dist/index.js:1205:15)\n    at runFiles (file:///Users/ChukwukaUba/Desktop/middle-earth-agents/express-ts/node_modules/.pnpm/@vitest+runner@2.1.8/node_modules/@vitest/runner/dist/index.js:1262:5)","timestamp":"2025-01-24T06:12:11.739Z"}
{"level":"info","message":"KeyManager service initialized with enhanced security","service":"middle-earth-agents","timestamp":"2025-01-24T06:12:11.741Z"}
{"level":"info","message":"KeyManager service initialized with enhanced security","service":"middle-earth-agents","timestamp":"2025-01-24T06:12:11.744Z"}
{"level":"error","message":"Failed to retrieve public key for test-agent-id No keypair found for agent test-agent-id","name":"KeyManagementError","service":"middle-earth-agents","stack":"KeyManagementError: No keypair found for agent test-agent-id\n    at KeyManager.getPublicKey (/Users/ChukwukaUba/Desktop/middle-earth-agents/express-ts/src/deps/keyManager.ts:325:15)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)","timestamp":"2025-01-24T06:12:11.745Z"}
{"level":"info","message":"KeyManager service initialized with enhanced security","service":"middle-earth-agents","timestamp":"2025-01-24T06:12:11.749Z"}
{"level":"info","message":"KeyManager service initialized with enhanced security","service":"middle-earth-agents","timestamp":"2025-01-24T06:12:11.754Z"}
{"level":"error","message":"Encrypted private key retrieval failed for test-agent-id No keypair found for agent test-agent-id","name":"KeyManagementError","service":"middle-earth-agents","stack":"KeyManagementError: No keypair found for agent test-agent-id\n    at KeyManager.getEncryptedPrivateKey (/Users/ChukwukaUba/Desktop/middle-earth-agents/express-ts/src/deps/keyManager.ts:344:15)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)","timestamp":"2025-01-24T06:12:11.755Z"}
{"level":"info","message":"KeyManager service initialized with enhanced security","service":"middle-earth-agents","timestamp":"2025-01-24T06:17:21.279Z"}
{"level":"info","message":"KeyManager service initialized with enhanced security","service":"middle-earth-agents","timestamp":"2025-01-24T06:17:21.282Z"}
{"level":"info","message":"KeyManager service initialized with enhanced security","service":"middle-earth-agents","timestamp":"2025-01-24T06:17:21.283Z"}
{"level":"error","message":"Keypair generation failed for agent test-agent-id __vite_ssr_import_3__.prisma.$transaction is not a function","service":"middle-earth-agents","stack":"TypeError: __vite_ssr_import_3__.prisma.$transaction is not a function\n    at KeyManager.generateKeypair (/Users/ChukwukaUba/Desktop/middle-earth-agents/express-ts/src/deps/keyManager.ts:173:20)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at KeyManager.getKeypair (/Users/ChukwukaUba/Desktop/middle-earth-agents/express-ts/src/deps/keyManager.ts:127:27)\n    at /Users/ChukwukaUba/Desktop/middle-earth-agents/express-ts/src/deps/__tests__/keyManager.test.ts:72:22\n    at file:///Users/ChukwukaUba/Desktop/middle-earth-agents/express-ts/node_modules/.pnpm/@vitest+runner@2.1.8/node_modules/@vitest/runner/dist/index.js:533:5\n    at runTest (file:///Users/ChukwukaUba/Desktop/middle-earth-agents/express-ts/node_modules/.pnpm/@vitest+runner@2.1.8/node_modules/@vitest/runner/dist/index.js:1056:11)\n    at runSuite (file:///Users/ChukwukaUba/Desktop/middle-earth-agents/express-ts/node_modules/.pnpm/@vitest+runner@2.1.8/node_modules/@vitest/runner/dist/index.js:1205:15)\n    at runSuite (file:///Users/ChukwukaUba/Desktop/middle-earth-agents/express-ts/node_modules/.pnpm/@vitest+runner@2.1.8/node_modules/@vitest/runner/dist/index.js:1205:15)\n    at runSuite (file:///Users/ChukwukaUba/Desktop/middle-earth-agents/express-ts/node_modules/.pnpm/@vitest+runner@2.1.8/node_modules/@vitest/runner/dist/index.js:1205:15)\n    at runFiles (file:///Users/ChukwukaUba/Desktop/middle-earth-agents/express-ts/node_modules/.pnpm/@vitest+runner@2.1.8/node_modules/@vitest/runner/dist/index.js:1262:5)","timestamp":"2025-01-24T06:17:21.393Z"}
{"level":"error","message":"Critical error retrieving keypair for agent test-agent-id Failed to generate keypair: TypeError: __vite_ssr_import_3__.prisma.$transaction is not a function","name":"KeyManagementError","service":"middle-earth-agents","stack":"KeyManagementError: Failed to generate keypair: TypeError: __vite_ssr_import_3__.prisma.$transaction is not a function\n    at KeyManager.generateKeypair (/Users/ChukwukaUba/Desktop/middle-earth-agents/express-ts/src/deps/keyManager.ts:204:13)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at KeyManager.getKeypair (/Users/ChukwukaUba/Desktop/middle-earth-agents/express-ts/src/deps/keyManager.ts:127:27)\n    at /Users/ChukwukaUba/Desktop/middle-earth-agents/express-ts/src/deps/__tests__/keyManager.test.ts:72:22\n    at file:///Users/ChukwukaUba/Desktop/middle-earth-agents/express-ts/node_modules/.pnpm/@vitest+runner@2.1.8/node_modules/@vitest/runner/dist/index.js:533:5\n    at runTest (file:///Users/ChukwukaUba/Desktop/middle-earth-agents/express-ts/node_modules/.pnpm/@vitest+runner@2.1.8/node_modules/@vitest/runner/dist/index.js:1056:11)\n    at runSuite (file:///Users/ChukwukaUba/Desktop/middle-earth-agents/express-ts/node_modules/.pnpm/@vitest+runner@2.1.8/node_modules/@vitest/runner/dist/index.js:1205:15)\n    at runSuite (file:///Users/ChukwukaUba/Desktop/middle-earth-agents/express-ts/node_modules/.pnpm/@vitest+runner@2.1.8/node_modules/@vitest/runner/dist/index.js:1205:15)\n    at runSuite (file:///Users/ChukwukaUba/Desktop/middle-earth-agents/express-ts/node_modules/.pnpm/@vitest+runner@2.1.8/node_modules/@vitest/runner/dist/index.js:1205:15)\n    at runFiles (file:///Users/ChukwukaUba/Desktop/middle-earth-agents/express-ts/node_modules/.pnpm/@vitest+runner@2.1.8/node_modules/@vitest/runner/dist/index.js:1262:5)","timestamp":"2025-01-24T06:17:21.394Z"}
{"level":"info","message":"KeyManager service initialized with enhanced security","service":"middle-earth-agents","timestamp":"2025-01-24T06:17:21.395Z"}
{"level":"error","message":"Critical error retrieving keypair for agent test-agent-id Unsupported state or unable to authenticate data","service":"middle-earth-agents","stack":"Error: Unsupported state or unable to authenticate data\n    at Decipheriv.final (node:internal/crypto/cipher:184:29)\n    at KeyManager.decryptPrivateKey (/Users/ChukwukaUba/Desktop/middle-earth-agents/express-ts/src/deps/keyManager.ts:298:64)\n    at KeyManager.getKeypair (/Users/ChukwukaUba/Desktop/middle-earth-agents/express-ts/src/deps/keyManager.ts:114:38)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at /Users/ChukwukaUba/Desktop/middle-earth-agents/express-ts/src/deps/__tests__/keyManager.test.ts:88:22\n    at file:///Users/ChukwukaUba/Desktop/middle-earth-agents/express-ts/node_modules/.pnpm/@vitest+runner@2.1.8/node_modules/@vitest/runner/dist/index.js:533:5\n    at runTest (file:///Users/ChukwukaUba/Desktop/middle-earth-agents/express-ts/node_modules/.pnpm/@vitest+runner@2.1.8/node_modules/@vitest/runner/dist/index.js:1056:11)\n    at runSuite (file:///Users/ChukwukaUba/Desktop/middle-earth-agents/express-ts/node_modules/.pnpm/@vitest+runner@2.1.8/node_modules/@vitest/runner/dist/index.js:1205:15)\n    at runSuite (file:///Users/ChukwukaUba/Desktop/middle-earth-agents/express-ts/node_modules/.pnpm/@vitest+runner@2.1.8/node_modules/@vitest/runner/dist/index.js:1205:15)\n    at runSuite (file:///Users/ChukwukaUba/Desktop/middle-earth-agents/express-ts/node_modules/.pnpm/@vitest+runner@2.1.8/node_modules/@vitest/runner/dist/index.js:1205:15)","timestamp":"2025-01-24T06:17:21.454Z"}
{"level":"info","message":"KeyManager service initialized with enhanced security","service":"middle-earth-agents","timestamp":"2025-01-24T06:17:21.455Z"}
{"level":"error","message":"Critical error retrieving keypair for agent test-agent-id Database error","service":"middle-earth-agents","stack":"Error: Database error\n    at /Users/ChukwukaUba/Desktop/middle-earth-agents/express-ts/src/deps/__tests__/keyManager.test.ts:98:9\n    at file:///Users/ChukwukaUba/Desktop/middle-earth-agents/express-ts/node_modules/.pnpm/@vitest+runner@2.1.8/node_modules/@vitest/runner/dist/index.js:146:14\n    at file:///Users/ChukwukaUba/Desktop/middle-earth-agents/express-ts/node_modules/.pnpm/@vitest+runner@2.1.8/node_modules/@vitest/runner/dist/index.js:533:11\n    at runWithTimeout (file:///Users/ChukwukaUba/Desktop/middle-earth-agents/express-ts/node_modules/.pnpm/@vitest+runner@2.1.8/node_modules/@vitest/runner/dist/index.js:39:7)\n    at runTest (file:///Users/ChukwukaUba/Desktop/middle-earth-agents/express-ts/node_modules/.pnpm/@vitest+runner@2.1.8/node_modules/@vitest/runner/dist/index.js:1056:17)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at runSuite (file:///Users/ChukwukaUba/Desktop/middle-earth-agents/express-ts/node_modules/.pnpm/@vitest+runner@2.1.8/node_modules/@vitest/runner/dist/index.js:1205:15)\n    at runSuite (file:///Users/ChukwukaUba/Desktop/middle-earth-agents/express-ts/node_modules/.pnpm/@vitest+runner@2.1.8/node_modules/@vitest/runner/dist/index.js:1205:15)\n    at runSuite (file:///Users/ChukwukaUba/Desktop/middle-earth-agents/express-ts/node_modules/.pnpm/@vitest+runner@2.1.8/node_modules/@vitest/runner/dist/index.js:1205:15)\n    at runFiles (file:///Users/ChukwukaUba/Desktop/middle-earth-agents/express-ts/node_modules/.pnpm/@vitest+runner@2.1.8/node_modules/@vitest/runner/dist/index.js:1262:5)","timestamp":"2025-01-24T06:17:21.456Z"}
{"level":"info","message":"KeyManager service initialized with enhanced security","service":"middle-earth-agents","timestamp":"2025-01-24T06:17:21.457Z"}
{"level":"error","message":"Keypair generation failed for agent test-agent-id __vite_ssr_import_3__.prisma.$transaction is not a function","service":"middle-earth-agents","stack":"TypeError: __vite_ssr_import_3__.prisma.$transaction is not a function\n    at KeyManager.generateKeypair (/Users/ChukwukaUba/Desktop/middle-earth-agents/express-ts/src/deps/keyManager.ts:173:20)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at KeyManager.rotateKeypair (/Users/ChukwukaUba/Desktop/middle-earth-agents/express-ts/src/deps/keyManager.ts:214:27)\n    at /Users/ChukwukaUba/Desktop/middle-earth-agents/express-ts/src/deps/__tests__/keyManager.test.ts:114:7\n    at file:///Users/ChukwukaUba/Desktop/middle-earth-agents/express-ts/node_modules/.pnpm/@vitest+runner@2.1.8/node_modules/@vitest/runner/dist/index.js:533:5\n    at runTest (file:///Users/ChukwukaUba/Desktop/middle-earth-agents/express-ts/node_modules/.pnpm/@vitest+runner@2.1.8/node_modules/@vitest/runner/dist/index.js:1056:11)\n    at runSuite (file:///Users/ChukwukaUba/Desktop/middle-earth-agents/express-ts/node_modules/.pnpm/@vitest+runner@2.1.8/node_modules/@vitest/runner/dist/index.js:1205:15)\n    at runSuite (file:///Users/ChukwukaUba/Desktop/middle-earth-agents/express-ts/node_modules/.pnpm/@vitest+runner@2.1.8/node_modules/@vitest/runner/dist/index.js:1205:15)\n    at runSuite (file:///Users/ChukwukaUba/Desktop/middle-earth-agents/express-ts/node_modules/.pnpm/@vitest+runner@2.1.8/node_modules/@vitest/runner/dist/index.js:1205:15)\n    at runFiles (file:///Users/ChukwukaUba/Desktop/middle-earth-agents/express-ts/node_modules/.pnpm/@vitest+runner@2.1.8/node_modules/@vitest/runner/dist/index.js:1262:5)","timestamp":"2025-01-24T06:17:21.516Z"}
{"level":"error","message":"Keypair rotation failed for agent test-agent-id Failed to generate keypair: TypeError: __vite_ssr_import_3__.prisma.$transaction is not a function","name":"KeyManagementError","service":"middle-earth-agents","stack":"KeyManagementError: Failed to generate keypair: TypeError: __vite_ssr_import_3__.prisma.$transaction is not a function\n    at KeyManager.generateKeypair (/Users/ChukwukaUba/Desktop/middle-earth-agents/express-ts/src/deps/keyManager.ts:204:13)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at KeyManager.rotateKeypair (/Users/ChukwukaUba/Desktop/middle-earth-agents/express-ts/src/deps/keyManager.ts:214:27)\n    at /Users/ChukwukaUba/Desktop/middle-earth-agents/express-ts/src/deps/__tests__/keyManager.test.ts:114:7\n    at file:///Users/ChukwukaUba/Desktop/middle-earth-agents/express-ts/node_modules/.pnpm/@vitest+runner@2.1.8/node_modules/@vitest/runner/dist/index.js:533:5\n    at runTest (file:///Users/ChukwukaUba/Desktop/middle-earth-agents/express-ts/node_modules/.pnpm/@vitest+runner@2.1.8/node_modules/@vitest/runner/dist/index.js:1056:11)\n    at runSuite (file:///Users/ChukwukaUba/Desktop/middle-earth-agents/express-ts/node_modules/.pnpm/@vitest+runner@2.1.8/node_modules/@vitest/runner/dist/index.js:1205:15)\n    at runSuite (file:///Users/ChukwukaUba/Desktop/middle-earth-agents/express-ts/node_modules/.pnpm/@vitest+runner@2.1.8/node_modules/@vitest/runner/dist/index.js:1205:15)\n    at runSuite (file:///Users/ChukwukaUba/Desktop/middle-earth-agents/express-ts/node_modules/.pnpm/@vitest+runner@2.1.8/node_modules/@vitest/runner/dist/index.js:1205:15)\n    at runFiles (file:///Users/ChukwukaUba/Desktop/middle-earth-agents/express-ts/node_modules/.pnpm/@vitest+runner@2.1.8/node_modules/@vitest/runner/dist/index.js:1262:5)","timestamp":"2025-01-24T06:17:21.516Z"}
{"level":"info","message":"KeyManager service initialized with enhanced security","service":"middle-earth-agents","timestamp":"2025-01-24T06:17:21.519Z"}
{"level":"error","message":"Keypair rotation failed for agent test-agent-id Keypair rotation cooldown not elapsed","name":"KeyManagementError","service":"middle-earth-agents","stack":"KeyManagementError: Keypair rotation cooldown not elapsed\n    at KeyManager.enforceRotationCooldown (/Users/ChukwukaUba/Desktop/middle-earth-agents/express-ts/src/deps/keyManager.ts:235:15)\n    at KeyManager.rotateKeypair (/Users/ChukwukaUba/Desktop/middle-earth-agents/express-ts/src/deps/keyManager.ts:212:12)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at /Users/ChukwukaUba/Desktop/middle-earth-agents/express-ts/src/deps/__tests__/keyManager.test.ts:125:7\n    at file:///Users/ChukwukaUba/Desktop/middle-earth-agents/express-ts/node_modules/.pnpm/@vitest+runner@2.1.8/node_modules/@vitest/runner/dist/index.js:533:5\n    at runTest (file:///Users/ChukwukaUba/Desktop/middle-earth-agents/express-ts/node_modules/.pnpm/@vitest+runner@2.1.8/node_modules/@vitest/runner/dist/index.js:1056:11)\n    at runSuite (file:///Users/ChukwukaUba/Desktop/middle-earth-agents/express-ts/node_modules/.pnpm/@vitest+runner@2.1.8/node_modules/@vitest/runner/dist/index.js:1205:15)\n    at runSuite (file:///Users/ChukwukaUba/Desktop/middle-earth-agents/express-ts/node_modules/.pnpm/@vitest+runner@2.1.8/node_modules/@vitest/runner/dist/index.js:1205:15)\n    at runSuite (file:///Users/ChukwukaUba/Desktop/middle-earth-agents/express-ts/node_modules/.pnpm/@vitest+runner@2.1.8/node_modules/@vitest/runner/dist/index.js:1205:15)\n    at runFiles (file:///Users/ChukwukaUba/Desktop/middle-earth-agents/express-ts/node_modules/.pnpm/@vitest+runner@2.1.8/node_modules/@vitest/runner/dist/index.js:1262:5)","timestamp":"2025-01-24T06:17:21.519Z"}
{"level":"info","message":"KeyManager service initialized with enhanced security","service":"middle-earth-agents","timestamp":"2025-01-24T06:17:21.520Z"}
{"level":"info","message":"KeyManager service initialized with enhanced security","service":"middle-earth-agents","timestamp":"2025-01-24T06:17:21.520Z"}
{"level":"error","message":"Failed to retrieve public key for test-agent-id No keypair found for agent test-agent-id","name":"KeyManagementError","service":"middle-earth-agents","stack":"KeyManagementError: No keypair found for agent test-agent-id\n    at KeyManager.getPublicKey (/Users/ChukwukaUba/Desktop/middle-earth-agents/express-ts/src/deps/keyManager.ts:325:15)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)","timestamp":"2025-01-24T06:17:21.521Z"}
{"level":"info","message":"KeyManager service initialized with enhanced security","service":"middle-earth-agents","timestamp":"2025-01-24T06:17:21.521Z"}
{"level":"info","message":"KeyManager service initialized with enhanced security","service":"middle-earth-agents","timestamp":"2025-01-24T06:17:21.522Z"}
{"level":"error","message":"Encrypted private key retrieval failed for test-agent-id No keypair found for agent test-agent-id","name":"KeyManagementError","service":"middle-earth-agents","stack":"KeyManagementError: No keypair found for agent test-agent-id\n    at KeyManager.getEncryptedPrivateKey (/Users/ChukwukaUba/Desktop/middle-earth-agents/express-ts/src/deps/keyManager.ts:344:15)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)","timestamp":"2025-01-24T06:17:21.523Z"}
{"level":"info","message":"KeyManager service initialized with enhanced security","service":"middle-earth-agents","timestamp":"2025-01-24T06:17:48.444Z"}
{"level":"info","message":"KeyManager service initialized with enhanced security","service":"middle-earth-agents","timestamp":"2025-01-24T06:17:48.449Z"}
{"level":"info","message":"KeyManager service initialized with enhanced security","service":"middle-earth-agents","timestamp":"2025-01-24T06:17:48.451Z"}
{"level":"error","message":"Keypair generation failed for agent test-agent-id __vite_ssr_import_3__.prisma.$transaction is not a function","service":"middle-earth-agents","stack":"TypeError: __vite_ssr_import_3__.prisma.$transaction is not a function\n    at KeyManager.generateKeypair (/Users/ChukwukaUba/Desktop/middle-earth-agents/express-ts/src/deps/keyManager.ts:173:20)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at KeyManager.getKeypair (/Users/ChukwukaUba/Desktop/middle-earth-agents/express-ts/src/deps/keyManager.ts:127:27)\n    at /Users/ChukwukaUba/Desktop/middle-earth-agents/express-ts/src/deps/__tests__/keyManager.test.ts:72:22\n    at file:///Users/ChukwukaUba/Desktop/middle-earth-agents/express-ts/node_modules/.pnpm/@vitest+runner@2.1.8/node_modules/@vitest/runner/dist/index.js:533:5\n    at runTest (file:///Users/ChukwukaUba/Desktop/middle-earth-agents/express-ts/node_modules/.pnpm/@vitest+runner@2.1.8/node_modules/@vitest/runner/dist/index.js:1056:11)\n    at runSuite (file:///Users/ChukwukaUba/Desktop/middle-earth-agents/express-ts/node_modules/.pnpm/@vitest+runner@2.1.8/node_modules/@vitest/runner/dist/index.js:1205:15)\n    at runSuite (file:///Users/ChukwukaUba/Desktop/middle-earth-agents/express-ts/node_modules/.pnpm/@vitest+runner@2.1.8/node_modules/@vitest/runner/dist/index.js:1205:15)\n    at runSuite (file:///Users/ChukwukaUba/Desktop/middle-earth-agents/express-ts/node_modules/.pnpm/@vitest+runner@2.1.8/node_modules/@vitest/runner/dist/index.js:1205:15)\n    at runFiles (file:///Users/ChukwukaUba/Desktop/middle-earth-agents/express-ts/node_modules/.pnpm/@vitest+runner@2.1.8/node_modules/@vitest/runner/dist/index.js:1262:5)","timestamp":"2025-01-24T06:17:48.675Z"}
{"level":"error","message":"Critical error retrieving keypair for agent test-agent-id Failed to generate keypair: TypeError: __vite_ssr_import_3__.prisma.$transaction is not a function","name":"KeyManagementError","service":"middle-earth-agents","stack":"KeyManagementError: Failed to generate keypair: TypeError: __vite_ssr_import_3__.prisma.$transaction is not a function\n    at KeyManager.generateKeypair (/Users/ChukwukaUba/Desktop/middle-earth-agents/express-ts/src/deps/keyManager.ts:204:13)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at KeyManager.getKeypair (/Users/ChukwukaUba/Desktop/middle-earth-agents/express-ts/src/deps/keyManager.ts:127:27)\n    at /Users/ChukwukaUba/Desktop/middle-earth-agents/express-ts/src/deps/__tests__/keyManager.test.ts:72:22\n    at file:///Users/ChukwukaUba/Desktop/middle-earth-agents/express-ts/node_modules/.pnpm/@vitest+runner@2.1.8/node_modules/@vitest/runner/dist/index.js:533:5\n    at runTest (file:///Users/ChukwukaUba/Desktop/middle-earth-agents/express-ts/node_modules/.pnpm/@vitest+runner@2.1.8/node_modules/@vitest/runner/dist/index.js:1056:11)\n    at runSuite (file:///Users/ChukwukaUba/Desktop/middle-earth-agents/express-ts/node_modules/.pnpm/@vitest+runner@2.1.8/node_modules/@vitest/runner/dist/index.js:1205:15)\n    at runSuite (file:///Users/ChukwukaUba/Desktop/middle-earth-agents/express-ts/node_modules/.pnpm/@vitest+runner@2.1.8/node_modules/@vitest/runner/dist/index.js:1205:15)\n    at runSuite (file:///Users/ChukwukaUba/Desktop/middle-earth-agents/express-ts/node_modules/.pnpm/@vitest+runner@2.1.8/node_modules/@vitest/runner/dist/index.js:1205:15)\n    at runFiles (file:///Users/ChukwukaUba/Desktop/middle-earth-agents/express-ts/node_modules/.pnpm/@vitest+runner@2.1.8/node_modules/@vitest/runner/dist/index.js:1262:5)","timestamp":"2025-01-24T06:17:48.676Z"}
{"level":"info","message":"KeyManager service initialized with enhanced security","service":"middle-earth-agents","timestamp":"2025-01-24T06:17:48.678Z"}
{"level":"error","message":"Critical error retrieving keypair for agent test-agent-id Unsupported state or unable to authenticate data","service":"middle-earth-agents","stack":"Error: Unsupported state or unable to authenticate data\n    at Decipheriv.final (node:internal/crypto/cipher:184:29)\n    at KeyManager.decryptPrivateKey (/Users/ChukwukaUba/Desktop/middle-earth-agents/express-ts/src/deps/keyManager.ts:298:64)\n    at KeyManager.getKeypair (/Users/ChukwukaUba/Desktop/middle-earth-agents/express-ts/src/deps/keyManager.ts:114:38)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at /Users/ChukwukaUba/Desktop/middle-earth-agents/express-ts/src/deps/__tests__/keyManager.test.ts:88:22\n    at file:///Users/ChukwukaUba/Desktop/middle-earth-agents/express-ts/node_modules/.pnpm/@vitest+runner@2.1.8/node_modules/@vitest/runner/dist/index.js:533:5\n    at runTest (file:///Users/ChukwukaUba/Desktop/middle-earth-agents/express-ts/node_modules/.pnpm/@vitest+runner@2.1.8/node_modules/@vitest/runner/dist/index.js:1056:11)\n    at runSuite (file:///Users/ChukwukaUba/Desktop/middle-earth-agents/express-ts/node_modules/.pnpm/@vitest+runner@2.1.8/node_modules/@vitest/runner/dist/index.js:1205:15)\n    at runSuite (file:///Users/ChukwukaUba/Desktop/middle-earth-agents/express-ts/node_modules/.pnpm/@vitest+runner@2.1.8/node_modules/@vitest/runner/dist/index.js:1205:15)\n    at runSuite (file:///Users/ChukwukaUba/Desktop/middle-earth-agents/express-ts/node_modules/.pnpm/@vitest+runner@2.1.8/node_modules/@vitest/runner/dist/index.js:1205:15)","timestamp":"2025-01-24T06:17:48.777Z"}
{"level":"info","message":"KeyManager service initialized with enhanced security","service":"middle-earth-agents","timestamp":"2025-01-24T06:17:48.779Z"}
{"level":"error","message":"Critical error retrieving keypair for agent test-agent-id Database error","service":"middle-earth-agents","stack":"Error: Database error\n    at /Users/ChukwukaUba/Desktop/middle-earth-agents/express-ts/src/deps/__tests__/keyManager.test.ts:98:9\n    at file:///Users/ChukwukaUba/Desktop/middle-earth-agents/express-ts/node_modules/.pnpm/@vitest+runner@2.1.8/node_modules/@vitest/runner/dist/index.js:146:14\n    at file:///Users/ChukwukaUba/Desktop/middle-earth-agents/express-ts/node_modules/.pnpm/@vitest+runner@2.1.8/node_modules/@vitest/runner/dist/index.js:533:11\n    at runWithTimeout (file:///Users/ChukwukaUba/Desktop/middle-earth-agents/express-ts/node_modules/.pnpm/@vitest+runner@2.1.8/node_modules/@vitest/runner/dist/index.js:39:7)\n    at runTest (file:///Users/ChukwukaUba/Desktop/middle-earth-agents/express-ts/node_modules/.pnpm/@vitest+runner@2.1.8/node_modules/@vitest/runner/dist/index.js:1056:17)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at runSuite (file:///Users/ChukwukaUba/Desktop/middle-earth-agents/express-ts/node_modules/.pnpm/@vitest+runner@2.1.8/node_modules/@vitest/runner/dist/index.js:1205:15)\n    at runSuite (file:///Users/ChukwukaUba/Desktop/middle-earth-agents/express-ts/node_modules/.pnpm/@vitest+runner@2.1.8/node_modules/@vitest/runner/dist/index.js:1205:15)\n    at runSuite (file:///Users/ChukwukaUba/Desktop/middle-earth-agents/express-ts/node_modules/.pnpm/@vitest+runner@2.1.8/node_modules/@vitest/runner/dist/index.js:1205:15)\n    at runFiles (file:///Users/ChukwukaUba/Desktop/middle-earth-agents/express-ts/node_modules/.pnpm/@vitest+runner@2.1.8/node_modules/@vitest/runner/dist/index.js:1262:5)","timestamp":"2025-01-24T06:17:48.780Z"}
{"level":"info","message":"KeyManager service initialized with enhanced security","service":"middle-earth-agents","timestamp":"2025-01-24T06:17:48.782Z"}
{"level":"error","message":"Keypair generation failed for agent test-agent-id __vite_ssr_import_3__.prisma.$transaction is not a function","service":"middle-earth-agents","stack":"TypeError: __vite_ssr_import_3__.prisma.$transaction is not a function\n    at KeyManager.generateKeypair (/Users/ChukwukaUba/Desktop/middle-earth-agents/express-ts/src/deps/keyManager.ts:173:20)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at KeyManager.rotateKeypair (/Users/ChukwukaUba/Desktop/middle-earth-agents/express-ts/src/deps/keyManager.ts:214:27)\n    at /Users/ChukwukaUba/Desktop/middle-earth-agents/express-ts/src/deps/__tests__/keyManager.test.ts:114:7\n    at file:///Users/ChukwukaUba/Desktop/middle-earth-agents/express-ts/node_modules/.pnpm/@vitest+runner@2.1.8/node_modules/@vitest/runner/dist/index.js:533:5\n    at runTest (file:///Users/ChukwukaUba/Desktop/middle-earth-agents/express-ts/node_modules/.pnpm/@vitest+runner@2.1.8/node_modules/@vitest/runner/dist/index.js:1056:11)\n    at runSuite (file:///Users/ChukwukaUba/Desktop/middle-earth-agents/express-ts/node_modules/.pnpm/@vitest+runner@2.1.8/node_modules/@vitest/runner/dist/index.js:1205:15)\n    at runSuite (file:///Users/ChukwukaUba/Desktop/middle-earth-agents/express-ts/node_modules/.pnpm/@vitest+runner@2.1.8/node_modules/@vitest/runner/dist/index.js:1205:15)\n    at runSuite (file:///Users/ChukwukaUba/Desktop/middle-earth-agents/express-ts/node_modules/.pnpm/@vitest+runner@2.1.8/node_modules/@vitest/runner/dist/index.js:1205:15)\n    at runFiles (file:///Users/ChukwukaUba/Desktop/middle-earth-agents/express-ts/node_modules/.pnpm/@vitest+runner@2.1.8/node_modules/@vitest/runner/dist/index.js:1262:5)","timestamp":"2025-01-24T06:17:48.876Z"}
{"level":"error","message":"Keypair rotation failed for agent test-agent-id Failed to generate keypair: TypeError: __vite_ssr_import_3__.prisma.$transaction is not a function","name":"KeyManagementError","service":"middle-earth-agents","stack":"KeyManagementError: Failed to generate keypair: TypeError: __vite_ssr_import_3__.prisma.$transaction is not a function\n    at KeyManager.generateKeypair (/Users/ChukwukaUba/Desktop/middle-earth-agents/express-ts/src/deps/keyManager.ts:204:13)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at KeyManager.rotateKeypair (/Users/ChukwukaUba/Desktop/middle-earth-agents/express-ts/src/deps/keyManager.ts:214:27)\n    at /Users/ChukwukaUba/Desktop/middle-earth-agents/express-ts/src/deps/__tests__/keyManager.test.ts:114:7\n    at file:///Users/ChukwukaUba/Desktop/middle-earth-agents/express-ts/node_modules/.pnpm/@vitest+runner@2.1.8/node_modules/@vitest/runner/dist/index.js:533:5\n    at runTest (file:///Users/ChukwukaUba/Desktop/middle-earth-agents/express-ts/node_modules/.pnpm/@vitest+runner@2.1.8/node_modules/@vitest/runner/dist/index.js:1056:11)\n    at runSuite (file:///Users/ChukwukaUba/Desktop/middle-earth-agents/express-ts/node_modules/.pnpm/@vitest+runner@2.1.8/node_modules/@vitest/runner/dist/index.js:1205:15)\n    at runSuite (file:///Users/ChukwukaUba/Desktop/middle-earth-agents/express-ts/node_modules/.pnpm/@vitest+runner@2.1.8/node_modules/@vitest/runner/dist/index.js:1205:15)\n    at runSuite (file:///Users/ChukwukaUba/Desktop/middle-earth-agents/express-ts/node_modules/.pnpm/@vitest+runner@2.1.8/node_modules/@vitest/runner/dist/index.js:1205:15)\n    at runFiles (file:///Users/ChukwukaUba/Desktop/middle-earth-agents/express-ts/node_modules/.pnpm/@vitest+runner@2.1.8/node_modules/@vitest/runner/dist/index.js:1262:5)","timestamp":"2025-01-24T06:17:48.877Z"}
{"level":"info","message":"KeyManager service initialized with enhanced security","service":"middle-earth-agents","timestamp":"2025-01-24T06:17:48.879Z"}
{"level":"error","message":"Keypair rotation failed for agent test-agent-id Keypair rotation cooldown not elapsed","name":"KeyManagementError","service":"middle-earth-agents","stack":"KeyManagementError: Keypair rotation cooldown not elapsed\n    at KeyManager.enforceRotationCooldown (/Users/ChukwukaUba/Desktop/middle-earth-agents/express-ts/src/deps/keyManager.ts:235:15)\n    at KeyManager.rotateKeypair (/Users/ChukwukaUba/Desktop/middle-earth-agents/express-ts/src/deps/keyManager.ts:212:12)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at /Users/ChukwukaUba/Desktop/middle-earth-agents/express-ts/src/deps/__tests__/keyManager.test.ts:125:7\n    at file:///Users/ChukwukaUba/Desktop/middle-earth-agents/express-ts/node_modules/.pnpm/@vitest+runner@2.1.8/node_modules/@vitest/runner/dist/index.js:533:5\n    at runTest (file:///Users/ChukwukaUba/Desktop/middle-earth-agents/express-ts/node_modules/.pnpm/@vitest+runner@2.1.8/node_modules/@vitest/runner/dist/index.js:1056:11)\n    at runSuite (file:///Users/ChukwukaUba/Desktop/middle-earth-agents/express-ts/node_modules/.pnpm/@vitest+runner@2.1.8/node_modules/@vitest/runner/dist/index.js:1205:15)\n    at runSuite (file:///Users/ChukwukaUba/Desktop/middle-earth-agents/express-ts/node_modules/.pnpm/@vitest+runner@2.1.8/node_modules/@vitest/runner/dist/index.js:1205:15)\n    at runSuite (file:///Users/ChukwukaUba/Desktop/middle-earth-agents/express-ts/node_modules/.pnpm/@vitest+runner@2.1.8/node_modules/@vitest/runner/dist/index.js:1205:15)\n    at runFiles (file:///Users/ChukwukaUba/Desktop/middle-earth-agents/express-ts/node_modules/.pnpm/@vitest+runner@2.1.8/node_modules/@vitest/runner/dist/index.js:1262:5)","timestamp":"2025-01-24T06:17:48.880Z"}
{"level":"info","message":"KeyManager service initialized with enhanced security","service":"middle-earth-agents","timestamp":"2025-01-24T06:17:48.880Z"}
{"level":"info","message":"KeyManager service initialized with enhanced security","service":"middle-earth-agents","timestamp":"2025-01-24T06:17:48.881Z"}
{"level":"error","message":"Failed to retrieve public key for test-agent-id No keypair found for agent test-agent-id","name":"KeyManagementError","service":"middle-earth-agents","stack":"KeyManagementError: No keypair found for agent test-agent-id\n    at KeyManager.getPublicKey (/Users/ChukwukaUba/Desktop/middle-earth-agents/express-ts/src/deps/keyManager.ts:325:15)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)","timestamp":"2025-01-24T06:17:48.882Z"}
{"level":"info","message":"KeyManager service initialized with enhanced security","service":"middle-earth-agents","timestamp":"2025-01-24T06:17:48.882Z"}
{"level":"info","message":"KeyManager service initialized with enhanced security","service":"middle-earth-agents","timestamp":"2025-01-24T06:17:48.884Z"}
{"level":"error","message":"Encrypted private key retrieval failed for test-agent-id No keypair found for agent test-agent-id","name":"KeyManagementError","service":"middle-earth-agents","stack":"KeyManagementError: No keypair found for agent test-agent-id\n    at KeyManager.getEncryptedPrivateKey (/Users/ChukwukaUba/Desktop/middle-earth-agents/express-ts/src/deps/keyManager.ts:344:15)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)","timestamp":"2025-01-24T06:17:48.885Z"}
{"level":"info","message":"KeyManager service initialized with enhanced security","service":"middle-earth-agents","timestamp":"2025-01-24T06:19:54.758Z"}
{"level":"info","message":"KeyManager service initialized with enhanced security","service":"middle-earth-agents","timestamp":"2025-01-24T06:19:54.760Z"}
{"level":"info","message":"KeyManager service initialized with enhanced security","service":"middle-earth-agents","timestamp":"2025-01-24T06:19:54.762Z"}
{"level":"error","message":"Keypair generation failed for agent test-agent-id __vite_ssr_import_3__.prisma.$transaction is not a function","service":"middle-earth-agents","stack":"TypeError: __vite_ssr_import_3__.prisma.$transaction is not a function\n    at KeyManager.generateKeypair (/Users/ChukwukaUba/Desktop/middle-earth-agents/express-ts/src/deps/keyManager.ts:173:20)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at KeyManager.getKeypair (/Users/ChukwukaUba/Desktop/middle-earth-agents/express-ts/src/deps/keyManager.ts:127:27)\n    at /Users/ChukwukaUba/Desktop/middle-earth-agents/express-ts/src/deps/__tests__/keyManager.test.ts:72:22\n    at file:///Users/ChukwukaUba/Desktop/middle-earth-agents/express-ts/node_modules/.pnpm/@vitest+runner@2.1.8/node_modules/@vitest/runner/dist/index.js:533:5\n    at runTest (file:///Users/ChukwukaUba/Desktop/middle-earth-agents/express-ts/node_modules/.pnpm/@vitest+runner@2.1.8/node_modules/@vitest/runner/dist/index.js:1056:11)\n    at runSuite (file:///Users/ChukwukaUba/Desktop/middle-earth-agents/express-ts/node_modules/.pnpm/@vitest+runner@2.1.8/node_modules/@vitest/runner/dist/index.js:1205:15)\n    at runSuite (file:///Users/ChukwukaUba/Desktop/middle-earth-agents/express-ts/node_modules/.pnpm/@vitest+runner@2.1.8/node_modules/@vitest/runner/dist/index.js:1205:15)\n    at runSuite (file:///Users/ChukwukaUba/Desktop/middle-earth-agents/express-ts/node_modules/.pnpm/@vitest+runner@2.1.8/node_modules/@vitest/runner/dist/index.js:1205:15)\n    at runFiles (file:///Users/ChukwukaUba/Desktop/middle-earth-agents/express-ts/node_modules/.pnpm/@vitest+runner@2.1.8/node_modules/@vitest/runner/dist/index.js:1262:5)","timestamp":"2025-01-24T06:19:54.873Z"}
{"level":"error","message":"Critical error retrieving keypair for agent test-agent-id Failed to generate keypair: TypeError: __vite_ssr_import_3__.prisma.$transaction is not a function","name":"KeyManagementError","service":"middle-earth-agents","stack":"KeyManagementError: Failed to generate keypair: TypeError: __vite_ssr_import_3__.prisma.$transaction is not a function\n    at KeyManager.generateKeypair (/Users/ChukwukaUba/Desktop/middle-earth-agents/express-ts/src/deps/keyManager.ts:204:13)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at KeyManager.getKeypair (/Users/ChukwukaUba/Desktop/middle-earth-agents/express-ts/src/deps/keyManager.ts:127:27)\n    at /Users/ChukwukaUba/Desktop/middle-earth-agents/express-ts/src/deps/__tests__/keyManager.test.ts:72:22\n    at file:///Users/ChukwukaUba/Desktop/middle-earth-agents/express-ts/node_modules/.pnpm/@vitest+runner@2.1.8/node_modules/@vitest/runner/dist/index.js:533:5\n    at runTest (file:///Users/ChukwukaUba/Desktop/middle-earth-agents/express-ts/node_modules/.pnpm/@vitest+runner@2.1.8/node_modules/@vitest/runner/dist/index.js:1056:11)\n    at runSuite (file:///Users/ChukwukaUba/Desktop/middle-earth-agents/express-ts/node_modules/.pnpm/@vitest+runner@2.1.8/node_modules/@vitest/runner/dist/index.js:1205:15)\n    at runSuite (file:///Users/ChukwukaUba/Desktop/middle-earth-agents/express-ts/node_modules/.pnpm/@vitest+runner@2.1.8/node_modules/@vitest/runner/dist/index.js:1205:15)\n    at runSuite (file:///Users/ChukwukaUba/Desktop/middle-earth-agents/express-ts/node_modules/.pnpm/@vitest+runner@2.1.8/node_modules/@vitest/runner/dist/index.js:1205:15)\n    at runFiles (file:///Users/ChukwukaUba/Desktop/middle-earth-agents/express-ts/node_modules/.pnpm/@vitest+runner@2.1.8/node_modules/@vitest/runner/dist/index.js:1262:5)","timestamp":"2025-01-24T06:19:54.874Z"}
{"level":"info","message":"KeyManager service initialized with enhanced security","service":"middle-earth-agents","timestamp":"2025-01-24T06:19:54.875Z"}
{"level":"error","message":"Critical error retrieving keypair for agent test-agent-id Unsupported state or unable to authenticate data","service":"middle-earth-agents","stack":"Error: Unsupported state or unable to authenticate data\n    at Decipheriv.final (node:internal/crypto/cipher:184:29)\n    at KeyManager.decryptPrivateKey (/Users/ChukwukaUba/Desktop/middle-earth-agents/express-ts/src/deps/keyManager.ts:298:64)\n    at KeyManager.getKeypair (/Users/ChukwukaUba/Desktop/middle-earth-agents/express-ts/src/deps/keyManager.ts:114:38)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at /Users/ChukwukaUba/Desktop/middle-earth-agents/express-ts/src/deps/__tests__/keyManager.test.ts:88:22\n    at file:///Users/ChukwukaUba/Desktop/middle-earth-agents/express-ts/node_modules/.pnpm/@vitest+runner@2.1.8/node_modules/@vitest/runner/dist/index.js:533:5\n    at runTest (file:///Users/ChukwukaUba/Desktop/middle-earth-agents/express-ts/node_modules/.pnpm/@vitest+runner@2.1.8/node_modules/@vitest/runner/dist/index.js:1056:11)\n    at runSuite (file:///Users/ChukwukaUba/Desktop/middle-earth-agents/express-ts/node_modules/.pnpm/@vitest+runner@2.1.8/node_modules/@vitest/runner/dist/index.js:1205:15)\n    at runSuite (file:///Users/ChukwukaUba/Desktop/middle-earth-agents/express-ts/node_modules/.pnpm/@vitest+runner@2.1.8/node_modules/@vitest/runner/dist/index.js:1205:15)\n    at runSuite (file:///Users/ChukwukaUba/Desktop/middle-earth-agents/express-ts/node_modules/.pnpm/@vitest+runner@2.1.8/node_modules/@vitest/runner/dist/index.js:1205:15)","timestamp":"2025-01-24T06:19:54.935Z"}
{"level":"info","message":"KeyManager service initialized with enhanced security","service":"middle-earth-agents","timestamp":"2025-01-24T06:19:54.935Z"}
{"level":"error","message":"Critical error retrieving keypair for agent test-agent-id Database error","service":"middle-earth-agents","stack":"Error: Database error\n    at /Users/ChukwukaUba/Desktop/middle-earth-agents/express-ts/src/deps/__tests__/keyManager.test.ts:98:9\n    at file:///Users/ChukwukaUba/Desktop/middle-earth-agents/express-ts/node_modules/.pnpm/@vitest+runner@2.1.8/node_modules/@vitest/runner/dist/index.js:146:14\n    at file:///Users/ChukwukaUba/Desktop/middle-earth-agents/express-ts/node_modules/.pnpm/@vitest+runner@2.1.8/node_modules/@vitest/runner/dist/index.js:533:11\n    at runWithTimeout (file:///Users/ChukwukaUba/Desktop/middle-earth-agents/express-ts/node_modules/.pnpm/@vitest+runner@2.1.8/node_modules/@vitest/runner/dist/index.js:39:7)\n    at runTest (file:///Users/ChukwukaUba/Desktop/middle-earth-agents/express-ts/node_modules/.pnpm/@vitest+runner@2.1.8/node_modules/@vitest/runner/dist/index.js:1056:17)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at runSuite (file:///Users/ChukwukaUba/Desktop/middle-earth-agents/express-ts/node_modules/.pnpm/@vitest+runner@2.1.8/node_modules/@vitest/runner/dist/index.js:1205:15)\n    at runSuite (file:///Users/ChukwukaUba/Desktop/middle-earth-agents/express-ts/node_modules/.pnpm/@vitest+runner@2.1.8/node_modules/@vitest/runner/dist/index.js:1205:15)\n    at runSuite (file:///Users/ChukwukaUba/Desktop/middle-earth-agents/express-ts/node_modules/.pnpm/@vitest+runner@2.1.8/node_modules/@vitest/runner/dist/index.js:1205:15)\n    at runFiles (file:///Users/ChukwukaUba/Desktop/middle-earth-agents/express-ts/node_modules/.pnpm/@vitest+runner@2.1.8/node_modules/@vitest/runner/dist/index.js:1262:5)","timestamp":"2025-01-24T06:19:54.936Z"}
{"level":"info","message":"KeyManager service initialized with enhanced security","service":"middle-earth-agents","timestamp":"2025-01-24T06:19:54.937Z"}
{"level":"error","message":"Keypair generation failed for agent test-agent-id __vite_ssr_import_3__.prisma.$transaction is not a function","service":"middle-earth-agents","stack":"TypeError: __vite_ssr_import_3__.prisma.$transaction is not a function\n    at KeyManager.generateKeypair (/Users/ChukwukaUba/Desktop/middle-earth-agents/express-ts/src/deps/keyManager.ts:173:20)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at KeyManager.rotateKeypair (/Users/ChukwukaUba/Desktop/middle-earth-agents/express-ts/src/deps/keyManager.ts:214:27)\n    at /Users/ChukwukaUba/Desktop/middle-earth-agents/express-ts/src/deps/__tests__/keyManager.test.ts:114:7\n    at file:///Users/ChukwukaUba/Desktop/middle-earth-agents/express-ts/node_modules/.pnpm/@vitest+runner@2.1.8/node_modules/@vitest/runner/dist/index.js:533:5\n    at runTest (file:///Users/ChukwukaUba/Desktop/middle-earth-agents/express-ts/node_modules/.pnpm/@vitest+runner@2.1.8/node_modules/@vitest/runner/dist/index.js:1056:11)\n    at runSuite (file:///Users/ChukwukaUba/Desktop/middle-earth-agents/express-ts/node_modules/.pnpm/@vitest+runner@2.1.8/node_modules/@vitest/runner/dist/index.js:1205:15)\n    at runSuite (file:///Users/ChukwukaUba/Desktop/middle-earth-agents/express-ts/node_modules/.pnpm/@vitest+runner@2.1.8/node_modules/@vitest/runner/dist/index.js:1205:15)\n    at runSuite (file:///Users/ChukwukaUba/Desktop/middle-earth-agents/express-ts/node_modules/.pnpm/@vitest+runner@2.1.8/node_modules/@vitest/runner/dist/index.js:1205:15)\n    at runFiles (file:///Users/ChukwukaUba/Desktop/middle-earth-agents/express-ts/node_modules/.pnpm/@vitest+runner@2.1.8/node_modules/@vitest/runner/dist/index.js:1262:5)","timestamp":"2025-01-24T06:19:54.997Z"}
{"level":"error","message":"Keypair rotation failed for agent test-agent-id Failed to generate keypair: TypeError: __vite_ssr_import_3__.prisma.$transaction is not a function","name":"KeyManagementError","service":"middle-earth-agents","stack":"KeyManagementError: Failed to generate keypair: TypeError: __vite_ssr_import_3__.prisma.$transaction is not a function\n    at KeyManager.generateKeypair (/Users/ChukwukaUba/Desktop/middle-earth-agents/express-ts/src/deps/keyManager.ts:204:13)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at KeyManager.rotateKeypair (/Users/ChukwukaUba/Desktop/middle-earth-agents/express-ts/src/deps/keyManager.ts:214:27)\n    at /Users/ChukwukaUba/Desktop/middle-earth-agents/express-ts/src/deps/__tests__/keyManager.test.ts:114:7\n    at file:///Users/ChukwukaUba/Desktop/middle-earth-agents/express-ts/node_modules/.pnpm/@vitest+runner@2.1.8/node_modules/@vitest/runner/dist/index.js:533:5\n    at runTest (file:///Users/ChukwukaUba/Desktop/middle-earth-agents/express-ts/node_modules/.pnpm/@vitest+runner@2.1.8/node_modules/@vitest/runner/dist/index.js:1056:11)\n    at runSuite (file:///Users/ChukwukaUba/Desktop/middle-earth-agents/express-ts/node_modules/.pnpm/@vitest+runner@2.1.8/node_modules/@vitest/runner/dist/index.js:1205:15)\n    at runSuite (file:///Users/ChukwukaUba/Desktop/middle-earth-agents/express-ts/node_modules/.pnpm/@vitest+runner@2.1.8/node_modules/@vitest/runner/dist/index.js:1205:15)\n    at runSuite (file:///Users/ChukwukaUba/Desktop/middle-earth-agents/express-ts/node_modules/.pnpm/@vitest+runner@2.1.8/node_modules/@vitest/runner/dist/index.js:1205:15)\n    at runFiles (file:///Users/ChukwukaUba/Desktop/middle-earth-agents/express-ts/node_modules/.pnpm/@vitest+runner@2.1.8/node_modules/@vitest/runner/dist/index.js:1262:5)","timestamp":"2025-01-24T06:19:54.997Z"}
{"level":"info","message":"KeyManager service initialized with enhanced security","service":"middle-earth-agents","timestamp":"2025-01-24T06:19:55.000Z"}
{"level":"error","message":"Keypair rotation failed for agent test-agent-id Keypair rotation cooldown not elapsed","name":"KeyManagementError","service":"middle-earth-agents","stack":"KeyManagementError: Keypair rotation cooldown not elapsed\n    at KeyManager.enforceRotationCooldown (/Users/ChukwukaUba/Desktop/middle-earth-agents/express-ts/src/deps/keyManager.ts:235:15)\n    at KeyManager.rotateKeypair (/Users/ChukwukaUba/Desktop/middle-earth-agents/express-ts/src/deps/keyManager.ts:212:12)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at /Users/ChukwukaUba/Desktop/middle-earth-agents/express-ts/src/deps/__tests__/keyManager.test.ts:125:7\n    at file:///Users/ChukwukaUba/Desktop/middle-earth-agents/express-ts/node_modules/.pnpm/@vitest+runner@2.1.8/node_modules/@vitest/runner/dist/index.js:533:5\n    at runTest (file:///Users/ChukwukaUba/Desktop/middle-earth-agents/express-ts/node_modules/.pnpm/@vitest+runner@2.1.8/node_modules/@vitest/runner/dist/index.js:1056:11)\n    at runSuite (file:///Users/ChukwukaUba/Desktop/middle-earth-agents/express-ts/node_modules/.pnpm/@vitest+runner@2.1.8/node_modules/@vitest/runner/dist/index.js:1205:15)\n    at runSuite (file:///Users/ChukwukaUba/Desktop/middle-earth-agents/express-ts/node_modules/.pnpm/@vitest+runner@2.1.8/node_modules/@vitest/runner/dist/index.js:1205:15)\n    at runSuite (file:///Users/ChukwukaUba/Desktop/middle-earth-agents/express-ts/node_modules/.pnpm/@vitest+runner@2.1.8/node_modules/@vitest/runner/dist/index.js:1205:15)\n    at runFiles (file:///Users/ChukwukaUba/Desktop/middle-earth-agents/express-ts/node_modules/.pnpm/@vitest+runner@2.1.8/node_modules/@vitest/runner/dist/index.js:1262:5)","timestamp":"2025-01-24T06:19:55.000Z"}
{"level":"info","message":"KeyManager service initialized with enhanced security","service":"middle-earth-agents","timestamp":"2025-01-24T06:19:55.001Z"}
{"level":"info","message":"KeyManager service initialized with enhanced security","service":"middle-earth-agents","timestamp":"2025-01-24T06:19:55.001Z"}
{"level":"error","message":"Failed to retrieve public key for test-agent-id No keypair found for agent test-agent-id","name":"KeyManagementError","service":"middle-earth-agents","stack":"KeyManagementError: No keypair found for agent test-agent-id\n    at KeyManager.getPublicKey (/Users/ChukwukaUba/Desktop/middle-earth-agents/express-ts/src/deps/keyManager.ts:325:15)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)","timestamp":"2025-01-24T06:19:55.001Z"}
{"level":"info","message":"KeyManager service initialized with enhanced security","service":"middle-earth-agents","timestamp":"2025-01-24T06:19:55.002Z"}
{"level":"info","message":"KeyManager service initialized with enhanced security","service":"middle-earth-agents","timestamp":"2025-01-24T06:19:55.003Z"}
{"level":"error","message":"Encrypted private key retrieval failed for test-agent-id No keypair found for agent test-agent-id","name":"KeyManagementError","service":"middle-earth-agents","stack":"KeyManagementError: No keypair found for agent test-agent-id\n    at KeyManager.getEncryptedPrivateKey (/Users/ChukwukaUba/Desktop/middle-earth-agents/express-ts/src/deps/keyManager.ts:344:15)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)","timestamp":"2025-01-24T06:19:55.003Z"}
{"level":"info","message":"KeyManager service initialized with enhanced security","service":"middle-earth-agents","timestamp":"2025-01-24T06:23:35.486Z"}
{"level":"info","message":"KeyManager service initialized with enhanced security","service":"middle-earth-agents","timestamp":"2025-01-24T06:23:35.490Z"}
{"level":"info","message":"KeyManager service initialized with enhanced security","service":"middle-earth-agents","timestamp":"2025-01-24T06:23:35.491Z"}
{"level":"info","message":"Keypair cached for agent test-agent-id","service":"middle-earth-agents","timestamp":"2025-01-24T06:23:35.555Z"}
{"level":"info","message":"Generated new keypair for agent test-agent-id","publicKey":"mock-public-key","service":"middle-earth-agents","timestamp":"2025-01-24T06:23:35.555Z"}
{"level":"info","message":"KeyManager service initialized with enhanced security","service":"middle-earth-agents","timestamp":"2025-01-24T06:23:35.558Z"}
{"code":"ERR_CRYPTO_INVALID_AUTH_TAG","level":"error","message":"Critical error retrieving keypair for agent test-agent-id Invalid authentication tag length: 32","service":"middle-earth-agents","stack":"TypeError: Invalid authentication tag length: 32\n    at Decipheriv.setAuthTag (node:internal/crypto/cipher:211:22)\n    at KeyManager.decryptPrivateKey (/Users/ChukwukaUba/Desktop/middle-earth-agents/express-ts/src/deps/keyManager.ts:297:14)\n    at KeyManager.getKeypair (/Users/ChukwukaUba/Desktop/middle-earth-agents/express-ts/src/deps/keyManager.ts:114:38)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at /Users/ChukwukaUba/Desktop/middle-earth-agents/express-ts/src/deps/__tests__/keyManager.test.ts:111:22\n    at file:///Users/ChukwukaUba/Desktop/middle-earth-agents/express-ts/node_modules/.pnpm/@vitest+runner@2.1.8/node_modules/@vitest/runner/dist/index.js:533:5\n    at runTest (file:///Users/ChukwukaUba/Desktop/middle-earth-agents/express-ts/node_modules/.pnpm/@vitest+runner@2.1.8/node_modules/@vitest/runner/dist/index.js:1056:11)\n    at runSuite (file:///Users/ChukwukaUba/Desktop/middle-earth-agents/express-ts/node_modules/.pnpm/@vitest+runner@2.1.8/node_modules/@vitest/runner/dist/index.js:1205:15)\n    at runSuite (file:///Users/ChukwukaUba/Desktop/middle-earth-agents/express-ts/node_modules/.pnpm/@vitest+runner@2.1.8/node_modules/@vitest/runner/dist/index.js:1205:15)\n    at runSuite (file:///Users/ChukwukaUba/Desktop/middle-earth-agents/express-ts/node_modules/.pnpm/@vitest+runner@2.1.8/node_modules/@vitest/runner/dist/index.js:1205:15)","timestamp":"2025-01-24T06:23:35.622Z"}
{"level":"info","message":"KeyManager service initialized with enhanced security","service":"middle-earth-agents","timestamp":"2025-01-24T06:23:35.623Z"}
{"level":"error","message":"Critical error retrieving keypair for agent test-agent-id Database error","service":"middle-earth-agents","stack":"Error: Database error\n    at /Users/ChukwukaUba/Desktop/middle-earth-agents/express-ts/src/deps/__tests__/keyManager.test.ts:121:9\n    at file:///Users/ChukwukaUba/Desktop/middle-earth-agents/express-ts/node_modules/.pnpm/@vitest+runner@2.1.8/node_modules/@vitest/runner/dist/index.js:146:14\n    at file:///Users/ChukwukaUba/Desktop/middle-earth-agents/express-ts/node_modules/.pnpm/@vitest+runner@2.1.8/node_modules/@vitest/runner/dist/index.js:533:11\n    at runWithTimeout (file:///Users/ChukwukaUba/Desktop/middle-earth-agents/express-ts/node_modules/.pnpm/@vitest+runner@2.1.8/node_modules/@vitest/runner/dist/index.js:39:7)\n    at runTest (file:///Users/ChukwukaUba/Desktop/middle-earth-agents/express-ts/node_modules/.pnpm/@vitest+runner@2.1.8/node_modules/@vitest/runner/dist/index.js:1056:17)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at runSuite (file:///Users/ChukwukaUba/Desktop/middle-earth-agents/express-ts/node_modules/.pnpm/@vitest+runner@2.1.8/node_modules/@vitest/runner/dist/index.js:1205:15)\n    at runSuite (file:///Users/ChukwukaUba/Desktop/middle-earth-agents/express-ts/node_modules/.pnpm/@vitest+runner@2.1.8/node_modules/@vitest/runner/dist/index.js:1205:15)\n    at runSuite (file:///Users/ChukwukaUba/Desktop/middle-earth-agents/express-ts/node_modules/.pnpm/@vitest+runner@2.1.8/node_modules/@vitest/runner/dist/index.js:1205:15)\n    at runFiles (file:///Users/ChukwukaUba/Desktop/middle-earth-agents/express-ts/node_modules/.pnpm/@vitest+runner@2.1.8/node_modules/@vitest/runner/dist/index.js:1262:5)","timestamp":"2025-01-24T06:23:35.624Z"}
{"level":"info","message":"KeyManager service initialized with enhanced security","service":"middle-earth-agents","timestamp":"2025-01-24T06:23:35.625Z"}
{"level":"info","message":"Keypair cached for agent test-agent-id","service":"middle-earth-agents","timestamp":"2025-01-24T06:23:35.685Z"}
{"level":"info","message":"Generated new keypair for agent test-agent-id","publicKey":"mock-public-key","service":"middle-earth-agents","timestamp":"2025-01-24T06:23:35.685Z"}
{"level":"info","message":"Keypair rotated successfully for agent test-agent-id","newPublicKey":"mock-public-key","service":"middle-earth-agents","timestamp":"2025-01-24T06:23:35.685Z"}
{"level":"info","message":"KeyManager service initialized with enhanced security","service":"middle-earth-agents","timestamp":"2025-01-24T06:23:35.686Z"}
{"level":"error","message":"Keypair rotation failed for agent test-agent-id Keypair rotation cooldown not elapsed","name":"KeyManagementError","service":"middle-earth-agents","stack":"KeyManagementError: Keypair rotation cooldown not elapsed\n    at KeyManager.enforceRotationCooldown (/Users/ChukwukaUba/Desktop/middle-earth-agents/express-ts/src/deps/keyManager.ts:235:15)\n    at KeyManager.rotateKeypair (/Users/ChukwukaUba/Desktop/middle-earth-agents/express-ts/src/deps/keyManager.ts:212:12)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at /Users/ChukwukaUba/Desktop/middle-earth-agents/express-ts/src/deps/__tests__/keyManager.test.ts:159:7\n    at file:///Users/ChukwukaUba/Desktop/middle-earth-agents/express-ts/node_modules/.pnpm/@vitest+runner@2.1.8/node_modules/@vitest/runner/dist/index.js:533:5\n    at runTest (file:///Users/ChukwukaUba/Desktop/middle-earth-agents/express-ts/node_modules/.pnpm/@vitest+runner@2.1.8/node_modules/@vitest/runner/dist/index.js:1056:11)\n    at runSuite (file:///Users/ChukwukaUba/Desktop/middle-earth-agents/express-ts/node_modules/.pnpm/@vitest+runner@2.1.8/node_modules/@vitest/runner/dist/index.js:1205:15)\n    at runSuite (file:///Users/ChukwukaUba/Desktop/middle-earth-agents/express-ts/node_modules/.pnpm/@vitest+runner@2.1.8/node_modules/@vitest/runner/dist/index.js:1205:15)\n    at runSuite (file:///Users/ChukwukaUba/Desktop/middle-earth-agents/express-ts/node_modules/.pnpm/@vitest+runner@2.1.8/node_modules/@vitest/runner/dist/index.js:1205:15)\n    at runFiles (file:///Users/ChukwukaUba/Desktop/middle-earth-agents/express-ts/node_modules/.pnpm/@vitest+runner@2.1.8/node_modules/@vitest/runner/dist/index.js:1262:5)","timestamp":"2025-01-24T06:23:35.686Z"}
{"level":"info","message":"KeyManager service initialized with enhanced security","service":"middle-earth-agents","timestamp":"2025-01-24T06:23:35.687Z"}
{"level":"info","message":"KeyManager service initialized with enhanced security","service":"middle-earth-agents","timestamp":"2025-01-24T06:23:35.687Z"}
{"level":"error","message":"Failed to retrieve public key for test-agent-id No keypair found for agent test-agent-id","name":"KeyManagementError","service":"middle-earth-agents","stack":"KeyManagementError: No keypair found for agent test-agent-id\n    at KeyManager.getPublicKey (/Users/ChukwukaUba/Desktop/middle-earth-agents/express-ts/src/deps/keyManager.ts:325:15)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)","timestamp":"2025-01-24T06:23:35.688Z"}
{"level":"info","message":"KeyManager service initialized with enhanced security","service":"middle-earth-agents","timestamp":"2025-01-24T06:23:35.688Z"}
{"level":"info","message":"KeyManager service initialized with enhanced security","service":"middle-earth-agents","timestamp":"2025-01-24T06:23:35.689Z"}
{"level":"error","message":"Encrypted private key retrieval failed for test-agent-id No keypair found for agent test-agent-id","name":"KeyManagementError","service":"middle-earth-agents","stack":"KeyManagementError: No keypair found for agent test-agent-id\n    at KeyManager.getEncryptedPrivateKey (/Users/ChukwukaUba/Desktop/middle-earth-agents/express-ts/src/deps/keyManager.ts:344:15)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)","timestamp":"2025-01-24T06:23:35.690Z"}
{"level":"info","message":"KeyManager service initialized with enhanced security","service":"middle-earth-agents","timestamp":"2025-01-24T06:25:52.074Z"}
{"level":"info","message":"KeyManager service initialized with enhanced security","service":"middle-earth-agents","timestamp":"2025-01-24T06:25:52.078Z"}
{"level":"info","message":"KeyManager service initialized with enhanced security","service":"middle-earth-agents","timestamp":"2025-01-24T06:25:52.080Z"}
{"level":"info","message":"Keypair cached for agent test-agent-id","service":"middle-earth-agents","timestamp":"2025-01-24T06:25:52.165Z"}
{"level":"info","message":"Generated new keypair for agent test-agent-id","publicKey":"mock-public-key","service":"middle-earth-agents","timestamp":"2025-01-24T06:25:52.166Z"}
{"level":"info","message":"KeyManager service initialized with enhanced security","service":"middle-earth-agents","timestamp":"2025-01-24T06:25:52.170Z"}
{"level":"error","message":"Critical error retrieving keypair for agent test-agent-id Unsupported state or unable to authenticate data","service":"middle-earth-agents","stack":"Error: Unsupported state or unable to authenticate data\n    at Decipheriv.final (node:internal/crypto/cipher:184:29)\n    at KeyManager.decryptPrivateKey (/Users/ChukwukaUba/Desktop/middle-earth-agents/express-ts/src/deps/keyManager.ts:298:64)\n    at KeyManager.getKeypair (/Users/ChukwukaUba/Desktop/middle-earth-agents/express-ts/src/deps/keyManager.ts:114:38)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at /Users/ChukwukaUba/Desktop/middle-earth-agents/express-ts/src/deps/__tests__/keyManager.test.ts:113:22\n    at file:///Users/ChukwukaUba/Desktop/middle-earth-agents/express-ts/node_modules/.pnpm/@vitest+runner@2.1.8/node_modules/@vitest/runner/dist/index.js:533:5\n    at runTest (file:///Users/ChukwukaUba/Desktop/middle-earth-agents/express-ts/node_modules/.pnpm/@vitest+runner@2.1.8/node_modules/@vitest/runner/dist/index.js:1056:11)\n    at runSuite (file:///Users/ChukwukaUba/Desktop/middle-earth-agents/express-ts/node_modules/.pnpm/@vitest+runner@2.1.8/node_modules/@vitest/runner/dist/index.js:1205:15)\n    at runSuite (file:///Users/ChukwukaUba/Desktop/middle-earth-agents/express-ts/node_modules/.pnpm/@vitest+runner@2.1.8/node_modules/@vitest/runner/dist/index.js:1205:15)\n    at runSuite (file:///Users/ChukwukaUba/Desktop/middle-earth-agents/express-ts/node_modules/.pnpm/@vitest+runner@2.1.8/node_modules/@vitest/runner/dist/index.js:1205:15)","timestamp":"2025-01-24T06:25:52.274Z"}
{"level":"info","message":"KeyManager service initialized with enhanced security","service":"middle-earth-agents","timestamp":"2025-01-24T06:25:52.276Z"}
{"level":"error","message":"Critical error retrieving keypair for agent test-agent-id Database error","service":"middle-earth-agents","stack":"Error: Database error\n    at /Users/ChukwukaUba/Desktop/middle-earth-agents/express-ts/src/deps/__tests__/keyManager.test.ts:124:9\n    at file:///Users/ChukwukaUba/Desktop/middle-earth-agents/express-ts/node_modules/.pnpm/@vitest+runner@2.1.8/node_modules/@vitest/runner/dist/index.js:146:14\n    at file:///Users/ChukwukaUba/Desktop/middle-earth-agents/express-ts/node_modules/.pnpm/@vitest+runner@2.1.8/node_modules/@vitest/runner/dist/index.js:533:11\n    at runWithTimeout (file:///Users/ChukwukaUba/Desktop/middle-earth-agents/express-ts/node_modules/.pnpm/@vitest+runner@2.1.8/node_modules/@vitest/runner/dist/index.js:39:7)\n    at runTest (file:///Users/ChukwukaUba/Desktop/middle-earth-agents/express-ts/node_modules/.pnpm/@vitest+runner@2.1.8/node_modules/@vitest/runner/dist/index.js:1056:17)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at runSuite (file:///Users/ChukwukaUba/Desktop/middle-earth-agents/express-ts/node_modules/.pnpm/@vitest+runner@2.1.8/node_modules/@vitest/runner/dist/index.js:1205:15)\n    at runSuite (file:///Users/ChukwukaUba/Desktop/middle-earth-agents/express-ts/node_modules/.pnpm/@vitest+runner@2.1.8/node_modules/@vitest/runner/dist/index.js:1205:15)\n    at runSuite (file:///Users/ChukwukaUba/Desktop/middle-earth-agents/express-ts/node_modules/.pnpm/@vitest+runner@2.1.8/node_modules/@vitest/runner/dist/index.js:1205:15)\n    at runFiles (file:///Users/ChukwukaUba/Desktop/middle-earth-agents/express-ts/node_modules/.pnpm/@vitest+runner@2.1.8/node_modules/@vitest/runner/dist/index.js:1262:5)","timestamp":"2025-01-24T06:25:52.278Z"}
{"level":"info","message":"KeyManager service initialized with enhanced security","service":"middle-earth-agents","timestamp":"2025-01-24T06:25:52.281Z"}
{"level":"info","message":"Keypair cached for agent test-agent-id","service":"middle-earth-agents","timestamp":"2025-01-24T06:25:52.380Z"}
{"level":"info","message":"Generated new keypair for agent test-agent-id","publicKey":"mock-public-key","service":"middle-earth-agents","timestamp":"2025-01-24T06:25:52.381Z"}
{"level":"info","message":"Keypair rotated successfully for agent test-agent-id","newPublicKey":"mock-public-key","service":"middle-earth-agents","timestamp":"2025-01-24T06:25:52.381Z"}
{"level":"info","message":"KeyManager service initialized with enhanced security","service":"middle-earth-agents","timestamp":"2025-01-24T06:25:52.382Z"}
{"level":"error","message":"Keypair rotation failed for agent test-agent-id Keypair rotation cooldown not elapsed","name":"KeyManagementError","service":"middle-earth-agents","stack":"KeyManagementError: Keypair rotation cooldown not elapsed\n    at KeyManager.enforceRotationCooldown (/Users/ChukwukaUba/Desktop/middle-earth-agents/express-ts/src/deps/keyManager.ts:235:15)\n    at KeyManager.rotateKeypair (/Users/ChukwukaUba/Desktop/middle-earth-agents/express-ts/src/deps/keyManager.ts:212:12)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at /Users/ChukwukaUba/Desktop/middle-earth-agents/express-ts/src/deps/__tests__/keyManager.test.ts:162:7\n    at file:///Users/ChukwukaUba/Desktop/middle-earth-agents/express-ts/node_modules/.pnpm/@vitest+runner@2.1.8/node_modules/@vitest/runner/dist/index.js:533:5\n    at runTest (file:///Users/ChukwukaUba/Desktop/middle-earth-agents/express-ts/node_modules/.pnpm/@vitest+runner@2.1.8/node_modules/@vitest/runner/dist/index.js:1056:11)\n    at runSuite (file:///Users/ChukwukaUba/Desktop/middle-earth-agents/express-ts/node_modules/.pnpm/@vitest+runner@2.1.8/node_modules/@vitest/runner/dist/index.js:1205:15)\n    at runSuite (file:///Users/ChukwukaUba/Desktop/middle-earth-agents/express-ts/node_modules/.pnpm/@vitest+runner@2.1.8/node_modules/@vitest/runner/dist/index.js:1205:15)\n    at runSuite (file:///Users/ChukwukaUba/Desktop/middle-earth-agents/express-ts/node_modules/.pnpm/@vitest+runner@2.1.8/node_modules/@vitest/runner/dist/index.js:1205:15)\n    at runFiles (file:///Users/ChukwukaUba/Desktop/middle-earth-agents/express-ts/node_modules/.pnpm/@vitest+runner@2.1.8/node_modules/@vitest/runner/dist/index.js:1262:5)","timestamp":"2025-01-24T06:25:52.382Z"}
{"level":"info","message":"KeyManager service initialized with enhanced security","service":"middle-earth-agents","timestamp":"2025-01-24T06:25:52.383Z"}
{"level":"info","message":"KeyManager service initialized with enhanced security","service":"middle-earth-agents","timestamp":"2025-01-24T06:25:52.386Z"}
{"level":"error","message":"Failed to retrieve public key for test-agent-id No keypair found for agent test-agent-id","name":"KeyManagementError","service":"middle-earth-agents","stack":"KeyManagementError: No keypair found for agent test-agent-id\n    at KeyManager.getPublicKey (/Users/ChukwukaUba/Desktop/middle-earth-agents/express-ts/src/deps/keyManager.ts:325:15)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)","timestamp":"2025-01-24T06:25:52.387Z"}
{"level":"info","message":"KeyManager service initialized with enhanced security","service":"middle-earth-agents","timestamp":"2025-01-24T06:25:52.388Z"}
{"level":"info","message":"KeyManager service initialized with enhanced security","service":"middle-earth-agents","timestamp":"2025-01-24T06:25:52.389Z"}
{"level":"error","message":"Encrypted private key retrieval failed for test-agent-id No keypair found for agent test-agent-id","name":"KeyManagementError","service":"middle-earth-agents","stack":"KeyManagementError: No keypair found for agent test-agent-id\n    at KeyManager.getEncryptedPrivateKey (/Users/ChukwukaUba/Desktop/middle-earth-agents/express-ts/src/deps/keyManager.ts:344:15)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)","timestamp":"2025-01-24T06:25:52.390Z"}
{"level":"info","message":"KeyManager service initialized with enhanced security","service":"middle-earth-agents","timestamp":"2025-01-24T06:27:36.698Z"}
{"level":"info","message":"KeyManager service initialized with enhanced security","service":"middle-earth-agents","timestamp":"2025-01-24T06:27:36.702Z"}
{"level":"info","message":"KeyManager service initialized with enhanced security","service":"middle-earth-agents","timestamp":"2025-01-24T06:27:36.704Z"}
{"level":"error","message":"Keypair generation failed for agent test-agent-id Cannot read properties of undefined (reading 'update')","service":"middle-earth-agents","stack":"TypeError: Cannot read properties of undefined (reading 'update')\n    at KeyManager.encryptPrivateKey (/Users/ChukwukaUba/Desktop/middle-earth-agents/express-ts/src/deps/keyManager.ts:263:14)\n    at KeyManager.generateKeypair (/Users/ChukwukaUba/Desktop/middle-earth-agents/express-ts/src/deps/keyManager.ts:168:59)\n    at KeyManager.getKeypair (/Users/ChukwukaUba/Desktop/middle-earth-agents/express-ts/src/deps/keyManager.ts:127:38)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at /Users/ChukwukaUba/Desktop/middle-earth-agents/express-ts/src/deps/__tests__/keyManager.test.ts:98:22\n    at file:///Users/ChukwukaUba/Desktop/middle-earth-agents/express-ts/node_modules/.pnpm/@vitest+runner@2.1.8/node_modules/@vitest/runner/dist/index.js:533:5\n    at runTest (file:///Users/ChukwukaUba/Desktop/middle-earth-agents/express-ts/node_modules/.pnpm/@vitest+runner@2.1.8/node_modules/@vitest/runner/dist/index.js:1056:11)\n    at runSuite (file:///Users/ChukwukaUba/Desktop/middle-earth-agents/express-ts/node_modules/.pnpm/@vitest+runner@2.1.8/node_modules/@vitest/runner/dist/index.js:1205:15)\n    at runSuite (file:///Users/ChukwukaUba/Desktop/middle-earth-agents/express-ts/node_modules/.pnpm/@vitest+runner@2.1.8/node_modules/@vitest/runner/dist/index.js:1205:15)\n    at runSuite (file:///Users/ChukwukaUba/Desktop/middle-earth-agents/express-ts/node_modules/.pnpm/@vitest+runner@2.1.8/node_modules/@vitest/runner/dist/index.js:1205:15)","timestamp":"2025-01-24T06:27:36.709Z"}
{"level":"error","message":"Critical error retrieving keypair for agent test-agent-id Failed to generate keypair: TypeError: Cannot read properties of undefined (reading 'update')","name":"KeyManagementError","service":"middle-earth-agents","stack":"KeyManagementError: Failed to generate keypair: TypeError: Cannot read properties of undefined (reading 'update')\n    at KeyManager.generateKeypair (/Users/ChukwukaUba/Desktop/middle-earth-agents/express-ts/src/deps/keyManager.ts:204:13)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at KeyManager.getKeypair (/Users/ChukwukaUba/Desktop/middle-earth-agents/express-ts/src/deps/keyManager.ts:127:27)\n    at /Users/ChukwukaUba/Desktop/middle-earth-agents/express-ts/src/deps/__tests__/keyManager.test.ts:98:22\n    at file:///Users/ChukwukaUba/Desktop/middle-earth-agents/express-ts/node_modules/.pnpm/@vitest+runner@2.1.8/node_modules/@vitest/runner/dist/index.js:533:5\n    at runTest (file:///Users/ChukwukaUba/Desktop/middle-earth-agents/express-ts/node_modules/.pnpm/@vitest+runner@2.1.8/node_modules/@vitest/runner/dist/index.js:1056:11)\n    at runSuite (file:///Users/ChukwukaUba/Desktop/middle-earth-agents/express-ts/node_modules/.pnpm/@vitest+runner@2.1.8/node_modules/@vitest/runner/dist/index.js:1205:15)\n    at runSuite (file:///Users/ChukwukaUba/Desktop/middle-earth-agents/express-ts/node_modules/.pnpm/@vitest+runner@2.1.8/node_modules/@vitest/runner/dist/index.js:1205:15)\n    at runSuite (file:///Users/ChukwukaUba/Desktop/middle-earth-agents/express-ts/node_modules/.pnpm/@vitest+runner@2.1.8/node_modules/@vitest/runner/dist/index.js:1205:15)\n    at runFiles (file:///Users/ChukwukaUba/Desktop/middle-earth-agents/express-ts/node_modules/.pnpm/@vitest+runner@2.1.8/node_modules/@vitest/runner/dist/index.js:1262:5)","timestamp":"2025-01-24T06:27:36.710Z"}
{"level":"info","message":"KeyManager service initialized with enhanced security","service":"middle-earth-agents","timestamp":"2025-01-24T06:27:36.711Z"}
{"level":"info","message":"Keypair cached for agent test-agent-id","service":"middle-earth-agents","timestamp":"2025-01-24T06:27:36.712Z"}
{"level":"info","message":"KeyManager service initialized with enhanced security","service":"middle-earth-agents","timestamp":"2025-01-24T06:27:36.715Z"}
{"level":"error","message":"Critical error retrieving keypair for agent test-agent-id Database error","service":"middle-earth-agents","stack":"Error: Database error\n    at /Users/ChukwukaUba/Desktop/middle-earth-agents/express-ts/src/deps/__tests__/keyManager.test.ts:130:9\n    at file:///Users/ChukwukaUba/Desktop/middle-earth-agents/express-ts/node_modules/.pnpm/@vitest+runner@2.1.8/node_modules/@vitest/runner/dist/index.js:146:14\n    at file:///Users/ChukwukaUba/Desktop/middle-earth-agents/express-ts/node_modules/.pnpm/@vitest+runner@2.1.8/node_modules/@vitest/runner/dist/index.js:533:11\n    at runWithTimeout (file:///Users/ChukwukaUba/Desktop/middle-earth-agents/express-ts/node_modules/.pnpm/@vitest+runner@2.1.8/node_modules/@vitest/runner/dist/index.js:39:7)\n    at runTest (file:///Users/ChukwukaUba/Desktop/middle-earth-agents/express-ts/node_modules/.pnpm/@vitest+runner@2.1.8/node_modules/@vitest/runner/dist/index.js:1056:17)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at runSuite (file:///Users/ChukwukaUba/Desktop/middle-earth-agents/express-ts/node_modules/.pnpm/@vitest+runner@2.1.8/node_modules/@vitest/runner/dist/index.js:1205:15)\n    at runSuite (file:///Users/ChukwukaUba/Desktop/middle-earth-agents/express-ts/node_modules/.pnpm/@vitest+runner@2.1.8/node_modules/@vitest/runner/dist/index.js:1205:15)\n    at runSuite (file:///Users/ChukwukaUba/Desktop/middle-earth-agents/express-ts/node_modules/.pnpm/@vitest+runner@2.1.8/node_modules/@vitest/runner/dist/index.js:1205:15)\n    at runFiles (file:///Users/ChukwukaUba/Desktop/middle-earth-agents/express-ts/node_modules/.pnpm/@vitest+runner@2.1.8/node_modules/@vitest/runner/dist/index.js:1262:5)","timestamp":"2025-01-24T06:27:36.715Z"}
{"level":"info","message":"KeyManager service initialized with enhanced security","service":"middle-earth-agents","timestamp":"2025-01-24T06:27:36.717Z"}
{"level":"error","message":"Keypair generation failed for agent test-agent-id Cannot read properties of undefined (reading 'update')","service":"middle-earth-agents","stack":"TypeError: Cannot read properties of undefined (reading 'update')\n    at KeyManager.encryptPrivateKey (/Users/ChukwukaUba/Desktop/middle-earth-agents/express-ts/src/deps/keyManager.ts:263:14)\n    at KeyManager.generateKeypair (/Users/ChukwukaUba/Desktop/middle-earth-agents/express-ts/src/deps/keyManager.ts:168:59)\n    at KeyManager.rotateKeypair (/Users/ChukwukaUba/Desktop/middle-earth-agents/express-ts/src/deps/keyManager.ts:214:38)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at /Users/ChukwukaUba/Desktop/middle-earth-agents/express-ts/src/deps/__tests__/keyManager.test.ts:157:7\n    at file:///Users/ChukwukaUba/Desktop/middle-earth-agents/express-ts/node_modules/.pnpm/@vitest+runner@2.1.8/node_modules/@vitest/runner/dist/index.js:533:5\n    at runTest (file:///Users/ChukwukaUba/Desktop/middle-earth-agents/express-ts/node_modules/.pnpm/@vitest+runner@2.1.8/node_modules/@vitest/runner/dist/index.js:1056:11)\n    at runSuite (file:///Users/ChukwukaUba/Desktop/middle-earth-agents/express-ts/node_modules/.pnpm/@vitest+runner@2.1.8/node_modules/@vitest/runner/dist/index.js:1205:15)\n    at runSuite (file:///Users/ChukwukaUba/Desktop/middle-earth-agents/express-ts/node_modules/.pnpm/@vitest+runner@2.1.8/node_modules/@vitest/runner/dist/index.js:1205:15)\n    at runSuite (file:///Users/ChukwukaUba/Desktop/middle-earth-agents/express-ts/node_modules/.pnpm/@vitest+runner@2.1.8/node_modules/@vitest/runner/dist/index.js:1205:15)","timestamp":"2025-01-24T06:27:36.718Z"}
{"level":"error","message":"Keypair rotation failed for agent test-agent-id Failed to generate keypair: TypeError: Cannot read properties of undefined (reading 'update')","name":"KeyManagementError","service":"middle-earth-agents","stack":"KeyManagementError: Failed to generate keypair: TypeError: Cannot read properties of undefined (reading 'update')\n    at KeyManager.generateKeypair (/Users/ChukwukaUba/Desktop/middle-earth-agents/express-ts/src/deps/keyManager.ts:204:13)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at KeyManager.rotateKeypair (/Users/ChukwukaUba/Desktop/middle-earth-agents/express-ts/src/deps/keyManager.ts:214:27)\n    at /Users/ChukwukaUba/Desktop/middle-earth-agents/express-ts/src/deps/__tests__/keyManager.test.ts:157:7\n    at file:///Users/ChukwukaUba/Desktop/middle-earth-agents/express-ts/node_modules/.pnpm/@vitest+runner@2.1.8/node_modules/@vitest/runner/dist/index.js:533:5\n    at runTest (file:///Users/ChukwukaUba/Desktop/middle-earth-agents/express-ts/node_modules/.pnpm/@vitest+runner@2.1.8/node_modules/@vitest/runner/dist/index.js:1056:11)\n    at runSuite (file:///Users/ChukwukaUba/Desktop/middle-earth-agents/express-ts/node_modules/.pnpm/@vitest+runner@2.1.8/node_modules/@vitest/runner/dist/index.js:1205:15)\n    at runSuite (file:///Users/ChukwukaUba/Desktop/middle-earth-agents/express-ts/node_modules/.pnpm/@vitest+runner@2.1.8/node_modules/@vitest/runner/dist/index.js:1205:15)\n    at runSuite (file:///Users/ChukwukaUba/Desktop/middle-earth-agents/express-ts/node_modules/.pnpm/@vitest+runner@2.1.8/node_modules/@vitest/runner/dist/index.js:1205:15)\n    at runFiles (file:///Users/ChukwukaUba/Desktop/middle-earth-agents/express-ts/node_modules/.pnpm/@vitest+runner@2.1.8/node_modules/@vitest/runner/dist/index.js:1262:5)","timestamp":"2025-01-24T06:27:36.718Z"}
{"level":"info","message":"KeyManager service initialized with enhanced security","service":"middle-earth-agents","timestamp":"2025-01-24T06:27:36.721Z"}
{"level":"error","message":"Keypair rotation failed for agent test-agent-id Keypair rotation cooldown not elapsed","name":"KeyManagementError","service":"middle-earth-agents","stack":"KeyManagementError: Keypair rotation cooldown not elapsed\n    at KeyManager.enforceRotationCooldown (/Users/ChukwukaUba/Desktop/middle-earth-agents/express-ts/src/deps/keyManager.ts:235:15)\n    at KeyManager.rotateKeypair (/Users/ChukwukaUba/Desktop/middle-earth-agents/express-ts/src/deps/keyManager.ts:212:12)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at /Users/ChukwukaUba/Desktop/middle-earth-agents/express-ts/src/deps/__tests__/keyManager.test.ts:168:7\n    at file:///Users/ChukwukaUba/Desktop/middle-earth-agents/express-ts/node_modules/.pnpm/@vitest+runner@2.1.8/node_modules/@vitest/runner/dist/index.js:533:5\n    at runTest (file:///Users/ChukwukaUba/Desktop/middle-earth-agents/express-ts/node_modules/.pnpm/@vitest+runner@2.1.8/node_modules/@vitest/runner/dist/index.js:1056:11)\n    at runSuite (file:///Users/ChukwukaUba/Desktop/middle-earth-agents/express-ts/node_modules/.pnpm/@vitest+runner@2.1.8/node_modules/@vitest/runner/dist/index.js:1205:15)\n    at runSuite (file:///Users/ChukwukaUba/Desktop/middle-earth-agents/express-ts/node_modules/.pnpm/@vitest+runner@2.1.8/node_modules/@vitest/runner/dist/index.js:1205:15)\n    at runSuite (file:///Users/ChukwukaUba/Desktop/middle-earth-agents/express-ts/node_modules/.pnpm/@vitest+runner@2.1.8/node_modules/@vitest/runner/dist/index.js:1205:15)\n    at runFiles (file:///Users/ChukwukaUba/Desktop/middle-earth-agents/express-ts/node_modules/.pnpm/@vitest+runner@2.1.8/node_modules/@vitest/runner/dist/index.js:1262:5)","timestamp":"2025-01-24T06:27:36.722Z"}
{"level":"info","message":"KeyManager service initialized with enhanced security","service":"middle-earth-agents","timestamp":"2025-01-24T06:27:36.722Z"}
{"level":"info","message":"KeyManager service initialized with enhanced security","service":"middle-earth-agents","timestamp":"2025-01-24T06:27:36.723Z"}
{"level":"error","message":"Failed to retrieve public key for test-agent-id No keypair found for agent test-agent-id","name":"KeyManagementError","service":"middle-earth-agents","stack":"KeyManagementError: No keypair found for agent test-agent-id\n    at KeyManager.getPublicKey (/Users/ChukwukaUba/Desktop/middle-earth-agents/express-ts/src/deps/keyManager.ts:325:15)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)","timestamp":"2025-01-24T06:27:36.724Z"}
{"level":"info","message":"KeyManager service initialized with enhanced security","service":"middle-earth-agents","timestamp":"2025-01-24T06:27:36.724Z"}
{"level":"info","message":"KeyManager service initialized with enhanced security","service":"middle-earth-agents","timestamp":"2025-01-24T06:27:36.726Z"}
{"level":"error","message":"Encrypted private key retrieval failed for test-agent-id No keypair found for agent test-agent-id","name":"KeyManagementError","service":"middle-earth-agents","stack":"KeyManagementError: No keypair found for agent test-agent-id\n    at KeyManager.getEncryptedPrivateKey (/Users/ChukwukaUba/Desktop/middle-earth-agents/express-ts/src/deps/keyManager.ts:344:15)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)","timestamp":"2025-01-24T06:27:36.726Z"}
{"level":"info","message":"KeyManager service initialized with enhanced security","service":"middle-earth-agents","timestamp":"2025-01-24T06:27:57.061Z"}
{"level":"info","message":"KeyManager service initialized with enhanced security","service":"middle-earth-agents","timestamp":"2025-01-24T06:27:57.066Z"}
{"level":"info","message":"KeyManager service initialized with enhanced security","service":"middle-earth-agents","timestamp":"2025-01-24T06:27:57.068Z"}
{"level":"error","message":"Keypair generation failed for agent test-agent-id Cannot read properties of undefined (reading 'update')","service":"middle-earth-agents","stack":"TypeError: Cannot read properties of undefined (reading 'update')\n    at KeyManager.encryptPrivateKey (/Users/ChukwukaUba/Desktop/middle-earth-agents/express-ts/src/deps/keyManager.ts:263:14)\n    at KeyManager.generateKeypair (/Users/ChukwukaUba/Desktop/middle-earth-agents/express-ts/src/deps/keyManager.ts:168:59)\n    at KeyManager.getKeypair (/Users/ChukwukaUba/Desktop/middle-earth-agents/express-ts/src/deps/keyManager.ts:127:38)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at /Users/ChukwukaUba/Desktop/middle-earth-agents/express-ts/src/deps/__tests__/keyManager.test.ts:98:22\n    at file:///Users/ChukwukaUba/Desktop/middle-earth-agents/express-ts/node_modules/.pnpm/@vitest+runner@2.1.8/node_modules/@vitest/runner/dist/index.js:533:5\n    at runTest (file:///Users/ChukwukaUba/Desktop/middle-earth-agents/express-ts/node_modules/.pnpm/@vitest+runner@2.1.8/node_modules/@vitest/runner/dist/index.js:1056:11)\n    at runSuite (file:///Users/ChukwukaUba/Desktop/middle-earth-agents/express-ts/node_modules/.pnpm/@vitest+runner@2.1.8/node_modules/@vitest/runner/dist/index.js:1205:15)\n    at runSuite (file:///Users/ChukwukaUba/Desktop/middle-earth-agents/express-ts/node_modules/.pnpm/@vitest+runner@2.1.8/node_modules/@vitest/runner/dist/index.js:1205:15)\n    at runSuite (file:///Users/ChukwukaUba/Desktop/middle-earth-agents/express-ts/node_modules/.pnpm/@vitest+runner@2.1.8/node_modules/@vitest/runner/dist/index.js:1205:15)","timestamp":"2025-01-24T06:27:57.074Z"}
{"level":"error","message":"Critical error retrieving keypair for agent test-agent-id Failed to generate keypair: TypeError: Cannot read properties of undefined (reading 'update')","name":"KeyManagementError","service":"middle-earth-agents","stack":"KeyManagementError: Failed to generate keypair: TypeError: Cannot read properties of undefined (reading 'update')\n    at KeyManager.generateKeypair (/Users/ChukwukaUba/Desktop/middle-earth-agents/express-ts/src/deps/keyManager.ts:204:13)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at KeyManager.getKeypair (/Users/ChukwukaUba/Desktop/middle-earth-agents/express-ts/src/deps/keyManager.ts:127:27)\n    at /Users/ChukwukaUba/Desktop/middle-earth-agents/express-ts/src/deps/__tests__/keyManager.test.ts:98:22\n    at file:///Users/ChukwukaUba/Desktop/middle-earth-agents/express-ts/node_modules/.pnpm/@vitest+runner@2.1.8/node_modules/@vitest/runner/dist/index.js:533:5\n    at runTest (file:///Users/ChukwukaUba/Desktop/middle-earth-agents/express-ts/node_modules/.pnpm/@vitest+runner@2.1.8/node_modules/@vitest/runner/dist/index.js:1056:11)\n    at runSuite (file:///Users/ChukwukaUba/Desktop/middle-earth-agents/express-ts/node_modules/.pnpm/@vitest+runner@2.1.8/node_modules/@vitest/runner/dist/index.js:1205:15)\n    at runSuite (file:///Users/ChukwukaUba/Desktop/middle-earth-agents/express-ts/node_modules/.pnpm/@vitest+runner@2.1.8/node_modules/@vitest/runner/dist/index.js:1205:15)\n    at runSuite (file:///Users/ChukwukaUba/Desktop/middle-earth-agents/express-ts/node_modules/.pnpm/@vitest+runner@2.1.8/node_modules/@vitest/runner/dist/index.js:1205:15)\n    at runFiles (file:///Users/ChukwukaUba/Desktop/middle-earth-agents/express-ts/node_modules/.pnpm/@vitest+runner@2.1.8/node_modules/@vitest/runner/dist/index.js:1262:5)","timestamp":"2025-01-24T06:27:57.075Z"}
{"level":"info","message":"KeyManager service initialized with enhanced security","service":"middle-earth-agents","timestamp":"2025-01-24T06:27:57.077Z"}
{"level":"info","message":"Keypair cached for agent test-agent-id","service":"middle-earth-agents","timestamp":"2025-01-24T06:27:57.079Z"}
{"level":"info","message":"KeyManager service initialized with enhanced security","service":"middle-earth-agents","timestamp":"2025-01-24T06:27:57.081Z"}
{"level":"error","message":"Critical error retrieving keypair for agent test-agent-id Database error","service":"middle-earth-agents","stack":"Error: Database error\n    at /Users/ChukwukaUba/Desktop/middle-earth-agents/express-ts/src/deps/__tests__/keyManager.test.ts:130:9\n    at file:///Users/ChukwukaUba/Desktop/middle-earth-agents/express-ts/node_modules/.pnpm/@vitest+runner@2.1.8/node_modules/@vitest/runner/dist/index.js:146:14\n    at file:///Users/ChukwukaUba/Desktop/middle-earth-agents/express-ts/node_modules/.pnpm/@vitest+runner@2.1.8/node_modules/@vitest/runner/dist/index.js:533:11\n    at runWithTimeout (file:///Users/ChukwukaUba/Desktop/middle-earth-agents/express-ts/node_modules/.pnpm/@vitest+runner@2.1.8/node_modules/@vitest/runner/dist/index.js:39:7)\n    at runTest (file:///Users/ChukwukaUba/Desktop/middle-earth-agents/express-ts/node_modules/.pnpm/@vitest+runner@2.1.8/node_modules/@vitest/runner/dist/index.js:1056:17)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at runSuite (file:///Users/ChukwukaUba/Desktop/middle-earth-agents/express-ts/node_modules/.pnpm/@vitest+runner@2.1.8/node_modules/@vitest/runner/dist/index.js:1205:15)\n    at runSuite (file:///Users/ChukwukaUba/Desktop/middle-earth-agents/express-ts/node_modules/.pnpm/@vitest+runner@2.1.8/node_modules/@vitest/runner/dist/index.js:1205:15)\n    at runSuite (file:///Users/ChukwukaUba/Desktop/middle-earth-agents/express-ts/node_modules/.pnpm/@vitest+runner@2.1.8/node_modules/@vitest/runner/dist/index.js:1205:15)\n    at runFiles (file:///Users/ChukwukaUba/Desktop/middle-earth-agents/express-ts/node_modules/.pnpm/@vitest+runner@2.1.8/node_modules/@vitest/runner/dist/index.js:1262:5)","timestamp":"2025-01-24T06:27:57.082Z"}
{"level":"info","message":"KeyManager service initialized with enhanced security","service":"middle-earth-agents","timestamp":"2025-01-24T06:27:57.085Z"}
{"level":"error","message":"Keypair generation failed for agent test-agent-id Cannot read properties of undefined (reading 'update')","service":"middle-earth-agents","stack":"TypeError: Cannot read properties of undefined (reading 'update')\n    at KeyManager.encryptPrivateKey (/Users/ChukwukaUba/Desktop/middle-earth-agents/express-ts/src/deps/keyManager.ts:263:14)\n    at KeyManager.generateKeypair (/Users/ChukwukaUba/Desktop/middle-earth-agents/express-ts/src/deps/keyManager.ts:168:59)\n    at KeyManager.rotateKeypair (/Users/ChukwukaUba/Desktop/middle-earth-agents/express-ts/src/deps/keyManager.ts:214:38)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at /Users/ChukwukaUba/Desktop/middle-earth-agents/express-ts/src/deps/__tests__/keyManager.test.ts:157:7\n    at file:///Users/ChukwukaUba/Desktop/middle-earth-agents/express-ts/node_modules/.pnpm/@vitest+runner@2.1.8/node_modules/@vitest/runner/dist/index.js:533:5\n    at runTest (file:///Users/ChukwukaUba/Desktop/middle-earth-agents/express-ts/node_modules/.pnpm/@vitest+runner@2.1.8/node_modules/@vitest/runner/dist/index.js:1056:11)\n    at runSuite (file:///Users/ChukwukaUba/Desktop/middle-earth-agents/express-ts/node_modules/.pnpm/@vitest+runner@2.1.8/node_modules/@vitest/runner/dist/index.js:1205:15)\n    at runSuite (file:///Users/ChukwukaUba/Desktop/middle-earth-agents/express-ts/node_modules/.pnpm/@vitest+runner@2.1.8/node_modules/@vitest/runner/dist/index.js:1205:15)\n    at runSuite (file:///Users/ChukwukaUba/Desktop/middle-earth-agents/express-ts/node_modules/.pnpm/@vitest+runner@2.1.8/node_modules/@vitest/runner/dist/index.js:1205:15)","timestamp":"2025-01-24T06:27:57.086Z"}
{"level":"error","message":"Keypair rotation failed for agent test-agent-id Failed to generate keypair: TypeError: Cannot read properties of undefined (reading 'update')","name":"KeyManagementError","service":"middle-earth-agents","stack":"KeyManagementError: Failed to generate keypair: TypeError: Cannot read properties of undefined (reading 'update')\n    at KeyManager.generateKeypair (/Users/ChukwukaUba/Desktop/middle-earth-agents/express-ts/src/deps/keyManager.ts:204:13)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at KeyManager.rotateKeypair (/Users/ChukwukaUba/Desktop/middle-earth-agents/express-ts/src/deps/keyManager.ts:214:27)\n    at /Users/ChukwukaUba/Desktop/middle-earth-agents/express-ts/src/deps/__tests__/keyManager.test.ts:157:7\n    at file:///Users/ChukwukaUba/Desktop/middle-earth-agents/express-ts/node_modules/.pnpm/@vitest+runner@2.1.8/node_modules/@vitest/runner/dist/index.js:533:5\n    at runTest (file:///Users/ChukwukaUba/Desktop/middle-earth-agents/express-ts/node_modules/.pnpm/@vitest+runner@2.1.8/node_modules/@vitest/runner/dist/index.js:1056:11)\n    at runSuite (file:///Users/ChukwukaUba/Desktop/middle-earth-agents/express-ts/node_modules/.pnpm/@vitest+runner@2.1.8/node_modules/@vitest/runner/dist/index.js:1205:15)\n    at runSuite (file:///Users/ChukwukaUba/Desktop/middle-earth-agents/express-ts/node_modules/.pnpm/@vitest+runner@2.1.8/node_modules/@vitest/runner/dist/index.js:1205:15)\n    at runSuite (file:///Users/ChukwukaUba/Desktop/middle-earth-agents/express-ts/node_modules/.pnpm/@vitest+runner@2.1.8/node_modules/@vitest/runner/dist/index.js:1205:15)\n    at runFiles (file:///Users/ChukwukaUba/Desktop/middle-earth-agents/express-ts/node_modules/.pnpm/@vitest+runner@2.1.8/node_modules/@vitest/runner/dist/index.js:1262:5)","timestamp":"2025-01-24T06:27:57.086Z"}
{"level":"info","message":"KeyManager service initialized with enhanced security","service":"middle-earth-agents","timestamp":"2025-01-24T06:27:57.089Z"}
{"level":"error","message":"Keypair rotation failed for agent test-agent-id Keypair rotation cooldown not elapsed","name":"KeyManagementError","service":"middle-earth-agents","stack":"KeyManagementError: Keypair rotation cooldown not elapsed\n    at KeyManager.enforceRotationCooldown (/Users/ChukwukaUba/Desktop/middle-earth-agents/express-ts/src/deps/keyManager.ts:235:15)\n    at KeyManager.rotateKeypair (/Users/ChukwukaUba/Desktop/middle-earth-agents/express-ts/src/deps/keyManager.ts:212:12)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at /Users/ChukwukaUba/Desktop/middle-earth-agents/express-ts/src/deps/__tests__/keyManager.test.ts:168:7\n    at file:///Users/ChukwukaUba/Desktop/middle-earth-agents/express-ts/node_modules/.pnpm/@vitest+runner@2.1.8/node_modules/@vitest/runner/dist/index.js:533:5\n    at runTest (file:///Users/ChukwukaUba/Desktop/middle-earth-agents/express-ts/node_modules/.pnpm/@vitest+runner@2.1.8/node_modules/@vitest/runner/dist/index.js:1056:11)\n    at runSuite (file:///Users/ChukwukaUba/Desktop/middle-earth-agents/express-ts/node_modules/.pnpm/@vitest+runner@2.1.8/node_modules/@vitest/runner/dist/index.js:1205:15)\n    at runSuite (file:///Users/ChukwukaUba/Desktop/middle-earth-agents/express-ts/node_modules/.pnpm/@vitest+runner@2.1.8/node_modules/@vitest/runner/dist/index.js:1205:15)\n    at runSuite (file:///Users/ChukwukaUba/Desktop/middle-earth-agents/express-ts/node_modules/.pnpm/@vitest+runner@2.1.8/node_modules/@vitest/runner/dist/index.js:1205:15)\n    at runFiles (file:///Users/ChukwukaUba/Desktop/middle-earth-agents/express-ts/node_modules/.pnpm/@vitest+runner@2.1.8/node_modules/@vitest/runner/dist/index.js:1262:5)","timestamp":"2025-01-24T06:27:57.090Z"}
{"level":"info","message":"KeyManager service initialized with enhanced security","service":"middle-earth-agents","timestamp":"2025-01-24T06:27:57.091Z"}
{"level":"info","message":"KeyManager service initialized with enhanced security","service":"middle-earth-agents","timestamp":"2025-01-24T06:27:57.093Z"}
{"level":"error","message":"Failed to retrieve public key for test-agent-id No keypair found for agent test-agent-id","name":"KeyManagementError","service":"middle-earth-agents","stack":"KeyManagementError: No keypair found for agent test-agent-id\n    at KeyManager.getPublicKey (/Users/ChukwukaUba/Desktop/middle-earth-agents/express-ts/src/deps/keyManager.ts:325:15)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)","timestamp":"2025-01-24T06:27:57.093Z"}
{"level":"info","message":"KeyManager service initialized with enhanced security","service":"middle-earth-agents","timestamp":"2025-01-24T06:27:57.094Z"}
{"level":"info","message":"KeyManager service initialized with enhanced security","service":"middle-earth-agents","timestamp":"2025-01-24T06:27:57.095Z"}
{"level":"error","message":"Encrypted private key retrieval failed for test-agent-id No keypair found for agent test-agent-id","name":"KeyManagementError","service":"middle-earth-agents","stack":"KeyManagementError: No keypair found for agent test-agent-id\n    at KeyManager.getEncryptedPrivateKey (/Users/ChukwukaUba/Desktop/middle-earth-agents/express-ts/src/deps/keyManager.ts:344:15)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)","timestamp":"2025-01-24T06:27:57.096Z"}
{"level":"info","message":"KeyManager service initialized with enhanced security","service":"middle-earth-agents","timestamp":"2025-01-24T06:32:00.329Z"}
{"level":"info","message":"KeyManager service initialized with enhanced security","service":"middle-earth-agents","timestamp":"2025-01-24T06:32:00.340Z"}
{"level":"info","message":"KeyManager service initialized with enhanced security","service":"middle-earth-agents","timestamp":"2025-01-24T06:32:00.344Z"}
{"level":"info","message":"Keypair cached for agent test-agent-id","service":"middle-earth-agents","timestamp":"2025-01-24T06:32:00.349Z"}
{"level":"info","message":"Generated new keypair for agent test-agent-id","publicKey":"mock-public-key","service":"middle-earth-agents","timestamp":"2025-01-24T06:32:00.349Z"}
{"level":"info","message":"KeyManager service initialized with enhanced security","service":"middle-earth-agents","timestamp":"2025-01-24T06:32:00.357Z"}
{"level":"info","message":"Keypair cached for agent test-agent-id","service":"middle-earth-agents","timestamp":"2025-01-24T06:32:00.359Z"}
{"level":"info","message":"KeyManager service initialized with enhanced security","service":"middle-earth-agents","timestamp":"2025-01-24T06:32:00.363Z"}
{"level":"error","message":"Critical error retrieving keypair for agent test-agent-id Database error","service":"middle-earth-agents","stack":"Error: Database error\n    at /Users/ChukwukaUba/Desktop/middle-earth-agents/express-ts/src/deps/__tests__/keyManager.test.ts:136:9\n    at file:///Users/ChukwukaUba/Desktop/middle-earth-agents/express-ts/node_modules/.pnpm/@vitest+runner@2.1.8/node_modules/@vitest/runner/dist/index.js:146:14\n    at file:///Users/ChukwukaUba/Desktop/middle-earth-agents/express-ts/node_modules/.pnpm/@vitest+runner@2.1.8/node_modules/@vitest/runner/dist/index.js:533:11\n    at runWithTimeout (file:///Users/ChukwukaUba/Desktop/middle-earth-agents/express-ts/node_modules/.pnpm/@vitest+runner@2.1.8/node_modules/@vitest/runner/dist/index.js:39:7)\n    at runTest (file:///Users/ChukwukaUba/Desktop/middle-earth-agents/express-ts/node_modules/.pnpm/@vitest+runner@2.1.8/node_modules/@vitest/runner/dist/index.js:1056:17)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at runSuite (file:///Users/ChukwukaUba/Desktop/middle-earth-agents/express-ts/node_modules/.pnpm/@vitest+runner@2.1.8/node_modules/@vitest/runner/dist/index.js:1205:15)\n    at runSuite (file:///Users/ChukwukaUba/Desktop/middle-earth-agents/express-ts/node_modules/.pnpm/@vitest+runner@2.1.8/node_modules/@vitest/runner/dist/index.js:1205:15)\n    at runSuite (file:///Users/ChukwukaUba/Desktop/middle-earth-agents/express-ts/node_modules/.pnpm/@vitest+runner@2.1.8/node_modules/@vitest/runner/dist/index.js:1205:15)\n    at runFiles (file:///Users/ChukwukaUba/Desktop/middle-earth-agents/express-ts/node_modules/.pnpm/@vitest+runner@2.1.8/node_modules/@vitest/runner/dist/index.js:1262:5)","timestamp":"2025-01-24T06:32:00.380Z"}
{"level":"info","message":"KeyManager service initialized with enhanced security","service":"middle-earth-agents","timestamp":"2025-01-24T06:32:00.389Z"}
{"level":"info","message":"Keypair cached for agent test-agent-id","service":"middle-earth-agents","timestamp":"2025-01-24T06:32:00.390Z"}
{"level":"info","message":"Generated new keypair for agent test-agent-id","publicKey":"mock-public-key","service":"middle-earth-agents","timestamp":"2025-01-24T06:32:00.391Z"}
{"level":"info","message":"Keypair rotated successfully for agent test-agent-id","newPublicKey":"mock-public-key","service":"middle-earth-agents","timestamp":"2025-01-24T06:32:00.392Z"}
{"level":"info","message":"KeyManager service initialized with enhanced security","service":"middle-earth-agents","timestamp":"2025-01-24T06:32:00.394Z"}
{"level":"error","message":"Keypair rotation failed for agent test-agent-id Keypair rotation cooldown not elapsed","name":"KeyManagementError","service":"middle-earth-agents","stack":"KeyManagementError: Keypair rotation cooldown not elapsed\n    at KeyManager.enforceRotationCooldown (/Users/ChukwukaUba/Desktop/middle-earth-agents/express-ts/src/deps/keyManager.ts:235:15)\n    at KeyManager.rotateKeypair (/Users/ChukwukaUba/Desktop/middle-earth-agents/express-ts/src/deps/keyManager.ts:212:12)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at /Users/ChukwukaUba/Desktop/middle-earth-agents/express-ts/src/deps/__tests__/keyManager.test.ts:167:7\n    at file:///Users/ChukwukaUba/Desktop/middle-earth-agents/express-ts/node_modules/.pnpm/@vitest+runner@2.1.8/node_modules/@vitest/runner/dist/index.js:533:5\n    at runTest (file:///Users/ChukwukaUba/Desktop/middle-earth-agents/express-ts/node_modules/.pnpm/@vitest+runner@2.1.8/node_modules/@vitest/runner/dist/index.js:1056:11)\n    at runSuite (file:///Users/ChukwukaUba/Desktop/middle-earth-agents/express-ts/node_modules/.pnpm/@vitest+runner@2.1.8/node_modules/@vitest/runner/dist/index.js:1205:15)\n    at runSuite (file:///Users/ChukwukaUba/Desktop/middle-earth-agents/express-ts/node_modules/.pnpm/@vitest+runner@2.1.8/node_modules/@vitest/runner/dist/index.js:1205:15)\n    at runSuite (file:///Users/ChukwukaUba/Desktop/middle-earth-agents/express-ts/node_modules/.pnpm/@vitest+runner@2.1.8/node_modules/@vitest/runner/dist/index.js:1205:15)\n    at runFiles (file:///Users/ChukwukaUba/Desktop/middle-earth-agents/express-ts/node_modules/.pnpm/@vitest+runner@2.1.8/node_modules/@vitest/runner/dist/index.js:1262:5)","timestamp":"2025-01-24T06:32:00.399Z"}
{"level":"info","message":"KeyManager service initialized with enhanced security","service":"middle-earth-agents","timestamp":"2025-01-24T06:32:00.404Z"}
{"level":"info","message":"KeyManager service initialized with enhanced security","service":"middle-earth-agents","timestamp":"2025-01-24T06:32:00.407Z"}
{"level":"error","message":"Failed to retrieve public key for test-agent-id No keypair found for agent test-agent-id","name":"KeyManagementError","service":"middle-earth-agents","stack":"KeyManagementError: No keypair found for agent test-agent-id\n    at KeyManager.getPublicKey (/Users/ChukwukaUba/Desktop/middle-earth-agents/express-ts/src/deps/keyManager.ts:325:15)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)","timestamp":"2025-01-24T06:32:00.408Z"}
{"level":"info","message":"KeyManager service initialized with enhanced security","service":"middle-earth-agents","timestamp":"2025-01-24T06:32:00.410Z"}
{"level":"info","message":"KeyManager service initialized with enhanced security","service":"middle-earth-agents","timestamp":"2025-01-24T06:32:00.413Z"}
{"level":"error","message":"Encrypted private key retrieval failed for test-agent-id No keypair found for agent test-agent-id","name":"KeyManagementError","service":"middle-earth-agents","stack":"KeyManagementError: No keypair found for agent test-agent-id\n    at KeyManager.getEncryptedPrivateKey (/Users/ChukwukaUba/Desktop/middle-earth-agents/express-ts/src/deps/keyManager.ts:344:15)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)","timestamp":"2025-01-24T06:32:00.415Z"}
{"level":"info","message":"KeyManager service initialized with enhanced security","service":"middle-earth-agents","timestamp":"2025-01-24T06:35:09.508Z"}
{"level":"info","message":"âš¡ï¸[server]: Server is running at http://localhost:3000","service":"middle-earth-agents","timestamp":"2025-01-24T06:35:09.516Z"}
{"level":"info","message":"Keypair cached for agent f23305f5-c2d2-4ae0-bf7e-4cce3d4dd752","service":"middle-earth-agents","timestamp":"2025-01-24T06:35:14.761Z"}
{"level":"info","message":"Generated new keypair for agent f23305f5-c2d2-4ae0-bf7e-4cce3d4dd752","publicKey":"BrtXD9Hu5wS4Gg9xj4cEkMQC4VnSGRNd2Hc6h9EyUQf3","service":"middle-earth-agents","timestamp":"2025-01-24T06:35:14.762Z"}
{"level":"info","message":"Shutting down gracefully...","service":"middle-earth-agents","timestamp":"2025-01-24T06:35:30.898Z"}
